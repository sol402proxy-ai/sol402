var kh=Object.create;var Bi=Object.defineProperty;var Bh=Object.getOwnPropertyDescriptor;var Th=Object.getOwnPropertyNames;var Lh=Object.getPrototypeOf,Ch=Object.prototype.hasOwnProperty;var It=(r,e)=>()=>(r&&(e=r(r=0)),e);var Ot=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Mh=(r,e)=>{for(var t in e)Bi(r,t,{get:e[t],enumerable:!0})},Gc=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Th(e))!Ch.call(r,i)&&i!==t&&Bi(r,i,{get:()=>e[i],enumerable:!(n=Bh(e,i))||n.enumerable});return r};var ut=(r,e,t)=>(t=r!=null?kh(Lh(r)):{},Gc(e||!r||!r.__esModule?Bi(t,"default",{value:r,enumerable:!0}):t,r)),Yc=r=>Gc(Bi({},"__esModule",{value:!0}),r);var Zc=Ot(Ti=>{"use strict";Ti.byteLength=Uh;Ti.toByteArray=zh;Ti.fromByteArray=qh;var tr=[],Ht=[],Ph=typeof Uint8Array<"u"?Uint8Array:Array,Ns="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Qr=0,Xc=Ns.length;Qr<Xc;++Qr)tr[Qr]=Ns[Qr],Ht[Ns.charCodeAt(Qr)]=Qr;var Qr,Xc;Ht[45]=62;Ht[95]=63;function jc(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function Uh(r){var e=jc(r),t=e[0],n=e[1];return(t+n)*3/4-n}function Dh(r,e,t){return(e+t)*3/4-t}function zh(r){var e,t=jc(r),n=t[0],i=t[1],o=new Ph(Dh(r,n,i)),s=0,u=i>0?n-4:n,f;for(f=0;f<u;f+=4)e=Ht[r.charCodeAt(f)]<<18|Ht[r.charCodeAt(f+1)]<<12|Ht[r.charCodeAt(f+2)]<<6|Ht[r.charCodeAt(f+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=Ht[r.charCodeAt(f)]<<2|Ht[r.charCodeAt(f+1)]>>4,o[s++]=e&255),i===1&&(e=Ht[r.charCodeAt(f)]<<10|Ht[r.charCodeAt(f+1)]<<4|Ht[r.charCodeAt(f+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function Fh(r){return tr[r>>18&63]+tr[r>>12&63]+tr[r>>6&63]+tr[r&63]}function Kh(r,e,t){for(var n,i=[],o=e;o<t;o+=3)n=(r[o]<<16&16711680)+(r[o+1]<<8&65280)+(r[o+2]&255),i.push(Fh(n));return i.join("")}function qh(r){for(var e,t=r.length,n=t%3,i=[],o=16383,s=0,u=t-n;s<u;s+=o)i.push(Kh(r,s,s+o>u?u:s+o));return n===1?(e=r[t-1],i.push(tr[e>>2]+tr[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(tr[e>>10]+tr[e>>4&63]+tr[e<<2&63]+"=")),i.join("")}});var Jc=Ot(ks=>{ks.read=function(r,e,t,n,i){var o,s,u=i*8-n-1,f=(1<<u)-1,w=f>>1,R=-7,S=t?i-1:0,I=t?-1:1,x=r[e+S];for(S+=I,o=x&(1<<-R)-1,x>>=-R,R+=u;R>0;o=o*256+r[e+S],S+=I,R-=8);for(s=o&(1<<-R)-1,o>>=-R,R+=n;R>0;s=s*256+r[e+S],S+=I,R-=8);if(o===0)o=1-w;else{if(o===f)return s?NaN:(x?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-w}return(x?-1:1)*s*Math.pow(2,o-n)};ks.write=function(r,e,t,n,i,o){var s,u,f,w=o*8-i-1,R=(1<<w)-1,S=R>>1,I=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=n?0:o-1,k=n?1:-1,T=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,s=R):(s=Math.floor(Math.log(e)/Math.LN2),e*(f=Math.pow(2,-s))<1&&(s--,f*=2),s+S>=1?e+=I/f:e+=I*Math.pow(2,1-S),e*f>=2&&(s++,f/=2),s+S>=R?(u=0,s=R):s+S>=1?(u=(e*f-1)*Math.pow(2,i),s=s+S):(u=e*Math.pow(2,S-1)*Math.pow(2,i),s=0));i>=8;r[t+x]=u&255,x+=k,u/=256,i-=8);for(s=s<<i|u,w+=i;w>0;r[t+x]=s&255,x+=k,s/=256,w-=8);r[t+x-k]|=T*128}});var vn=Ot(xn=>{"use strict";var Bs=Zc(),Sn=Jc(),Qc=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;xn.Buffer=D;xn.SlowBuffer=Yh;xn.INSPECT_MAX_BYTES=50;var Li=2147483647;xn.kMaxLength=Li;D.TYPED_ARRAY_SUPPORT=Hh();!D.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Hh(){try{let r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch{return!1}}Object.defineProperty(D.prototype,"parent",{enumerable:!0,get:function(){if(D.isBuffer(this))return this.buffer}});Object.defineProperty(D.prototype,"offset",{enumerable:!0,get:function(){if(D.isBuffer(this))return this.byteOffset}});function cr(r){if(r>Li)throw new RangeError('The value "'+r+'" is invalid for option "size"');let e=new Uint8Array(r);return Object.setPrototypeOf(e,D.prototype),e}function D(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Ms(r)}return nu(r,e,t)}D.poolSize=8192;function nu(r,e,t){if(typeof r=="string")return $h(r,e);if(ArrayBuffer.isView(r))return Wh(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(rr(r,ArrayBuffer)||r&&rr(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(rr(r,SharedArrayBuffer)||r&&rr(r.buffer,SharedArrayBuffer)))return Ls(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return D.from(n,e,t);let i=Gh(r);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return D.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}D.from=function(r,e,t){return nu(r,e,t)};Object.setPrototypeOf(D.prototype,Uint8Array.prototype);Object.setPrototypeOf(D,Uint8Array);function iu(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function Vh(r,e,t){return iu(r),r<=0?cr(r):e!==void 0?typeof t=="string"?cr(r).fill(e,t):cr(r).fill(e):cr(r)}D.alloc=function(r,e,t){return Vh(r,e,t)};function Ms(r){return iu(r),cr(r<0?0:Ps(r)|0)}D.allocUnsafe=function(r){return Ms(r)};D.allocUnsafeSlow=function(r){return Ms(r)};function $h(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!D.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let t=ou(r,e)|0,n=cr(t),i=n.write(r,e);return i!==t&&(n=n.slice(0,i)),n}function Ts(r){let e=r.length<0?0:Ps(r.length)|0,t=cr(e);for(let n=0;n<e;n+=1)t[n]=r[n]&255;return t}function Wh(r){if(rr(r,Uint8Array)){let e=new Uint8Array(r);return Ls(e.buffer,e.byteOffset,e.byteLength)}return Ts(r)}function Ls(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&t===void 0?n=new Uint8Array(r):t===void 0?n=new Uint8Array(r,e):n=new Uint8Array(r,e,t),Object.setPrototypeOf(n,D.prototype),n}function Gh(r){if(D.isBuffer(r)){let e=Ps(r.length)|0,t=cr(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||Ds(r.length)?cr(0):Ts(r);if(r.type==="Buffer"&&Array.isArray(r.data))return Ts(r.data)}function Ps(r){if(r>=Li)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Li.toString(16)+" bytes");return r|0}function Yh(r){return+r!=r&&(r=0),D.alloc(+r)}D.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==D.prototype};D.compare=function(e,t){if(rr(e,Uint8Array)&&(e=D.from(e,e.offset,e.byteLength)),rr(t,Uint8Array)&&(t=D.from(t,t.offset,t.byteLength)),!D.isBuffer(e)||!D.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,i=t.length;for(let o=0,s=Math.min(n,i);o<s;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0};D.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};D.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return D.alloc(0);let n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;let i=D.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){let s=e[n];if(rr(s,Uint8Array))o+s.length>i.length?(D.isBuffer(s)||(s=D.from(s)),s.copy(i,o)):Uint8Array.prototype.set.call(i,s,o);else if(D.isBuffer(s))s.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=s.length}return i};function ou(r,e){if(D.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||rr(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);let t=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&t===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return Cs(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return pu(r).length;default:if(i)return n?-1:Cs(r).length;e=(""+e).toLowerCase(),i=!0}}D.byteLength=ou;function Xh(r,e,t){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return od(this,e,t);case"utf8":case"utf-8":return au(this,e,t);case"ascii":return nd(this,e,t);case"latin1":case"binary":return id(this,e,t);case"base64":return td(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return sd(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}D.prototype._isBuffer=!0;function en(r,e,t){let n=r[e];r[e]=r[t],r[t]=n}D.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)en(this,t,t+1);return this};D.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)en(this,t,t+3),en(this,t+1,t+2);return this};D.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)en(this,t,t+7),en(this,t+1,t+6),en(this,t+2,t+5),en(this,t+3,t+4);return this};D.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?au(this,0,e):Xh.apply(this,arguments)};D.prototype.toLocaleString=D.prototype.toString;D.prototype.equals=function(e){if(!D.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:D.compare(this,e)===0};D.prototype.inspect=function(){let e="",t=xn.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"};Qc&&(D.prototype[Qc]=D.prototype.inspect);D.prototype.compare=function(e,t,n,i,o){if(rr(e,Uint8Array)&&(e=D.from(e,e.offset,e.byteLength)),!D.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;let s=o-i,u=n-t,f=Math.min(s,u),w=this.slice(i,o),R=e.slice(t,n);for(let S=0;S<f;++S)if(w[S]!==R[S]){s=w[S],u=R[S];break}return s<u?-1:u<s?1:0};function su(r,e,t,n,i){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,Ds(t)&&(t=i?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(i)return-1;t=r.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=D.from(e,n)),D.isBuffer(e))return e.length===0?-1:eu(r,e,t,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):eu(r,[e],t,n,i);throw new TypeError("val must be string, number or Buffer")}function eu(r,e,t,n,i){let o=1,s=r.length,u=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;o=2,s/=2,u/=2,t/=2}function f(R,S){return o===1?R[S]:R.readUInt16BE(S*o)}let w;if(i){let R=-1;for(w=t;w<s;w++)if(f(r,w)===f(e,R===-1?0:w-R)){if(R===-1&&(R=w),w-R+1===u)return R*o}else R!==-1&&(w-=w-R),R=-1}else for(t+u>s&&(t=s-u),w=t;w>=0;w--){let R=!0;for(let S=0;S<u;S++)if(f(r,w+S)!==f(e,S)){R=!1;break}if(R)return w}return-1}D.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};D.prototype.indexOf=function(e,t,n){return su(this,e,t,n,!0)};D.prototype.lastIndexOf=function(e,t,n){return su(this,e,t,n,!1)};function jh(r,e,t,n){t=Number(t)||0;let i=r.length-t;n?(n=Number(n),n>i&&(n=i)):n=i;let o=e.length;n>o/2&&(n=o/2);let s;for(s=0;s<n;++s){let u=parseInt(e.substr(s*2,2),16);if(Ds(u))return s;r[t+s]=u}return s}function Zh(r,e,t,n){return Ci(Cs(e,r.length-t),r,t,n)}function Jh(r,e,t,n){return Ci(fd(e),r,t,n)}function Qh(r,e,t,n){return Ci(pu(e),r,t,n)}function ed(r,e,t,n){return Ci(ld(e,r.length-t),r,t,n)}D.prototype.write=function(e,t,n,i){if(t===void 0)i="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")i=t,n=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-t;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return jh(this,e,t,n);case"utf8":case"utf-8":return Zh(this,e,t,n);case"ascii":case"latin1":case"binary":return Jh(this,e,t,n);case"base64":return Qh(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ed(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};D.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function td(r,e,t){return e===0&&t===r.length?Bs.fromByteArray(r):Bs.fromByteArray(r.slice(e,t))}function au(r,e,t){t=Math.min(r.length,t);let n=[],i=e;for(;i<t;){let o=r[i],s=null,u=o>239?4:o>223?3:o>191?2:1;if(i+u<=t){let f,w,R,S;switch(u){case 1:o<128&&(s=o);break;case 2:f=r[i+1],(f&192)===128&&(S=(o&31)<<6|f&63,S>127&&(s=S));break;case 3:f=r[i+1],w=r[i+2],(f&192)===128&&(w&192)===128&&(S=(o&15)<<12|(f&63)<<6|w&63,S>2047&&(S<55296||S>57343)&&(s=S));break;case 4:f=r[i+1],w=r[i+2],R=r[i+3],(f&192)===128&&(w&192)===128&&(R&192)===128&&(S=(o&15)<<18|(f&63)<<12|(w&63)<<6|R&63,S>65535&&S<1114112&&(s=S))}}s===null?(s=65533,u=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=u}return rd(n)}var tu=4096;function rd(r){let e=r.length;if(e<=tu)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=tu));return t}function nd(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]&127);return n}function id(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]);return n}function od(r,e,t){let n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);let i="";for(let o=e;o<t;++o)i+=hd[r[o]];return i}function sd(r,e,t){let n=r.slice(e,t),i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}D.prototype.slice=function(e,t){let n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);let i=this.subarray(e,t);return Object.setPrototypeOf(i,D.prototype),i};function ft(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}D.prototype.readUintLE=D.prototype.readUIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||ft(e,t,this.length);let i=this[e],o=1,s=0;for(;++s<t&&(o*=256);)i+=this[e+s]*o;return i};D.prototype.readUintBE=D.prototype.readUIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||ft(e,t,this.length);let i=this[e+--t],o=1;for(;t>0&&(o*=256);)i+=this[e+--t]*o;return i};D.prototype.readUint8=D.prototype.readUInt8=function(e,t){return e=e>>>0,t||ft(e,1,this.length),this[e]};D.prototype.readUint16LE=D.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||ft(e,2,this.length),this[e]|this[e+1]<<8};D.prototype.readUint16BE=D.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||ft(e,2,this.length),this[e]<<8|this[e+1]};D.prototype.readUint32LE=D.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||ft(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};D.prototype.readUint32BE=D.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||ft(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};D.prototype.readBigUInt64LE=Ir(function(e){e=e>>>0,An(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Zn(e,this.length-8);let i=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,o=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(o)<<BigInt(32))});D.prototype.readBigUInt64BE=Ir(function(e){e=e>>>0,An(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Zn(e,this.length-8);let i=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],o=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(o)});D.prototype.readIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||ft(e,t,this.length);let i=this[e],o=1,s=0;for(;++s<t&&(o*=256);)i+=this[e+s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i};D.prototype.readIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||ft(e,t,this.length);let i=t,o=1,s=this[e+--i];for(;i>0&&(o*=256);)s+=this[e+--i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*t)),s};D.prototype.readInt8=function(e,t){return e=e>>>0,t||ft(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};D.prototype.readInt16LE=function(e,t){e=e>>>0,t||ft(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};D.prototype.readInt16BE=function(e,t){e=e>>>0,t||ft(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};D.prototype.readInt32LE=function(e,t){return e=e>>>0,t||ft(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};D.prototype.readInt32BE=function(e,t){return e=e>>>0,t||ft(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};D.prototype.readBigInt64LE=Ir(function(e){e=e>>>0,An(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Zn(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});D.prototype.readBigInt64BE=Ir(function(e){e=e>>>0,An(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Zn(e,this.length-8);let i=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});D.prototype.readFloatLE=function(e,t){return e=e>>>0,t||ft(e,4,this.length),Sn.read(this,e,!0,23,4)};D.prototype.readFloatBE=function(e,t){return e=e>>>0,t||ft(e,4,this.length),Sn.read(this,e,!1,23,4)};D.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||ft(e,8,this.length),Sn.read(this,e,!0,52,8)};D.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||ft(e,8,this.length),Sn.read(this,e,!1,52,8)};function Lt(r,e,t,n,i,o){if(!D.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}D.prototype.writeUintLE=D.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let u=Math.pow(2,8*n)-1;Lt(this,e,t,n,u,0)}let o=1,s=0;for(this[t]=e&255;++s<n&&(o*=256);)this[t+s]=e/o&255;return t+n};D.prototype.writeUintBE=D.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let u=Math.pow(2,8*n)-1;Lt(this,e,t,n,u,0)}let o=n-1,s=1;for(this[t+o]=e&255;--o>=0&&(s*=256);)this[t+o]=e/s&255;return t+n};D.prototype.writeUint8=D.prototype.writeUInt8=function(e,t,n){return e=+e,t=t>>>0,n||Lt(this,e,t,1,255,0),this[t]=e&255,t+1};D.prototype.writeUint16LE=D.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||Lt(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2};D.prototype.writeUint16BE=D.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||Lt(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2};D.prototype.writeUint32LE=D.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||Lt(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4};D.prototype.writeUint32BE=D.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||Lt(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function cu(r,e,t,n,i){du(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s,t}function uu(r,e,t,n,i){du(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t+7]=o,o=o>>8,r[t+6]=o,o=o>>8,r[t+5]=o,o=o>>8,r[t+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return r[t+3]=s,s=s>>8,r[t+2]=s,s=s>>8,r[t+1]=s,s=s>>8,r[t]=s,t+8}D.prototype.writeBigUInt64LE=Ir(function(e,t=0){return cu(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});D.prototype.writeBigUInt64BE=Ir(function(e,t=0){return uu(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});D.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let f=Math.pow(2,8*n-1);Lt(this,e,t,n,f-1,-f)}let o=0,s=1,u=0;for(this[t]=e&255;++o<n&&(s*=256);)e<0&&u===0&&this[t+o-1]!==0&&(u=1),this[t+o]=(e/s>>0)-u&255;return t+n};D.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let f=Math.pow(2,8*n-1);Lt(this,e,t,n,f-1,-f)}let o=n-1,s=1,u=0;for(this[t+o]=e&255;--o>=0&&(s*=256);)e<0&&u===0&&this[t+o+1]!==0&&(u=1),this[t+o]=(e/s>>0)-u&255;return t+n};D.prototype.writeInt8=function(e,t,n){return e=+e,t=t>>>0,n||Lt(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1};D.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||Lt(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2};D.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||Lt(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2};D.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||Lt(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4};D.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||Lt(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};D.prototype.writeBigInt64LE=Ir(function(e,t=0){return cu(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});D.prototype.writeBigInt64BE=Ir(function(e,t=0){return uu(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function fu(r,e,t,n,i,o){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function lu(r,e,t,n,i){return e=+e,t=t>>>0,i||fu(r,e,t,4,34028234663852886e22,-34028234663852886e22),Sn.write(r,e,t,n,23,4),t+4}D.prototype.writeFloatLE=function(e,t,n){return lu(this,e,t,!0,n)};D.prototype.writeFloatBE=function(e,t,n){return lu(this,e,t,!1,n)};function hu(r,e,t,n,i){return e=+e,t=t>>>0,i||fu(r,e,t,8,17976931348623157e292,-17976931348623157e292),Sn.write(r,e,t,n,52,8),t+8}D.prototype.writeDoubleLE=function(e,t,n){return hu(this,e,t,!0,n)};D.prototype.writeDoubleBE=function(e,t,n){return hu(this,e,t,!1,n)};D.prototype.copy=function(e,t,n,i){if(!D.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);let o=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),o};D.prototype.fill=function(e,t,n,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!D.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let s=e.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(e=s)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let o;if(typeof e=="number")for(o=t;o<n;++o)this[o]=e;else{let s=D.isBuffer(e)?e:D.from(e,i),u=s.length;if(u===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=s[o%u]}return this};var Rn={};function Us(r,e,t){Rn[r]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}Us("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Us("ERR_INVALID_ARG_TYPE",function(r,e){return`The "${r}" argument must be of type number. Received type ${typeof e}`},TypeError);Us("ERR_OUT_OF_RANGE",function(r,e,t){let n=`The value of "${r}" is out of range.`,i=t;return Number.isInteger(t)&&Math.abs(t)>2**32?i=ru(String(t)):typeof t=="bigint"&&(i=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(i=ru(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function ru(r){let e="",t=r.length,n=r[0]==="-"?1:0;for(;t>=n+4;t-=3)e=`_${r.slice(t-3,t)}${e}`;return`${r.slice(0,t)}${e}`}function ad(r,e,t){An(e,"offset"),(r[e]===void 0||r[e+t]===void 0)&&Zn(e,r.length-(t+1))}function du(r,e,t,n,i,o){if(r>t||r<e){let s=typeof e=="bigint"?"n":"",u;throw o>3?e===0||e===BigInt(0)?u=`>= 0${s} and < 2${s} ** ${(o+1)*8}${s}`:u=`>= -(2${s} ** ${(o+1)*8-1}${s}) and < 2 ** ${(o+1)*8-1}${s}`:u=`>= ${e}${s} and <= ${t}${s}`,new Rn.ERR_OUT_OF_RANGE("value",u,r)}ad(n,i,o)}function An(r,e){if(typeof r!="number")throw new Rn.ERR_INVALID_ARG_TYPE(e,"number",r)}function Zn(r,e,t){throw Math.floor(r)!==r?(An(r,t),new Rn.ERR_OUT_OF_RANGE(t||"offset","an integer",r)):e<0?new Rn.ERR_BUFFER_OUT_OF_BOUNDS:new Rn.ERR_OUT_OF_RANGE(t||"offset",`>= ${t?1:0} and <= ${e}`,r)}var cd=/[^+/0-9A-Za-z-_]/g;function ud(r){if(r=r.split("=")[0],r=r.trim().replace(cd,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function Cs(r,e){e=e||1/0;let t,n=r.length,i=null,o=[];for(let s=0;s<n;++s){if(t=r.charCodeAt(s),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function fd(r){let e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function ld(r,e){let t,n,i,o=[];for(let s=0;s<r.length&&!((e-=2)<0);++s)t=r.charCodeAt(s),n=t>>8,i=t%256,o.push(i),o.push(n);return o}function pu(r){return Bs.toByteArray(ud(r))}function Ci(r,e,t,n){let i;for(i=0;i<n&&!(i+t>=e.length||i>=r.length);++i)e[i+t]=r[i];return i}function rr(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function Ds(r){return r!==r}var hd=(function(){let r="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){let n=t*16;for(let i=0;i<16;++i)e[n+i]=r[t]+r[i]}return e})();function Ir(r){return typeof BigInt>"u"?dd:r}function dd(){throw new Error("BigInt not supported")}});var nf=Ot(()=>{});var ua=Ot((of,ca)=>{(function(r,e){"use strict";function t(p,a){if(!p)throw new Error(a||"Assertion failed")}function n(p,a){p.super_=a;var c=function(){};c.prototype=a.prototype,p.prototype=new c,p.prototype.constructor=p}function i(p,a,c){if(i.isBN(p))return p;this.negative=0,this.words=null,this.length=0,this.red=null,p!==null&&((a==="le"||a==="be")&&(c=a,a=10),this._init(p||0,a||10,c||"be"))}typeof r=="object"?r.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=nf().Buffer}catch{}i.isBN=function(a){return a instanceof i?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===i.wordSize&&Array.isArray(a.words)},i.max=function(a,c){return a.cmp(c)>0?a:c},i.min=function(a,c){return a.cmp(c)<0?a:c},i.prototype._init=function(a,c,l){if(typeof a=="number")return this._initNumber(a,c,l);if(typeof a=="object")return this._initArray(a,c,l);c==="hex"&&(c=16),t(c===(c|0)&&c>=2&&c<=36),a=a.toString().replace(/\s+/g,"");var d=0;a[0]==="-"&&(d++,this.negative=1),d<a.length&&(c===16?this._parseHex(a,d,l):(this._parseBase(a,c,d),l==="le"&&this._initArray(this.toArray(),c,l)))},i.prototype._initNumber=function(a,c,l){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(t(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),l==="le"&&this._initArray(this.toArray(),c,l)},i.prototype._initArray=function(a,c,l){if(t(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;var g,m,A=0;if(l==="be")for(d=a.length-1,g=0;d>=0;d-=3)m=a[d]|a[d-1]<<8|a[d-2]<<16,this.words[g]|=m<<A&67108863,this.words[g+1]=m>>>26-A&67108863,A+=24,A>=26&&(A-=26,g++);else if(l==="le")for(d=0,g=0;d<a.length;d+=3)m=a[d]|a[d+1]<<8|a[d+2]<<16,this.words[g]|=m<<A&67108863,this.words[g+1]=m>>>26-A&67108863,A+=24,A>=26&&(A-=26,g++);return this._strip()};function s(p,a){var c=p.charCodeAt(a);if(c>=48&&c<=57)return c-48;if(c>=65&&c<=70)return c-55;if(c>=97&&c<=102)return c-87;t(!1,"Invalid character in "+p)}function u(p,a,c){var l=s(p,c);return c-1>=a&&(l|=s(p,c-1)<<4),l}i.prototype._parseHex=function(a,c,l){this.length=Math.ceil((a.length-c)/6),this.words=new Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;var g=0,m=0,A;if(l==="be")for(d=a.length-1;d>=c;d-=2)A=u(a,c,d)<<g,this.words[m]|=A&67108863,g>=18?(g-=18,m+=1,this.words[m]|=A>>>26):g+=8;else{var y=a.length-c;for(d=y%2===0?c+1:c;d<a.length;d+=2)A=u(a,c,d)<<g,this.words[m]|=A&67108863,g>=18?(g-=18,m+=1,this.words[m]|=A>>>26):g+=8}this._strip()};function f(p,a,c,l){for(var d=0,g=0,m=Math.min(p.length,c),A=a;A<m;A++){var y=p.charCodeAt(A)-48;d*=l,y>=49?g=y-49+10:y>=17?g=y-17+10:g=y,t(y>=0&&g<l,"Invalid character"),d+=g}return d}i.prototype._parseBase=function(a,c,l){this.words=[0],this.length=1;for(var d=0,g=1;g<=67108863;g*=c)d++;d--,g=g/c|0;for(var m=a.length-l,A=m%d,y=Math.min(m,m-A)+l,h=0,E=l;E<y;E+=d)h=f(a,E,E+d,c),this.imuln(g),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(A!==0){var K=1;for(h=f(a,E,a.length,c),E=0;E<A;E++)K*=c;this.imuln(K),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this._strip()},i.prototype.copy=function(a){a.words=new Array(this.length);for(var c=0;c<this.length;c++)a.words[c]=this.words[c];a.length=this.length,a.negative=this.negative,a.red=this.red};function w(p,a){p.words=a.words,p.length=a.length,p.negative=a.negative,p.red=a.red}if(i.prototype._move=function(a){w(a,this)},i.prototype.clone=function(){var a=new i(null);return this.copy(a),a},i.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=R}catch{i.prototype.inspect=R}else i.prototype.inspect=R;function R(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var S=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],I=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],x=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(a,c){a=a||10,c=c|0||1;var l;if(a===16||a==="hex"){l="";for(var d=0,g=0,m=0;m<this.length;m++){var A=this.words[m],y=((A<<d|g)&16777215).toString(16);g=A>>>24-d&16777215,d+=2,d>=26&&(d-=26,m--),g!==0||m!==this.length-1?l=S[6-y.length]+y+l:l=y+l}for(g!==0&&(l=g.toString(16)+l);l.length%c!==0;)l="0"+l;return this.negative!==0&&(l="-"+l),l}if(a===(a|0)&&a>=2&&a<=36){var h=I[a],E=x[a];l="";var K=this.clone();for(K.negative=0;!K.isZero();){var z=K.modrn(E).toString(a);K=K.idivn(E),K.isZero()?l=z+l:l=S[h-z.length]+z+l}for(this.isZero()&&(l="0"+l);l.length%c!==0;)l="0"+l;return this.negative!==0&&(l="-"+l),l}t(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&t(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(a,c){return this.toArrayLike(o,a,c)}),i.prototype.toArray=function(a,c){return this.toArrayLike(Array,a,c)};var k=function(a,c){return a.allocUnsafe?a.allocUnsafe(c):new a(c)};i.prototype.toArrayLike=function(a,c,l){this._strip();var d=this.byteLength(),g=l||Math.max(1,d);t(d<=g,"byte array longer than desired length"),t(g>0,"Requested array length <= 0");var m=k(a,g),A=c==="le"?"LE":"BE";return this["_toArrayLike"+A](m,d),m},i.prototype._toArrayLikeLE=function(a,c){for(var l=0,d=0,g=0,m=0;g<this.length;g++){var A=this.words[g]<<m|d;a[l++]=A&255,l<a.length&&(a[l++]=A>>8&255),l<a.length&&(a[l++]=A>>16&255),m===6?(l<a.length&&(a[l++]=A>>24&255),d=0,m=0):(d=A>>>24,m+=2)}if(l<a.length)for(a[l++]=d;l<a.length;)a[l++]=0},i.prototype._toArrayLikeBE=function(a,c){for(var l=a.length-1,d=0,g=0,m=0;g<this.length;g++){var A=this.words[g]<<m|d;a[l--]=A&255,l>=0&&(a[l--]=A>>8&255),l>=0&&(a[l--]=A>>16&255),m===6?(l>=0&&(a[l--]=A>>24&255),d=0,m=0):(d=A>>>24,m+=2)}if(l>=0)for(a[l--]=d;l>=0;)a[l--]=0},Math.clz32?i.prototype._countBits=function(a){return 32-Math.clz32(a)}:i.prototype._countBits=function(a){var c=a,l=0;return c>=4096&&(l+=13,c>>>=13),c>=64&&(l+=7,c>>>=7),c>=8&&(l+=4,c>>>=4),c>=2&&(l+=2,c>>>=2),l+c},i.prototype._zeroBits=function(a){if(a===0)return 26;var c=a,l=0;return(c&8191)===0&&(l+=13,c>>>=13),(c&127)===0&&(l+=7,c>>>=7),(c&15)===0&&(l+=4,c>>>=4),(c&3)===0&&(l+=2,c>>>=2),(c&1)===0&&l++,l},i.prototype.bitLength=function(){var a=this.words[this.length-1],c=this._countBits(a);return(this.length-1)*26+c};function T(p){for(var a=new Array(p.bitLength()),c=0;c<a.length;c++){var l=c/26|0,d=c%26;a[c]=p.words[l]>>>d&1}return a}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,c=0;c<this.length;c++){var l=this._zeroBits(this.words[c]);if(a+=l,l!==26)break}return a},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},i.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var c=0;c<a.length;c++)this.words[c]=this.words[c]|a.words[c];return this._strip()},i.prototype.ior=function(a){return t((this.negative|a.negative)===0),this.iuor(a)},i.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},i.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},i.prototype.iuand=function(a){var c;this.length>a.length?c=a:c=this;for(var l=0;l<c.length;l++)this.words[l]=this.words[l]&a.words[l];return this.length=c.length,this._strip()},i.prototype.iand=function(a){return t((this.negative|a.negative)===0),this.iuand(a)},i.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},i.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},i.prototype.iuxor=function(a){var c,l;this.length>a.length?(c=this,l=a):(c=a,l=this);for(var d=0;d<l.length;d++)this.words[d]=c.words[d]^l.words[d];if(this!==c)for(;d<c.length;d++)this.words[d]=c.words[d];return this.length=c.length,this._strip()},i.prototype.ixor=function(a){return t((this.negative|a.negative)===0),this.iuxor(a)},i.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},i.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},i.prototype.inotn=function(a){t(typeof a=="number"&&a>=0);var c=Math.ceil(a/26)|0,l=a%26;this._expand(c),l>0&&c--;for(var d=0;d<c;d++)this.words[d]=~this.words[d]&67108863;return l>0&&(this.words[d]=~this.words[d]&67108863>>26-l),this._strip()},i.prototype.notn=function(a){return this.clone().inotn(a)},i.prototype.setn=function(a,c){t(typeof a=="number"&&a>=0);var l=a/26|0,d=a%26;return this._expand(l+1),c?this.words[l]=this.words[l]|1<<d:this.words[l]=this.words[l]&~(1<<d),this._strip()},i.prototype.iadd=function(a){var c;if(this.negative!==0&&a.negative===0)return this.negative=0,c=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,c=this.isub(a),a.negative=1,c._normSign();var l,d;this.length>a.length?(l=this,d=a):(l=a,d=this);for(var g=0,m=0;m<d.length;m++)c=(l.words[m]|0)+(d.words[m]|0)+g,this.words[m]=c&67108863,g=c>>>26;for(;g!==0&&m<l.length;m++)c=(l.words[m]|0)+g,this.words[m]=c&67108863,g=c>>>26;if(this.length=l.length,g!==0)this.words[this.length]=g,this.length++;else if(l!==this)for(;m<l.length;m++)this.words[m]=l.words[m];return this},i.prototype.add=function(a){var c;return a.negative!==0&&this.negative===0?(a.negative=0,c=this.sub(a),a.negative^=1,c):a.negative===0&&this.negative!==0?(this.negative=0,c=a.sub(this),this.negative=1,c):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},i.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var c=this.iadd(a);return a.negative=1,c._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var l=this.cmp(a);if(l===0)return this.negative=0,this.length=1,this.words[0]=0,this;var d,g;l>0?(d=this,g=a):(d=a,g=this);for(var m=0,A=0;A<g.length;A++)c=(d.words[A]|0)-(g.words[A]|0)+m,m=c>>26,this.words[A]=c&67108863;for(;m!==0&&A<d.length;A++)c=(d.words[A]|0)+m,m=c>>26,this.words[A]=c&67108863;if(m===0&&A<d.length&&d!==this)for(;A<d.length;A++)this.words[A]=d.words[A];return this.length=Math.max(this.length,A),d!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(a){return this.clone().isub(a)};function P(p,a,c){c.negative=a.negative^p.negative;var l=p.length+a.length|0;c.length=l,l=l-1|0;var d=p.words[0]|0,g=a.words[0]|0,m=d*g,A=m&67108863,y=m/67108864|0;c.words[0]=A;for(var h=1;h<l;h++){for(var E=y>>>26,K=y&67108863,z=Math.min(h,a.length-1),q=Math.max(0,h-p.length+1);q<=z;q++){var G=h-q|0;d=p.words[G]|0,g=a.words[q]|0,m=d*g+K,E+=m/67108864|0,K=m&67108863}c.words[h]=K|0,y=E|0}return y!==0?c.words[h]=y|0:c.length--,c._strip()}var C=function(a,c,l){var d=a.words,g=c.words,m=l.words,A=0,y,h,E,K=d[0]|0,z=K&8191,q=K>>>13,G=d[1]|0,ne=G&8191,re=G>>>13,_e=d[2]|0,ae=_e&8191,de=_e>>>13,ct=d[3]|0,fe=ct&8191,oe=ct>>>13,Bc=d[4]|0,Ne=Bc&8191,ke=Bc>>>13,Tc=d[5]|0,Be=Tc&8191,Te=Tc>>>13,Lc=d[6]|0,Le=Lc&8191,Ce=Lc>>>13,Cc=d[7]|0,Me=Cc&8191,Pe=Cc>>>13,Mc=d[8]|0,Ue=Mc&8191,De=Mc>>>13,Pc=d[9]|0,ze=Pc&8191,Fe=Pc>>>13,Uc=g[0]|0,Ke=Uc&8191,qe=Uc>>>13,Dc=g[1]|0,He=Dc&8191,Ve=Dc>>>13,zc=g[2]|0,$e=zc&8191,We=zc>>>13,Fc=g[3]|0,Ge=Fc&8191,Ye=Fc>>>13,Kc=g[4]|0,Xe=Kc&8191,je=Kc>>>13,qc=g[5]|0,Ze=qc&8191,Je=qc>>>13,Hc=g[6]|0,Qe=Hc&8191,et=Hc>>>13,Vc=g[7]|0,tt=Vc&8191,rt=Vc>>>13,$c=g[8]|0,nt=$c&8191,it=$c>>>13,Wc=g[9]|0,ot=Wc&8191,st=Wc>>>13;l.negative=a.negative^c.negative,l.length=19,y=Math.imul(z,Ke),h=Math.imul(z,qe),h=h+Math.imul(q,Ke)|0,E=Math.imul(q,qe);var fs=(A+y|0)+((h&8191)<<13)|0;A=(E+(h>>>13)|0)+(fs>>>26)|0,fs&=67108863,y=Math.imul(ne,Ke),h=Math.imul(ne,qe),h=h+Math.imul(re,Ke)|0,E=Math.imul(re,qe),y=y+Math.imul(z,He)|0,h=h+Math.imul(z,Ve)|0,h=h+Math.imul(q,He)|0,E=E+Math.imul(q,Ve)|0;var ls=(A+y|0)+((h&8191)<<13)|0;A=(E+(h>>>13)|0)+(ls>>>26)|0,ls&=67108863,y=Math.imul(ae,Ke),h=Math.imul(ae,qe),h=h+Math.imul(de,Ke)|0,E=Math.imul(de,qe),y=y+Math.imul(ne,He)|0,h=h+Math.imul(ne,Ve)|0,h=h+Math.imul(re,He)|0,E=E+Math.imul(re,Ve)|0,y=y+Math.imul(z,$e)|0,h=h+Math.imul(z,We)|0,h=h+Math.imul(q,$e)|0,E=E+Math.imul(q,We)|0;var hs=(A+y|0)+((h&8191)<<13)|0;A=(E+(h>>>13)|0)+(hs>>>26)|0,hs&=67108863,y=Math.imul(fe,Ke),h=Math.imul(fe,qe),h=h+Math.imul(oe,Ke)|0,E=Math.imul(oe,qe),y=y+Math.imul(ae,He)|0,h=h+Math.imul(ae,Ve)|0,h=h+Math.imul(de,He)|0,E=E+Math.imul(de,Ve)|0,y=y+Math.imul(ne,$e)|0,h=h+Math.imul(ne,We)|0,h=h+Math.imul(re,$e)|0,E=E+Math.imul(re,We)|0,y=y+Math.imul(z,Ge)|0,h=h+Math.imul(z,Ye)|0,h=h+Math.imul(q,Ge)|0,E=E+Math.imul(q,Ye)|0;var ds=(A+y|0)+((h&8191)<<13)|0;A=(E+(h>>>13)|0)+(ds>>>26)|0,ds&=67108863,y=Math.imul(Ne,Ke),h=Math.imul(Ne,qe),h=h+Math.imul(ke,Ke)|0,E=Math.imul(ke,qe),y=y+Math.imul(fe,He)|0,h=h+Math.imul(fe,Ve)|0,h=h+Math.imul(oe,He)|0,E=E+Math.imul(oe,Ve)|0,y=y+Math.imul(ae,$e)|0,h=h+Math.imul(ae,We)|0,h=h+Math.imul(de,$e)|0,E=E+Math.imul(de,We)|0,y=y+Math.imul(ne,Ge)|0,h=h+Math.imul(ne,Ye)|0,h=h+Math.imul(re,Ge)|0,E=E+Math.imul(re,Ye)|0,y=y+Math.imul(z,Xe)|0,h=h+Math.imul(z,je)|0,h=h+Math.imul(q,Xe)|0,E=E+Math.imul(q,je)|0;var ps=(A+y|0)+((h&8191)<<13)|0;A=(E+(h>>>13)|0)+(ps>>>26)|0,ps&=67108863,y=Math.imul(Be,Ke),h=Math.imul(Be,qe),h=h+Math.imul(Te,Ke)|0,E=Math.imul(Te,qe),y=y+Math.imul(Ne,He)|0,h=h+Math.imul(Ne,Ve)|0,h=h+Math.imul(ke,He)|0,E=E+Math.imul(ke,Ve)|0,y=y+Math.imul(fe,$e)|0,h=h+Math.imul(fe,We)|0,h=h+Math.imul(oe,$e)|0,E=E+Math.imul(oe,We)|0,y=y+Math.imul(ae,Ge)|0,h=h+Math.imul(ae,Ye)|0,h=h+Math.imul(de,Ge)|0,E=E+Math.imul(de,Ye)|0,y=y+Math.imul(ne,Xe)|0,h=h+Math.imul(ne,je)|0,h=h+Math.imul(re,Xe)|0,E=E+Math.imul(re,je)|0,y=y+Math.imul(z,Ze)|0,h=h+Math.imul(z,Je)|0,h=h+Math.imul(q,Ze)|0,E=E+Math.imul(q,Je)|0;var gs=(A+y|0)+((h&8191)<<13)|0;A=(E+(h>>>13)|0)+(gs>>>26)|0,gs&=67108863,y=Math.imul(Le,Ke),h=Math.imul(Le,qe),h=h+Math.imul(Ce,Ke)|0,E=Math.imul(Ce,qe),y=y+Math.imul(Be,He)|0,h=h+Math.imul(Be,Ve)|0,h=h+Math.imul(Te,He)|0,E=E+Math.imul(Te,Ve)|0,y=y+Math.imul(Ne,$e)|0,h=h+Math.imul(Ne,We)|0,h=h+Math.imul(ke,$e)|0,E=E+Math.imul(ke,We)|0,y=y+Math.imul(fe,Ge)|0,h=h+Math.imul(fe,Ye)|0,h=h+Math.imul(oe,Ge)|0,E=E+Math.imul(oe,Ye)|0,y=y+Math.imul(ae,Xe)|0,h=h+Math.imul(ae,je)|0,h=h+Math.imul(de,Xe)|0,E=E+Math.imul(de,je)|0,y=y+Math.imul(ne,Ze)|0,h=h+Math.imul(ne,Je)|0,h=h+Math.imul(re,Ze)|0,E=E+Math.imul(re,Je)|0,y=y+Math.imul(z,Qe)|0,h=h+Math.imul(z,et)|0,h=h+Math.imul(q,Qe)|0,E=E+Math.imul(q,et)|0;var ys=(A+y|0)+((h&8191)<<13)|0;A=(E+(h>>>13)|0)+(ys>>>26)|0,ys&=67108863,y=Math.imul(Me,Ke),h=Math.imul(Me,qe),h=h+Math.imul(Pe,Ke)|0,E=Math.imul(Pe,qe),y=y+Math.imul(Le,He)|0,h=h+Math.imul(Le,Ve)|0,h=h+Math.imul(Ce,He)|0,E=E+Math.imul(Ce,Ve)|0,y=y+Math.imul(Be,$e)|0,h=h+Math.imul(Be,We)|0,h=h+Math.imul(Te,$e)|0,E=E+Math.imul(Te,We)|0,y=y+Math.imul(Ne,Ge)|0,h=h+Math.imul(Ne,Ye)|0,h=h+Math.imul(ke,Ge)|0,E=E+Math.imul(ke,Ye)|0,y=y+Math.imul(fe,Xe)|0,h=h+Math.imul(fe,je)|0,h=h+Math.imul(oe,Xe)|0,E=E+Math.imul(oe,je)|0,y=y+Math.imul(ae,Ze)|0,h=h+Math.imul(ae,Je)|0,h=h+Math.imul(de,Ze)|0,E=E+Math.imul(de,Je)|0,y=y+Math.imul(ne,Qe)|0,h=h+Math.imul(ne,et)|0,h=h+Math.imul(re,Qe)|0,E=E+Math.imul(re,et)|0,y=y+Math.imul(z,tt)|0,h=h+Math.imul(z,rt)|0,h=h+Math.imul(q,tt)|0,E=E+Math.imul(q,rt)|0;var ms=(A+y|0)+((h&8191)<<13)|0;A=(E+(h>>>13)|0)+(ms>>>26)|0,ms&=67108863,y=Math.imul(Ue,Ke),h=Math.imul(Ue,qe),h=h+Math.imul(De,Ke)|0,E=Math.imul(De,qe),y=y+Math.imul(Me,He)|0,h=h+Math.imul(Me,Ve)|0,h=h+Math.imul(Pe,He)|0,E=E+Math.imul(Pe,Ve)|0,y=y+Math.imul(Le,$e)|0,h=h+Math.imul(Le,We)|0,h=h+Math.imul(Ce,$e)|0,E=E+Math.imul(Ce,We)|0,y=y+Math.imul(Be,Ge)|0,h=h+Math.imul(Be,Ye)|0,h=h+Math.imul(Te,Ge)|0,E=E+Math.imul(Te,Ye)|0,y=y+Math.imul(Ne,Xe)|0,h=h+Math.imul(Ne,je)|0,h=h+Math.imul(ke,Xe)|0,E=E+Math.imul(ke,je)|0,y=y+Math.imul(fe,Ze)|0,h=h+Math.imul(fe,Je)|0,h=h+Math.imul(oe,Ze)|0,E=E+Math.imul(oe,Je)|0,y=y+Math.imul(ae,Qe)|0,h=h+Math.imul(ae,et)|0,h=h+Math.imul(de,Qe)|0,E=E+Math.imul(de,et)|0,y=y+Math.imul(ne,tt)|0,h=h+Math.imul(ne,rt)|0,h=h+Math.imul(re,tt)|0,E=E+Math.imul(re,rt)|0,y=y+Math.imul(z,nt)|0,h=h+Math.imul(z,it)|0,h=h+Math.imul(q,nt)|0,E=E+Math.imul(q,it)|0;var _s=(A+y|0)+((h&8191)<<13)|0;A=(E+(h>>>13)|0)+(_s>>>26)|0,_s&=67108863,y=Math.imul(ze,Ke),h=Math.imul(ze,qe),h=h+Math.imul(Fe,Ke)|0,E=Math.imul(Fe,qe),y=y+Math.imul(Ue,He)|0,h=h+Math.imul(Ue,Ve)|0,h=h+Math.imul(De,He)|0,E=E+Math.imul(De,Ve)|0,y=y+Math.imul(Me,$e)|0,h=h+Math.imul(Me,We)|0,h=h+Math.imul(Pe,$e)|0,E=E+Math.imul(Pe,We)|0,y=y+Math.imul(Le,Ge)|0,h=h+Math.imul(Le,Ye)|0,h=h+Math.imul(Ce,Ge)|0,E=E+Math.imul(Ce,Ye)|0,y=y+Math.imul(Be,Xe)|0,h=h+Math.imul(Be,je)|0,h=h+Math.imul(Te,Xe)|0,E=E+Math.imul(Te,je)|0,y=y+Math.imul(Ne,Ze)|0,h=h+Math.imul(Ne,Je)|0,h=h+Math.imul(ke,Ze)|0,E=E+Math.imul(ke,Je)|0,y=y+Math.imul(fe,Qe)|0,h=h+Math.imul(fe,et)|0,h=h+Math.imul(oe,Qe)|0,E=E+Math.imul(oe,et)|0,y=y+Math.imul(ae,tt)|0,h=h+Math.imul(ae,rt)|0,h=h+Math.imul(de,tt)|0,E=E+Math.imul(de,rt)|0,y=y+Math.imul(ne,nt)|0,h=h+Math.imul(ne,it)|0,h=h+Math.imul(re,nt)|0,E=E+Math.imul(re,it)|0,y=y+Math.imul(z,ot)|0,h=h+Math.imul(z,st)|0,h=h+Math.imul(q,ot)|0,E=E+Math.imul(q,st)|0;var ws=(A+y|0)+((h&8191)<<13)|0;A=(E+(h>>>13)|0)+(ws>>>26)|0,ws&=67108863,y=Math.imul(ze,He),h=Math.imul(ze,Ve),h=h+Math.imul(Fe,He)|0,E=Math.imul(Fe,Ve),y=y+Math.imul(Ue,$e)|0,h=h+Math.imul(Ue,We)|0,h=h+Math.imul(De,$e)|0,E=E+Math.imul(De,We)|0,y=y+Math.imul(Me,Ge)|0,h=h+Math.imul(Me,Ye)|0,h=h+Math.imul(Pe,Ge)|0,E=E+Math.imul(Pe,Ye)|0,y=y+Math.imul(Le,Xe)|0,h=h+Math.imul(Le,je)|0,h=h+Math.imul(Ce,Xe)|0,E=E+Math.imul(Ce,je)|0,y=y+Math.imul(Be,Ze)|0,h=h+Math.imul(Be,Je)|0,h=h+Math.imul(Te,Ze)|0,E=E+Math.imul(Te,Je)|0,y=y+Math.imul(Ne,Qe)|0,h=h+Math.imul(Ne,et)|0,h=h+Math.imul(ke,Qe)|0,E=E+Math.imul(ke,et)|0,y=y+Math.imul(fe,tt)|0,h=h+Math.imul(fe,rt)|0,h=h+Math.imul(oe,tt)|0,E=E+Math.imul(oe,rt)|0,y=y+Math.imul(ae,nt)|0,h=h+Math.imul(ae,it)|0,h=h+Math.imul(de,nt)|0,E=E+Math.imul(de,it)|0,y=y+Math.imul(ne,ot)|0,h=h+Math.imul(ne,st)|0,h=h+Math.imul(re,ot)|0,E=E+Math.imul(re,st)|0;var bs=(A+y|0)+((h&8191)<<13)|0;A=(E+(h>>>13)|0)+(bs>>>26)|0,bs&=67108863,y=Math.imul(ze,$e),h=Math.imul(ze,We),h=h+Math.imul(Fe,$e)|0,E=Math.imul(Fe,We),y=y+Math.imul(Ue,Ge)|0,h=h+Math.imul(Ue,Ye)|0,h=h+Math.imul(De,Ge)|0,E=E+Math.imul(De,Ye)|0,y=y+Math.imul(Me,Xe)|0,h=h+Math.imul(Me,je)|0,h=h+Math.imul(Pe,Xe)|0,E=E+Math.imul(Pe,je)|0,y=y+Math.imul(Le,Ze)|0,h=h+Math.imul(Le,Je)|0,h=h+Math.imul(Ce,Ze)|0,E=E+Math.imul(Ce,Je)|0,y=y+Math.imul(Be,Qe)|0,h=h+Math.imul(Be,et)|0,h=h+Math.imul(Te,Qe)|0,E=E+Math.imul(Te,et)|0,y=y+Math.imul(Ne,tt)|0,h=h+Math.imul(Ne,rt)|0,h=h+Math.imul(ke,tt)|0,E=E+Math.imul(ke,rt)|0,y=y+Math.imul(fe,nt)|0,h=h+Math.imul(fe,it)|0,h=h+Math.imul(oe,nt)|0,E=E+Math.imul(oe,it)|0,y=y+Math.imul(ae,ot)|0,h=h+Math.imul(ae,st)|0,h=h+Math.imul(de,ot)|0,E=E+Math.imul(de,st)|0;var Es=(A+y|0)+((h&8191)<<13)|0;A=(E+(h>>>13)|0)+(Es>>>26)|0,Es&=67108863,y=Math.imul(ze,Ge),h=Math.imul(ze,Ye),h=h+Math.imul(Fe,Ge)|0,E=Math.imul(Fe,Ye),y=y+Math.imul(Ue,Xe)|0,h=h+Math.imul(Ue,je)|0,h=h+Math.imul(De,Xe)|0,E=E+Math.imul(De,je)|0,y=y+Math.imul(Me,Ze)|0,h=h+Math.imul(Me,Je)|0,h=h+Math.imul(Pe,Ze)|0,E=E+Math.imul(Pe,Je)|0,y=y+Math.imul(Le,Qe)|0,h=h+Math.imul(Le,et)|0,h=h+Math.imul(Ce,Qe)|0,E=E+Math.imul(Ce,et)|0,y=y+Math.imul(Be,tt)|0,h=h+Math.imul(Be,rt)|0,h=h+Math.imul(Te,tt)|0,E=E+Math.imul(Te,rt)|0,y=y+Math.imul(Ne,nt)|0,h=h+Math.imul(Ne,it)|0,h=h+Math.imul(ke,nt)|0,E=E+Math.imul(ke,it)|0,y=y+Math.imul(fe,ot)|0,h=h+Math.imul(fe,st)|0,h=h+Math.imul(oe,ot)|0,E=E+Math.imul(oe,st)|0;var Rs=(A+y|0)+((h&8191)<<13)|0;A=(E+(h>>>13)|0)+(Rs>>>26)|0,Rs&=67108863,y=Math.imul(ze,Xe),h=Math.imul(ze,je),h=h+Math.imul(Fe,Xe)|0,E=Math.imul(Fe,je),y=y+Math.imul(Ue,Ze)|0,h=h+Math.imul(Ue,Je)|0,h=h+Math.imul(De,Ze)|0,E=E+Math.imul(De,Je)|0,y=y+Math.imul(Me,Qe)|0,h=h+Math.imul(Me,et)|0,h=h+Math.imul(Pe,Qe)|0,E=E+Math.imul(Pe,et)|0,y=y+Math.imul(Le,tt)|0,h=h+Math.imul(Le,rt)|0,h=h+Math.imul(Ce,tt)|0,E=E+Math.imul(Ce,rt)|0,y=y+Math.imul(Be,nt)|0,h=h+Math.imul(Be,it)|0,h=h+Math.imul(Te,nt)|0,E=E+Math.imul(Te,it)|0,y=y+Math.imul(Ne,ot)|0,h=h+Math.imul(Ne,st)|0,h=h+Math.imul(ke,ot)|0,E=E+Math.imul(ke,st)|0;var Ss=(A+y|0)+((h&8191)<<13)|0;A=(E+(h>>>13)|0)+(Ss>>>26)|0,Ss&=67108863,y=Math.imul(ze,Ze),h=Math.imul(ze,Je),h=h+Math.imul(Fe,Ze)|0,E=Math.imul(Fe,Je),y=y+Math.imul(Ue,Qe)|0,h=h+Math.imul(Ue,et)|0,h=h+Math.imul(De,Qe)|0,E=E+Math.imul(De,et)|0,y=y+Math.imul(Me,tt)|0,h=h+Math.imul(Me,rt)|0,h=h+Math.imul(Pe,tt)|0,E=E+Math.imul(Pe,rt)|0,y=y+Math.imul(Le,nt)|0,h=h+Math.imul(Le,it)|0,h=h+Math.imul(Ce,nt)|0,E=E+Math.imul(Ce,it)|0,y=y+Math.imul(Be,ot)|0,h=h+Math.imul(Be,st)|0,h=h+Math.imul(Te,ot)|0,E=E+Math.imul(Te,st)|0;var As=(A+y|0)+((h&8191)<<13)|0;A=(E+(h>>>13)|0)+(As>>>26)|0,As&=67108863,y=Math.imul(ze,Qe),h=Math.imul(ze,et),h=h+Math.imul(Fe,Qe)|0,E=Math.imul(Fe,et),y=y+Math.imul(Ue,tt)|0,h=h+Math.imul(Ue,rt)|0,h=h+Math.imul(De,tt)|0,E=E+Math.imul(De,rt)|0,y=y+Math.imul(Me,nt)|0,h=h+Math.imul(Me,it)|0,h=h+Math.imul(Pe,nt)|0,E=E+Math.imul(Pe,it)|0,y=y+Math.imul(Le,ot)|0,h=h+Math.imul(Le,st)|0,h=h+Math.imul(Ce,ot)|0,E=E+Math.imul(Ce,st)|0;var xs=(A+y|0)+((h&8191)<<13)|0;A=(E+(h>>>13)|0)+(xs>>>26)|0,xs&=67108863,y=Math.imul(ze,tt),h=Math.imul(ze,rt),h=h+Math.imul(Fe,tt)|0,E=Math.imul(Fe,rt),y=y+Math.imul(Ue,nt)|0,h=h+Math.imul(Ue,it)|0,h=h+Math.imul(De,nt)|0,E=E+Math.imul(De,it)|0,y=y+Math.imul(Me,ot)|0,h=h+Math.imul(Me,st)|0,h=h+Math.imul(Pe,ot)|0,E=E+Math.imul(Pe,st)|0;var vs=(A+y|0)+((h&8191)<<13)|0;A=(E+(h>>>13)|0)+(vs>>>26)|0,vs&=67108863,y=Math.imul(ze,nt),h=Math.imul(ze,it),h=h+Math.imul(Fe,nt)|0,E=Math.imul(Fe,it),y=y+Math.imul(Ue,ot)|0,h=h+Math.imul(Ue,st)|0,h=h+Math.imul(De,ot)|0,E=E+Math.imul(De,st)|0;var Is=(A+y|0)+((h&8191)<<13)|0;A=(E+(h>>>13)|0)+(Is>>>26)|0,Is&=67108863,y=Math.imul(ze,ot),h=Math.imul(ze,st),h=h+Math.imul(Fe,ot)|0,E=Math.imul(Fe,st);var Os=(A+y|0)+((h&8191)<<13)|0;return A=(E+(h>>>13)|0)+(Os>>>26)|0,Os&=67108863,m[0]=fs,m[1]=ls,m[2]=hs,m[3]=ds,m[4]=ps,m[5]=gs,m[6]=ys,m[7]=ms,m[8]=_s,m[9]=ws,m[10]=bs,m[11]=Es,m[12]=Rs,m[13]=Ss,m[14]=As,m[15]=xs,m[16]=vs,m[17]=Is,m[18]=Os,A!==0&&(m[19]=A,l.length++),l};Math.imul||(C=P);function L(p,a,c){c.negative=a.negative^p.negative,c.length=p.length+a.length;for(var l=0,d=0,g=0;g<c.length-1;g++){var m=d;d=0;for(var A=l&67108863,y=Math.min(g,a.length-1),h=Math.max(0,g-p.length+1);h<=y;h++){var E=g-h,K=p.words[E]|0,z=a.words[h]|0,q=K*z,G=q&67108863;m=m+(q/67108864|0)|0,G=G+A|0,A=G&67108863,m=m+(G>>>26)|0,d+=m>>>26,m&=67108863}c.words[g]=A,l=m,m=d}return l!==0?c.words[g]=l:c.length--,c._strip()}function F(p,a,c){return L(p,a,c)}i.prototype.mulTo=function(a,c){var l,d=this.length+a.length;return this.length===10&&a.length===10?l=C(this,a,c):d<63?l=P(this,a,c):d<1024?l=L(this,a,c):l=F(this,a,c),l};function V(p,a){this.x=p,this.y=a}V.prototype.makeRBT=function(a){for(var c=new Array(a),l=i.prototype._countBits(a)-1,d=0;d<a;d++)c[d]=this.revBin(d,l,a);return c},V.prototype.revBin=function(a,c,l){if(a===0||a===l-1)return a;for(var d=0,g=0;g<c;g++)d|=(a&1)<<c-g-1,a>>=1;return d},V.prototype.permute=function(a,c,l,d,g,m){for(var A=0;A<m;A++)d[A]=c[a[A]],g[A]=l[a[A]]},V.prototype.transform=function(a,c,l,d,g,m){this.permute(m,a,c,l,d,g);for(var A=1;A<g;A<<=1)for(var y=A<<1,h=Math.cos(2*Math.PI/y),E=Math.sin(2*Math.PI/y),K=0;K<g;K+=y)for(var z=h,q=E,G=0;G<A;G++){var ne=l[K+G],re=d[K+G],_e=l[K+G+A],ae=d[K+G+A],de=z*_e-q*ae;ae=z*ae+q*_e,_e=de,l[K+G]=ne+_e,d[K+G]=re+ae,l[K+G+A]=ne-_e,d[K+G+A]=re-ae,G!==y&&(de=h*z-E*q,q=h*q+E*z,z=de)}},V.prototype.guessLen13b=function(a,c){var l=Math.max(c,a)|1,d=l&1,g=0;for(l=l/2|0;l;l=l>>>1)g++;return 1<<g+1+d},V.prototype.conjugate=function(a,c,l){if(!(l<=1))for(var d=0;d<l/2;d++){var g=a[d];a[d]=a[l-d-1],a[l-d-1]=g,g=c[d],c[d]=-c[l-d-1],c[l-d-1]=-g}},V.prototype.normalize13b=function(a,c){for(var l=0,d=0;d<c/2;d++){var g=Math.round(a[2*d+1]/c)*8192+Math.round(a[2*d]/c)+l;a[d]=g&67108863,g<67108864?l=0:l=g/67108864|0}return a},V.prototype.convert13b=function(a,c,l,d){for(var g=0,m=0;m<c;m++)g=g+(a[m]|0),l[2*m]=g&8191,g=g>>>13,l[2*m+1]=g&8191,g=g>>>13;for(m=2*c;m<d;++m)l[m]=0;t(g===0),t((g&-8192)===0)},V.prototype.stub=function(a){for(var c=new Array(a),l=0;l<a;l++)c[l]=0;return c},V.prototype.mulp=function(a,c,l){var d=2*this.guessLen13b(a.length,c.length),g=this.makeRBT(d),m=this.stub(d),A=new Array(d),y=new Array(d),h=new Array(d),E=new Array(d),K=new Array(d),z=new Array(d),q=l.words;q.length=d,this.convert13b(a.words,a.length,A,d),this.convert13b(c.words,c.length,E,d),this.transform(A,m,y,h,d,g),this.transform(E,m,K,z,d,g);for(var G=0;G<d;G++){var ne=y[G]*K[G]-h[G]*z[G];h[G]=y[G]*z[G]+h[G]*K[G],y[G]=ne}return this.conjugate(y,h,d),this.transform(y,h,q,m,d,g),this.conjugate(q,m,d),this.normalize13b(q,d),l.negative=a.negative^c.negative,l.length=a.length+c.length,l._strip()},i.prototype.mul=function(a){var c=new i(null);return c.words=new Array(this.length+a.length),this.mulTo(a,c)},i.prototype.mulf=function(a){var c=new i(null);return c.words=new Array(this.length+a.length),F(this,a,c)},i.prototype.imul=function(a){return this.clone().mulTo(a,this)},i.prototype.imuln=function(a){var c=a<0;c&&(a=-a),t(typeof a=="number"),t(a<67108864);for(var l=0,d=0;d<this.length;d++){var g=(this.words[d]|0)*a,m=(g&67108863)+(l&67108863);l>>=26,l+=g/67108864|0,l+=m>>>26,this.words[d]=m&67108863}return l!==0&&(this.words[d]=l,this.length++),this.length=a===0?1:this.length,c?this.ineg():this},i.prototype.muln=function(a){return this.clone().imuln(a)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(a){var c=T(a);if(c.length===0)return new i(1);for(var l=this,d=0;d<c.length&&c[d]===0;d++,l=l.sqr());if(++d<c.length)for(var g=l.sqr();d<c.length;d++,g=g.sqr())c[d]!==0&&(l=l.mul(g));return l},i.prototype.iushln=function(a){t(typeof a=="number"&&a>=0);var c=a%26,l=(a-c)/26,d=67108863>>>26-c<<26-c,g;if(c!==0){var m=0;for(g=0;g<this.length;g++){var A=this.words[g]&d,y=(this.words[g]|0)-A<<c;this.words[g]=y|m,m=A>>>26-c}m&&(this.words[g]=m,this.length++)}if(l!==0){for(g=this.length-1;g>=0;g--)this.words[g+l]=this.words[g];for(g=0;g<l;g++)this.words[g]=0;this.length+=l}return this._strip()},i.prototype.ishln=function(a){return t(this.negative===0),this.iushln(a)},i.prototype.iushrn=function(a,c,l){t(typeof a=="number"&&a>=0);var d;c?d=(c-c%26)/26:d=0;var g=a%26,m=Math.min((a-g)/26,this.length),A=67108863^67108863>>>g<<g,y=l;if(d-=m,d=Math.max(0,d),y){for(var h=0;h<m;h++)y.words[h]=this.words[h];y.length=m}if(m!==0)if(this.length>m)for(this.length-=m,h=0;h<this.length;h++)this.words[h]=this.words[h+m];else this.words[0]=0,this.length=1;var E=0;for(h=this.length-1;h>=0&&(E!==0||h>=d);h--){var K=this.words[h]|0;this.words[h]=E<<26-g|K>>>g,E=K&A}return y&&E!==0&&(y.words[y.length++]=E),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(a,c,l){return t(this.negative===0),this.iushrn(a,c,l)},i.prototype.shln=function(a){return this.clone().ishln(a)},i.prototype.ushln=function(a){return this.clone().iushln(a)},i.prototype.shrn=function(a){return this.clone().ishrn(a)},i.prototype.ushrn=function(a){return this.clone().iushrn(a)},i.prototype.testn=function(a){t(typeof a=="number"&&a>=0);var c=a%26,l=(a-c)/26,d=1<<c;if(this.length<=l)return!1;var g=this.words[l];return!!(g&d)},i.prototype.imaskn=function(a){t(typeof a=="number"&&a>=0);var c=a%26,l=(a-c)/26;if(t(this.negative===0,"imaskn works only with positive numbers"),this.length<=l)return this;if(c!==0&&l++,this.length=Math.min(l,this.length),c!==0){var d=67108863^67108863>>>c<<c;this.words[this.length-1]&=d}return this._strip()},i.prototype.maskn=function(a){return this.clone().imaskn(a)},i.prototype.iaddn=function(a){return t(typeof a=="number"),t(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},i.prototype._iaddn=function(a){this.words[0]+=a;for(var c=0;c<this.length&&this.words[c]>=67108864;c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;return this.length=Math.max(this.length,c+1),this},i.prototype.isubn=function(a){if(t(typeof a=="number"),t(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var c=0;c<this.length&&this.words[c]<0;c++)this.words[c]+=67108864,this.words[c+1]-=1;return this._strip()},i.prototype.addn=function(a){return this.clone().iaddn(a)},i.prototype.subn=function(a){return this.clone().isubn(a)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(a,c,l){var d=a.length+l,g;this._expand(d);var m,A=0;for(g=0;g<a.length;g++){m=(this.words[g+l]|0)+A;var y=(a.words[g]|0)*c;m-=y&67108863,A=(m>>26)-(y/67108864|0),this.words[g+l]=m&67108863}for(;g<this.length-l;g++)m=(this.words[g+l]|0)+A,A=m>>26,this.words[g+l]=m&67108863;if(A===0)return this._strip();for(t(A===-1),A=0,g=0;g<this.length;g++)m=-(this.words[g]|0)+A,A=m>>26,this.words[g]=m&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(a,c){var l=this.length-a.length,d=this.clone(),g=a,m=g.words[g.length-1]|0,A=this._countBits(m);l=26-A,l!==0&&(g=g.ushln(l),d.iushln(l),m=g.words[g.length-1]|0);var y=d.length-g.length,h;if(c!=="mod"){h=new i(null),h.length=y+1,h.words=new Array(h.length);for(var E=0;E<h.length;E++)h.words[E]=0}var K=d.clone()._ishlnsubmul(g,1,y);K.negative===0&&(d=K,h&&(h.words[y]=1));for(var z=y-1;z>=0;z--){var q=(d.words[g.length+z]|0)*67108864+(d.words[g.length+z-1]|0);for(q=Math.min(q/m|0,67108863),d._ishlnsubmul(g,q,z);d.negative!==0;)q--,d.negative=0,d._ishlnsubmul(g,1,z),d.isZero()||(d.negative^=1);h&&(h.words[z]=q)}return h&&h._strip(),d._strip(),c!=="div"&&l!==0&&d.iushrn(l),{div:h||null,mod:d}},i.prototype.divmod=function(a,c,l){if(t(!a.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var d,g,m;return this.negative!==0&&a.negative===0?(m=this.neg().divmod(a,c),c!=="mod"&&(d=m.div.neg()),c!=="div"&&(g=m.mod.neg(),l&&g.negative!==0&&g.iadd(a)),{div:d,mod:g}):this.negative===0&&a.negative!==0?(m=this.divmod(a.neg(),c),c!=="mod"&&(d=m.div.neg()),{div:d,mod:m.mod}):(this.negative&a.negative)!==0?(m=this.neg().divmod(a.neg(),c),c!=="div"&&(g=m.mod.neg(),l&&g.negative!==0&&g.isub(a)),{div:m.div,mod:g}):a.length>this.length||this.cmp(a)<0?{div:new i(0),mod:this}:a.length===1?c==="div"?{div:this.divn(a.words[0]),mod:null}:c==="mod"?{div:null,mod:new i(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new i(this.modrn(a.words[0]))}:this._wordDiv(a,c)},i.prototype.div=function(a){return this.divmod(a,"div",!1).div},i.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},i.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},i.prototype.divRound=function(a){var c=this.divmod(a);if(c.mod.isZero())return c.div;var l=c.div.negative!==0?c.mod.isub(a):c.mod,d=a.ushrn(1),g=a.andln(1),m=l.cmp(d);return m<0||g===1&&m===0?c.div:c.div.negative!==0?c.div.isubn(1):c.div.iaddn(1)},i.prototype.modrn=function(a){var c=a<0;c&&(a=-a),t(a<=67108863);for(var l=(1<<26)%a,d=0,g=this.length-1;g>=0;g--)d=(l*d+(this.words[g]|0))%a;return c?-d:d},i.prototype.modn=function(a){return this.modrn(a)},i.prototype.idivn=function(a){var c=a<0;c&&(a=-a),t(a<=67108863);for(var l=0,d=this.length-1;d>=0;d--){var g=(this.words[d]|0)+l*67108864;this.words[d]=g/a|0,l=g%a}return this._strip(),c?this.ineg():this},i.prototype.divn=function(a){return this.clone().idivn(a)},i.prototype.egcd=function(a){t(a.negative===0),t(!a.isZero());var c=this,l=a.clone();c.negative!==0?c=c.umod(a):c=c.clone();for(var d=new i(1),g=new i(0),m=new i(0),A=new i(1),y=0;c.isEven()&&l.isEven();)c.iushrn(1),l.iushrn(1),++y;for(var h=l.clone(),E=c.clone();!c.isZero();){for(var K=0,z=1;(c.words[0]&z)===0&&K<26;++K,z<<=1);if(K>0)for(c.iushrn(K);K-- >0;)(d.isOdd()||g.isOdd())&&(d.iadd(h),g.isub(E)),d.iushrn(1),g.iushrn(1);for(var q=0,G=1;(l.words[0]&G)===0&&q<26;++q,G<<=1);if(q>0)for(l.iushrn(q);q-- >0;)(m.isOdd()||A.isOdd())&&(m.iadd(h),A.isub(E)),m.iushrn(1),A.iushrn(1);c.cmp(l)>=0?(c.isub(l),d.isub(m),g.isub(A)):(l.isub(c),m.isub(d),A.isub(g))}return{a:m,b:A,gcd:l.iushln(y)}},i.prototype._invmp=function(a){t(a.negative===0),t(!a.isZero());var c=this,l=a.clone();c.negative!==0?c=c.umod(a):c=c.clone();for(var d=new i(1),g=new i(0),m=l.clone();c.cmpn(1)>0&&l.cmpn(1)>0;){for(var A=0,y=1;(c.words[0]&y)===0&&A<26;++A,y<<=1);if(A>0)for(c.iushrn(A);A-- >0;)d.isOdd()&&d.iadd(m),d.iushrn(1);for(var h=0,E=1;(l.words[0]&E)===0&&h<26;++h,E<<=1);if(h>0)for(l.iushrn(h);h-- >0;)g.isOdd()&&g.iadd(m),g.iushrn(1);c.cmp(l)>=0?(c.isub(l),d.isub(g)):(l.isub(c),g.isub(d))}var K;return c.cmpn(1)===0?K=d:K=g,K.cmpn(0)<0&&K.iadd(a),K},i.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var c=this.clone(),l=a.clone();c.negative=0,l.negative=0;for(var d=0;c.isEven()&&l.isEven();d++)c.iushrn(1),l.iushrn(1);do{for(;c.isEven();)c.iushrn(1);for(;l.isEven();)l.iushrn(1);var g=c.cmp(l);if(g<0){var m=c;c=l,l=m}else if(g===0||l.cmpn(1)===0)break;c.isub(l)}while(!0);return l.iushln(d)},i.prototype.invm=function(a){return this.egcd(a).a.umod(a)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(a){return this.words[0]&a},i.prototype.bincn=function(a){t(typeof a=="number");var c=a%26,l=(a-c)/26,d=1<<c;if(this.length<=l)return this._expand(l+1),this.words[l]|=d,this;for(var g=d,m=l;g!==0&&m<this.length;m++){var A=this.words[m]|0;A+=g,g=A>>>26,A&=67108863,this.words[m]=A}return g!==0&&(this.words[m]=g,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(a){var c=a<0;if(this.negative!==0&&!c)return-1;if(this.negative===0&&c)return 1;this._strip();var l;if(this.length>1)l=1;else{c&&(a=-a),t(a<=67108863,"Number is too big");var d=this.words[0]|0;l=d===a?0:d<a?-1:1}return this.negative!==0?-l|0:l},i.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var c=this.ucmp(a);return this.negative!==0?-c|0:c},i.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var c=0,l=this.length-1;l>=0;l--){var d=this.words[l]|0,g=a.words[l]|0;if(d!==g){d<g?c=-1:d>g&&(c=1);break}}return c},i.prototype.gtn=function(a){return this.cmpn(a)===1},i.prototype.gt=function(a){return this.cmp(a)===1},i.prototype.gten=function(a){return this.cmpn(a)>=0},i.prototype.gte=function(a){return this.cmp(a)>=0},i.prototype.ltn=function(a){return this.cmpn(a)===-1},i.prototype.lt=function(a){return this.cmp(a)===-1},i.prototype.lten=function(a){return this.cmpn(a)<=0},i.prototype.lte=function(a){return this.cmp(a)<=0},i.prototype.eqn=function(a){return this.cmpn(a)===0},i.prototype.eq=function(a){return this.cmp(a)===0},i.red=function(a){return new B(a)},i.prototype.toRed=function(a){return t(!this.red,"Already a number in reduction context"),t(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},i.prototype.fromRed=function(){return t(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(a){return this.red=a,this},i.prototype.forceRed=function(a){return t(!this.red,"Already a number in reduction context"),this._forceRed(a)},i.prototype.redAdd=function(a){return t(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},i.prototype.redIAdd=function(a){return t(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},i.prototype.redSub=function(a){return t(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},i.prototype.redISub=function(a){return t(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},i.prototype.redShl=function(a){return t(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},i.prototype.redMul=function(a){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},i.prototype.redIMul=function(a){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},i.prototype.redSqr=function(){return t(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return t(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return t(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return t(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return t(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(a){return t(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var Q={k256:null,p224:null,p192:null,p25519:null};function j(p,a){this.name=p,this.p=new i(a,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}j.prototype._tmp=function(){var a=new i(null);return a.words=new Array(Math.ceil(this.n/13)),a},j.prototype.ireduce=function(a){var c=a,l;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),l=c.bitLength();while(l>this.n);var d=l<this.n?-1:c.ucmp(this.p);return d===0?(c.words[0]=0,c.length=1):d>0?c.isub(this.p):c.strip!==void 0?c.strip():c._strip(),c},j.prototype.split=function(a,c){a.iushrn(this.n,0,c)},j.prototype.imulK=function(a){return a.imul(this.k)};function ee(){j.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(ee,j),ee.prototype.split=function(a,c){for(var l=4194303,d=Math.min(a.length,9),g=0;g<d;g++)c.words[g]=a.words[g];if(c.length=d,a.length<=9){a.words[0]=0,a.length=1;return}var m=a.words[9];for(c.words[c.length++]=m&l,g=10;g<a.length;g++){var A=a.words[g]|0;a.words[g-10]=(A&l)<<4|m>>>22,m=A}m>>>=22,a.words[g-10]=m,m===0&&a.length>10?a.length-=10:a.length-=9},ee.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var c=0,l=0;l<a.length;l++){var d=a.words[l]|0;c+=d*977,a.words[l]=c&67108863,c=d*64+(c/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function b(){j.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(b,j);function _(){j.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(_,j);function v(){j.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(v,j),v.prototype.imulK=function(a){for(var c=0,l=0;l<a.length;l++){var d=(a.words[l]|0)*19+c,g=d&67108863;d>>>=26,a.words[l]=g,c=d}return c!==0&&(a.words[a.length++]=c),a},i._prime=function(a){if(Q[a])return Q[a];var c;if(a==="k256")c=new ee;else if(a==="p224")c=new b;else if(a==="p192")c=new _;else if(a==="p25519")c=new v;else throw new Error("Unknown prime "+a);return Q[a]=c,c};function B(p){if(typeof p=="string"){var a=i._prime(p);this.m=a.p,this.prime=a}else t(p.gtn(1),"modulus must be greater than 1"),this.m=p,this.prime=null}B.prototype._verify1=function(a){t(a.negative===0,"red works only with positives"),t(a.red,"red works only with red numbers")},B.prototype._verify2=function(a,c){t((a.negative|c.negative)===0,"red works only with positives"),t(a.red&&a.red===c.red,"red works only with red numbers")},B.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(w(a,a.umod(this.m)._forceRed(this)),a)},B.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},B.prototype.add=function(a,c){this._verify2(a,c);var l=a.add(c);return l.cmp(this.m)>=0&&l.isub(this.m),l._forceRed(this)},B.prototype.iadd=function(a,c){this._verify2(a,c);var l=a.iadd(c);return l.cmp(this.m)>=0&&l.isub(this.m),l},B.prototype.sub=function(a,c){this._verify2(a,c);var l=a.sub(c);return l.cmpn(0)<0&&l.iadd(this.m),l._forceRed(this)},B.prototype.isub=function(a,c){this._verify2(a,c);var l=a.isub(c);return l.cmpn(0)<0&&l.iadd(this.m),l},B.prototype.shl=function(a,c){return this._verify1(a),this.imod(a.ushln(c))},B.prototype.imul=function(a,c){return this._verify2(a,c),this.imod(a.imul(c))},B.prototype.mul=function(a,c){return this._verify2(a,c),this.imod(a.mul(c))},B.prototype.isqr=function(a){return this.imul(a,a.clone())},B.prototype.sqr=function(a){return this.mul(a,a)},B.prototype.sqrt=function(a){if(a.isZero())return a.clone();var c=this.m.andln(3);if(t(c%2===1),c===3){var l=this.m.add(new i(1)).iushrn(2);return this.pow(a,l)}for(var d=this.m.subn(1),g=0;!d.isZero()&&d.andln(1)===0;)g++,d.iushrn(1);t(!d.isZero());var m=new i(1).toRed(this),A=m.redNeg(),y=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new i(2*h*h).toRed(this);this.pow(h,y).cmp(A)!==0;)h.redIAdd(A);for(var E=this.pow(h,d),K=this.pow(a,d.addn(1).iushrn(1)),z=this.pow(a,d),q=g;z.cmp(m)!==0;){for(var G=z,ne=0;G.cmp(m)!==0;ne++)G=G.redSqr();t(ne<q);var re=this.pow(E,new i(1).iushln(q-ne-1));K=K.redMul(re),E=re.redSqr(),z=z.redMul(E),q=ne}return K},B.prototype.invm=function(a){var c=a._invmp(this.m);return c.negative!==0?(c.negative=0,this.imod(c).redNeg()):this.imod(c)},B.prototype.pow=function(a,c){if(c.isZero())return new i(1).toRed(this);if(c.cmpn(1)===0)return a.clone();var l=4,d=new Array(1<<l);d[0]=new i(1).toRed(this),d[1]=a;for(var g=2;g<d.length;g++)d[g]=this.mul(d[g-1],a);var m=d[0],A=0,y=0,h=c.bitLength()%26;for(h===0&&(h=26),g=c.length-1;g>=0;g--){for(var E=c.words[g],K=h-1;K>=0;K--){var z=E>>K&1;if(m!==d[0]&&(m=this.sqr(m)),z===0&&A===0){y=0;continue}A<<=1,A|=z,y++,!(y!==l&&(g!==0||K!==0))&&(m=this.mul(m,d[A]),y=0,A=0)}h=26}return m},B.prototype.convertTo=function(a){var c=a.umod(this.m);return c===a?c.clone():c},B.prototype.convertFrom=function(a){var c=a.clone();return c.red=null,c},i.mont=function(a){return new N(a)};function N(p){B.call(this,p),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(N,B),N.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},N.prototype.convertFrom=function(a){var c=this.imod(a.mul(this.rinv));return c.red=null,c},N.prototype.imul=function(a,c){if(a.isZero()||c.isZero())return a.words[0]=0,a.length=1,a;var l=a.imul(c),d=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=l.isub(d).iushrn(this.shift),m=g;return g.cmp(this.m)>=0?m=g.isub(this.m):g.cmpn(0)<0&&(m=g.iadd(this.m)),m._forceRed(this)},N.prototype.mul=function(a,c){if(a.isZero()||c.isZero())return new i(0)._forceRed(this);var l=a.mul(c),d=l.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=l.isub(d).iushrn(this.shift),m=g;return g.cmp(this.m)>=0?m=g.isub(this.m):g.cmpn(0)<0&&(m=g.iadd(this.m)),m._forceRed(this)},N.prototype.invm=function(a){var c=this.imod(a._invmp(this.m).mul(this.r2));return c._forceRed(this)}})(typeof ca>"u"||ca,of)});var cf=Ot((fa,af)=>{var Gi=vn(),ir=Gi.Buffer;function sf(r,e){for(var t in r)e[t]=r[t]}ir.from&&ir.alloc&&ir.allocUnsafe&&ir.allocUnsafeSlow?af.exports=Gi:(sf(Gi,fa),fa.Buffer=un);function un(r,e,t){return ir(r,e,t)}un.prototype=Object.create(ir.prototype);sf(ir,un);un.from=function(r,e,t){if(typeof r=="number")throw new TypeError("Argument must not be a number");return ir(r,e,t)};un.alloc=function(r,e,t){if(typeof r!="number")throw new TypeError("Argument must be a number");var n=ir(r);return e!==void 0?typeof t=="string"?n.fill(e,t):n.fill(e):n.fill(0),n};un.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return ir(r)};un.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return Gi.SlowBuffer(r)}});var ff=Ot((gb,uf)=>{"use strict";var Yi=cf().Buffer;function Jd(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var n=0;n<r.length;n++){var i=r.charAt(n),o=i.charCodeAt(0);if(e[o]!==255)throw new TypeError(i+" is ambiguous");e[o]=n}var s=r.length,u=r.charAt(0),f=Math.log(s)/Math.log(256),w=Math.log(256)/Math.log(s);function R(x){if((Array.isArray(x)||x instanceof Uint8Array)&&(x=Yi.from(x)),!Yi.isBuffer(x))throw new TypeError("Expected Buffer");if(x.length===0)return"";for(var k=0,T=0,P=0,C=x.length;P!==C&&x[P]===0;)P++,k++;for(var L=(C-P)*w+1>>>0,F=new Uint8Array(L);P!==C;){for(var V=x[P],Q=0,j=L-1;(V!==0||Q<T)&&j!==-1;j--,Q++)V+=256*F[j]>>>0,F[j]=V%s>>>0,V=V/s>>>0;if(V!==0)throw new Error("Non-zero carry");T=Q,P++}for(var ee=L-T;ee!==L&&F[ee]===0;)ee++;for(var b=u.repeat(k);ee<L;++ee)b+=r.charAt(F[ee]);return b}function S(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return Yi.alloc(0);for(var k=0,T=0,P=0;x[k]===u;)T++,k++;for(var C=(x.length-k)*f+1>>>0,L=new Uint8Array(C);k<x.length;){var F=x.charCodeAt(k);if(F>255)return;var V=e[F];if(V===255)return;for(var Q=0,j=C-1;(V!==0||Q<P)&&j!==-1;j--,Q++)V+=s*L[j]>>>0,L[j]=V%256>>>0,V=V/256>>>0;if(V!==0)throw new Error("Non-zero carry");P=Q,k++}for(var ee=C-P;ee!==C&&L[ee]===0;)ee++;var b=Yi.allocUnsafe(T+(C-ee));b.fill(0,0,T);for(var _=T;ee!==C;)b[_++]=L[ee++];return b}function I(x){var k=S(x);if(k)return k;throw new Error("Non-base"+s+" character")}return{encode:R,decodeUnsafe:S,decode:I}}uf.exports=Jd});var la=Ot((yb,lf)=>{var Qd=ff(),e0="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";lf.exports=Qd(e0)});var hf=Ot(ga=>{"use strict";function wr(r,e,t){return e<=r&&r<=t}function Qi(r){if(r===void 0)return{};if(r===Object(r))return r;throw TypeError("Could not convert argument to dictionary")}function t0(r){for(var e=String(r),t=e.length,n=0,i=[];n<t;){var o=e.charCodeAt(n);if(o<55296||o>57343)i.push(o);else if(56320<=o&&o<=57343)i.push(65533);else if(55296<=o&&o<=56319)if(n===t-1)i.push(65533);else{var s=r.charCodeAt(n+1);if(56320<=s&&s<=57343){var u=o&1023,f=s&1023;i.push(65536+(u<<10)+f),n+=1}else i.push(65533)}n+=1}return i}function r0(r){for(var e="",t=0;t<r.length;++t){var n=r[t];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return e}var Xi=-1;function pa(r){this.tokens=[].slice.call(r)}pa.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Xi},prepend:function(r){if(Array.isArray(r))for(var e=r;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(r)},push:function(r){if(Array.isArray(r))for(var e=r;e.length;)this.tokens.push(e.shift());else this.tokens.push(r)}};var Cn=-1;function da(r,e){if(r)throw TypeError("Decoder error");return e||65533}var ji="utf-8";function Zi(r,e){if(!(this instanceof Zi))return new Zi(r,e);if(r=r!==void 0?String(r).toLowerCase():ji,r!==ji)throw new Error("Encoding not supported. Only utf-8 is supported");e=Qi(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Zi.prototype={decode:function(e,t){var n;typeof e=="object"&&e instanceof ArrayBuffer?n=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):n=new Uint8Array(0),t=Qi(t),this._streaming||(this._decoder=new n0({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!t.stream;for(var i=new pa(n),o=[],s;!i.endOfStream()&&(s=this._decoder.handler(i,i.read()),s!==Cn);)s!==null&&(Array.isArray(s)?o.push.apply(o,s):o.push(s));if(!this._streaming){do{if(s=this._decoder.handler(i,i.read()),s===Cn)break;s!==null&&(Array.isArray(s)?o.push.apply(o,s):o.push(s))}while(!i.endOfStream());this._decoder=null}return o.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(o[0]===65279?(this._BOMseen=!0,o.shift()):this._BOMseen=!0),r0(o)}};function Ji(r,e){if(!(this instanceof Ji))return new Ji(r,e);if(r=r!==void 0?String(r).toLowerCase():ji,r!==ji)throw new Error("Encoding not supported. Only utf-8 is supported");e=Qi(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Ji.prototype={encode:function(e,t){e=e?String(e):"",t=Qi(t),this._streaming||(this._encoder=new i0(this._options)),this._streaming=!!t.stream;for(var n=[],i=new pa(t0(e)),o;!i.endOfStream()&&(o=this._encoder.handler(i,i.read()),o!==Cn);)Array.isArray(o)?n.push.apply(n,o):n.push(o);if(!this._streaming){for(;o=this._encoder.handler(i,i.read()),o!==Cn;)Array.isArray(o)?n.push.apply(n,o):n.push(o);this._encoder=null}return new Uint8Array(n)}};function n0(r){var e=r.fatal,t=0,n=0,i=0,o=128,s=191;this.handler=function(u,f){if(f===Xi&&i!==0)return i=0,da(e);if(f===Xi)return Cn;if(i===0){if(wr(f,0,127))return f;if(wr(f,194,223))i=1,t=f-192;else if(wr(f,224,239))f===224&&(o=160),f===237&&(s=159),i=2,t=f-224;else if(wr(f,240,244))f===240&&(o=144),f===244&&(s=143),i=3,t=f-240;else return da(e);return t=t<<6*i,null}if(!wr(f,o,s))return t=i=n=0,o=128,s=191,u.prepend(f),da(e);if(o=128,s=191,n+=1,t+=f-128<<6*(i-n),n!==i)return null;var w=t;return t=i=n=0,w}}function i0(r){var e=r.fatal;this.handler=function(t,n){if(n===Xi)return Cn;if(wr(n,0,127))return n;var i,o;wr(n,128,2047)?(i=1,o=192):wr(n,2048,65535)?(i=2,o=224):wr(n,65536,1114111)&&(i=3,o=240);for(var s=[(n>>6*i)+o];i>0;){var u=n>>6*(i-1);s.push(128|u&63),i-=1}return s}}ga.TextEncoder=Ji;ga.TextDecoder=Zi});var mf=Ot(Ee=>{"use strict";var o0=Ee&&Ee.__createBinding||(Object.create?(function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}):(function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]})),s0=Ee&&Ee.__setModuleDefault||(Object.create?(function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}):function(r,e){r.default=e}),or=Ee&&Ee.__decorate||function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(s=r[u])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},a0=Ee&&Ee.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.hasOwnProperty.call(r,t)&&o0(e,r,t);return s0(e,r),e},df=Ee&&Ee.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.deserializeUnchecked=Ee.deserialize=Ee.serialize=Ee.BinaryReader=Ee.BinaryWriter=Ee.BorshError=Ee.baseDecode=Ee.baseEncode=void 0;var Ur=df(ua()),pf=df(la()),c0=a0(hf()),u0=typeof TextDecoder!="function"?c0.TextDecoder:TextDecoder,f0=new u0("utf-8",{fatal:!0});function l0(r){return typeof r=="string"&&(r=Buffer.from(r,"utf8")),pf.default.encode(Buffer.from(r))}Ee.baseEncode=l0;function h0(r){return Buffer.from(pf.default.decode(r))}Ee.baseDecode=h0;var ya=1024,mt=class extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}};Ee.BorshError=mt;var eo=class{constructor(){this.buf=Buffer.alloc(ya),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(ya)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Ur.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Ur.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Ur.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(Buffer.from(new Ur.default(e).toArray("le",64)))}writeBuffer(e){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),e,Buffer.alloc(ya)]),this.length+=e.length}writeString(e){this.maybeResize();let t=Buffer.from(e,"utf8");this.writeU32(t.length),this.writeBuffer(t)}writeFixedArray(e){this.writeBuffer(Buffer.from(e))}writeArray(e,t){this.maybeResize(),this.writeU32(e.length);for(let n of e)this.maybeResize(),t(n)}toArray(){return this.buf.subarray(0,this.length)}};Ee.BinaryWriter=eo;function sr(r,e,t){let n=t.value;t.value=function(...i){try{return n.apply(this,i)}catch(o){if(o instanceof RangeError){let s=o.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(s)>=0)throw new mt("Reached the end of buffer when deserializing")}throw o}}}var Bt=class{constructor(e){this.buf=e,this.offset=0}readU8(){let e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){let e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){let e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){let e=this.readBuffer(8);return new Ur.default(e,"le")}readU128(){let e=this.readBuffer(16);return new Ur.default(e,"le")}readU256(){let e=this.readBuffer(32);return new Ur.default(e,"le")}readU512(){let e=this.readBuffer(64);return new Ur.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new mt(`Expected buffer length ${e} isn't within bounds`);let t=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,t}readString(){let e=this.readU32(),t=this.readBuffer(e);try{return f0.decode(t)}catch(n){throw new mt(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){let t=this.readU32(),n=Array();for(let i=0;i<t;++i)n.push(e());return n}};or([sr],Bt.prototype,"readU8",null);or([sr],Bt.prototype,"readU16",null);or([sr],Bt.prototype,"readU32",null);or([sr],Bt.prototype,"readU64",null);or([sr],Bt.prototype,"readU128",null);or([sr],Bt.prototype,"readU256",null);or([sr],Bt.prototype,"readU512",null);or([sr],Bt.prototype,"readString",null);or([sr],Bt.prototype,"readFixedArray",null);or([sr],Bt.prototype,"readArray",null);Ee.BinaryReader=Bt;function gf(r){return r.charAt(0).toUpperCase()+r.slice(1)}function fn(r,e,t,n,i){try{if(typeof n=="string")i[`write${gf(n)}`](t);else if(n instanceof Array)if(typeof n[0]=="number"){if(t.length!==n[0])throw new mt(`Expecting byte array of length ${n[0]}, but got ${t.length} bytes`);i.writeFixedArray(t)}else if(n.length===2&&typeof n[1]=="number"){if(t.length!==n[1])throw new mt(`Expecting byte array of length ${n[1]}, but got ${t.length} bytes`);for(let o=0;o<n[1];o++)fn(r,null,t[o],n[0],i)}else i.writeArray(t,o=>{fn(r,e,o,n[0],i)});else if(n.kind!==void 0)switch(n.kind){case"option":{t==null?i.writeU8(0):(i.writeU8(1),fn(r,e,t,n.type,i));break}case"map":{i.writeU32(t.size),t.forEach((o,s)=>{fn(r,e,s,n.key,i),fn(r,e,o,n.value,i)});break}default:throw new mt(`FieldType ${n} unrecognized`)}else yf(r,t,i)}catch(o){throw o instanceof mt&&o.addToFieldPath(e),o}}function yf(r,e,t){if(typeof e.borshSerialize=="function"){e.borshSerialize(t);return}let n=r.get(e.constructor);if(!n)throw new mt(`Class ${e.constructor.name} is missing in schema`);if(n.kind==="struct")n.fields.map(([i,o])=>{fn(r,i,e[i],o,t)});else if(n.kind==="enum"){let i=e[n.field];for(let o=0;o<n.values.length;++o){let[s,u]=n.values[o];if(s===i){t.writeU8(o),fn(r,s,e[s],u,t);break}}}else throw new mt(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}function d0(r,e,t=eo){let n=new t;return yf(r,e,n),n.toArray()}Ee.serialize=d0;function ln(r,e,t,n){try{if(typeof t=="string")return n[`read${gf(t)}`]();if(t instanceof Array){if(typeof t[0]=="number")return n.readFixedArray(t[0]);if(typeof t[1]=="number"){let i=[];for(let o=0;o<t[1];o++)i.push(ln(r,null,t[0],n));return i}else return n.readArray(()=>ln(r,e,t[0],n))}if(t.kind==="option")return n.readU8()?ln(r,e,t.type,n):void 0;if(t.kind==="map"){let i=new Map,o=n.readU32();for(let s=0;s<o;s++){let u=ln(r,e,t.key,n),f=ln(r,e,t.value,n);i.set(u,f)}return i}return ma(r,t,n)}catch(i){throw i instanceof mt&&i.addToFieldPath(e),i}}function ma(r,e,t){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(t);let n=r.get(e);if(!n)throw new mt(`Class ${e.name} is missing in schema`);if(n.kind==="struct"){let i={};for(let[o,s]of r.get(e).fields)i[o]=ln(r,o,s,t);return new e(i)}if(n.kind==="enum"){let i=t.readU8();if(i>=n.values.length)throw new mt(`Enum index: ${i} is out of range`);let[o,s]=n.values[i],u=ln(r,o,s,t);return new e({[o]:u})}throw new mt(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}function p0(r,e,t,n=Bt){let i=new n(t),o=ma(r,e,i);if(i.offset<t.length)throw new mt(`Unexpected ${t.length-i.offset} bytes after deserialized data`);return o}Ee.deserialize=p0;function g0(r,e,t,n=Bt){let i=new n(t);return ma(r,e,i)}Ee.deserializeUnchecked=g0});var ar=Ot(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.s16=U.s8=U.nu64be=U.u48be=U.u40be=U.u32be=U.u24be=U.u16be=U.nu64=U.u48=U.u40=U.u32=U.u24=U.u16=U.u8=U.offset=U.greedy=U.Constant=U.UTF8=U.CString=U.Blob=U.Boolean=U.BitField=U.BitStructure=U.VariantLayout=U.Union=U.UnionLayoutDiscriminator=U.UnionDiscriminator=U.Structure=U.Sequence=U.DoubleBE=U.Double=U.FloatBE=U.Float=U.NearInt64BE=U.NearInt64=U.NearUInt64BE=U.NearUInt64=U.IntBE=U.Int=U.UIntBE=U.UInt=U.OffsetLayout=U.GreedyCount=U.ExternalLayout=U.bindConstructorLayout=U.nameWithProperty=U.Layout=U.uint8ArrayToBuffer=U.checkUint8Array=void 0;U.constant=U.utf8=U.cstr=U.blob=U.unionLayoutDiscriminator=U.union=U.seq=U.bits=U.struct=U.f64be=U.f64=U.f32be=U.f32=U.ns64be=U.s48be=U.s40be=U.s32be=U.s24be=U.s16be=U.ns64=U.s48=U.s40=U.s32=U.s24=void 0;var wa=vn();function Un(r){if(!(r instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}U.checkUint8Array=Un;function pe(r){return Un(r),wa.Buffer.from(r.buffer,r.byteOffset,r.length)}U.uint8ArrayToBuffer=pe;var me=class{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){let t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}};U.Layout=me;function ba(r,e){return e.property?r+"["+e.property+"]":r}U.nameWithProperty=ba;function y0(r,e){if(typeof r!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(r,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof me))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");r.layout_=e,e.boundConstructor_=r,e.makeDestinationObject=(()=>new r),Object.defineProperty(r.prototype,"encode",{value(t,n){return e.encode(this,t,n)},writable:!0}),Object.defineProperty(r,"decode",{value(t,n){return e.decode(t,n)},writable:!0})}U.bindConstructorLayout=y0;var bt=class extends me{isCount(){throw new Error("ExternalLayout is abstract")}};U.ExternalLayout=bt;var to=class extends bt{constructor(e=1,t){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t=0){Un(e);let n=e.length-t;return Math.floor(n/this.elementSpan)}encode(e,t,n){return 0}};U.GreedyCount=to;var ai=class extends bt{constructor(e,t=0,n){if(!(e instanceof me))throw new TypeError("layout must be a Layout");if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,n||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof Mt||this.layout instanceof zt}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,n=0){return this.layout.encode(e,t,n+this.offset)}};U.OffsetLayout=ai;var Mt=class extends me{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return pe(e).readUIntLE(t,this.span)}encode(e,t,n=0){return pe(t).writeUIntLE(e,n,this.span),this.span}};U.UInt=Mt;var zt=class extends me{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return pe(e).readUIntBE(t,this.span)}encode(e,t,n=0){return pe(t).writeUIntBE(e,n,this.span),this.span}};U.UIntBE=zt;var br=class extends me{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return pe(e).readIntLE(t,this.span)}encode(e,t,n=0){return pe(t).writeIntLE(e,n,this.span),this.span}};U.Int=br;var Dr=class extends me{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return pe(e).readIntBE(t,this.span)}encode(e,t,n=0){return pe(t).writeIntBE(e,n,this.span),this.span}};U.IntBE=Dr;var _a=Math.pow(2,32);function wo(r){let e=Math.floor(r/_a),t=r-e*_a;return{hi32:e,lo32:t}}function bo(r,e){return r*_a+e}var ro=class extends me{constructor(e){super(8,e)}decode(e,t=0){let n=pe(e),i=n.readUInt32LE(t),o=n.readUInt32LE(t+4);return bo(o,i)}encode(e,t,n=0){let i=wo(e),o=pe(t);return o.writeUInt32LE(i.lo32,n),o.writeUInt32LE(i.hi32,n+4),8}};U.NearUInt64=ro;var no=class extends me{constructor(e){super(8,e)}decode(e,t=0){let n=pe(e),i=n.readUInt32BE(t),o=n.readUInt32BE(t+4);return bo(i,o)}encode(e,t,n=0){let i=wo(e),o=pe(t);return o.writeUInt32BE(i.hi32,n),o.writeUInt32BE(i.lo32,n+4),8}};U.NearUInt64BE=no;var io=class extends me{constructor(e){super(8,e)}decode(e,t=0){let n=pe(e),i=n.readUInt32LE(t),o=n.readInt32LE(t+4);return bo(o,i)}encode(e,t,n=0){let i=wo(e),o=pe(t);return o.writeUInt32LE(i.lo32,n),o.writeInt32LE(i.hi32,n+4),8}};U.NearInt64=io;var oo=class extends me{constructor(e){super(8,e)}decode(e,t=0){let n=pe(e),i=n.readInt32BE(t),o=n.readUInt32BE(t+4);return bo(i,o)}encode(e,t,n=0){let i=wo(e),o=pe(t);return o.writeInt32BE(i.hi32,n),o.writeUInt32BE(i.lo32,n+4),8}};U.NearInt64BE=oo;var so=class extends me{constructor(e){super(4,e)}decode(e,t=0){return pe(e).readFloatLE(t)}encode(e,t,n=0){return pe(t).writeFloatLE(e,n),4}};U.Float=so;var ao=class extends me{constructor(e){super(4,e)}decode(e,t=0){return pe(e).readFloatBE(t)}encode(e,t,n=0){return pe(t).writeFloatBE(e,n),4}};U.FloatBE=ao;var co=class extends me{constructor(e){super(8,e)}decode(e,t=0){return pe(e).readDoubleLE(t)}encode(e,t,n=0){return pe(t).writeDoubleLE(e,n),8}};U.Double=co;var uo=class extends me{constructor(e){super(8,e)}decode(e,t=0){return pe(e).readDoubleBE(t)}encode(e,t,n=0){return pe(t).writeDoubleBE(e,n),8}};U.DoubleBE=uo;var fo=class extends me{constructor(e,t,n){if(!(e instanceof me))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof bt&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let i=-1;!(t instanceof bt)&&0<e.span&&(i=t*e.span),super(i,n),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let n=0,i=this.count;if(i instanceof bt&&(i=i.decode(e,t)),0<this.elementLayout.span)n=i*this.elementLayout.span;else{let o=0;for(;o<i;)n+=this.elementLayout.getSpan(e,t+n),++o}return n}decode(e,t=0){let n=[],i=0,o=this.count;for(o instanceof bt&&(o=o.decode(e,t));i<o;)n.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),i+=1;return n}encode(e,t,n=0){let i=this.elementLayout,o=e.reduce((s,u)=>s+i.encode(u,t,n+s),0);return this.count instanceof bt&&this.count.encode(e.length,t,n),o}};U.Sequence=fo;var lo=class extends me{constructor(e,t,n){if(!(Array.isArray(e)&&e.reduce((o,s)=>o&&s instanceof me,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&n===void 0&&(n=t,t=void 0);for(let o of e)if(0>o.span&&o.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let i=-1;try{i=e.reduce((o,s)=>o+s.getSpan(),0)}catch{}super(i,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce((i,o)=>{let s=o.getSpan(e,t);return t+=s,i+s},0)}catch{throw new RangeError("indeterminate span")}return n}decode(e,t=0){Un(e);let n=this.makeDestinationObject();for(let i of this.fields)if(i.property!==void 0&&(n[i.property]=i.decode(e,t)),t+=i.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n=0){let i=n,o=0,s=0;for(let u of this.fields){let f=u.span;if(s=0<f?f:0,u.property!==void 0){let w=e[u.property];w!==void 0&&(s=u.encode(w,t,n),0>f&&(f=u.getSpan(t,n)))}o=n,n+=f}return o+s-i}fromArray(e){let t=this.makeDestinationObject();for(let n of this.fields)n.property!==void 0&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(let t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(let n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}};U.Structure=lo;var ci=class{constructor(e){this.property=e}decode(e,t){throw new Error("UnionDiscriminator is abstract")}encode(e,t,n){throw new Error("UnionDiscriminator is abstract")}};U.UnionDiscriminator=ci;var Pn=class extends ci{constructor(e,t){if(!(e instanceof bt&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,n){return this.layout.encode(e,t,n)}};U.UnionLayoutDiscriminator=Pn;var ui=class extends me{constructor(e,t,n){let i;if(e instanceof Mt||e instanceof zt)i=new Pn(new ai(e));else if(e instanceof bt&&e.isCount())i=new Pn(e);else if(e instanceof ci)i=e;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof me))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let o=-1;t&&(o=t.span,0<=o&&(e instanceof Mt||e instanceof zt)&&(o+=i.layout.span)),super(o,n),this.discriminator=i,this.usesPrefixDiscriminator=e instanceof Mt||e instanceof zt,this.defaultLayout=t,this.registry={};let s=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(u){return s(u)},this.configGetSourceVariant=function(u){s=u.bind(this)}}getSpan(e,t=0){if(0<=this.span)return this.span;let n=this.getVariant(e,t);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,t)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;let t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(let t in this.registry){let n=this.registry[t];if(n.property&&Object.prototype.hasOwnProperty.call(e,n.property))return n}throw new Error("unable to infer src variant")}decode(e,t=0){let n,i=this.discriminator,o=i.decode(e,t),s=this.registry[o];if(s===void 0){let u=this.defaultLayout,f=0;this.usesPrefixDiscriminator&&(f=i.layout.span),n=this.makeDestinationObject(),n[i.property]=o,n[u.property]=u.decode(e,t+f)}else n=s.decode(e,t);return n}encode(e,t,n=0){let i=this.getSourceVariant(e);if(i===void 0){let o=this.discriminator,s=this.defaultLayout,u=0;return this.usesPrefixDiscriminator&&(u=o.layout.span),o.encode(e[o.property],t,n),u+s.encode(e[s.property],t,n+u)}return i.encode(e,t,n)}addVariant(e,t,n){let i=new ho(this,e,t,n);return this.registry[e]=i,i}getVariant(e,t=0){let n;return e instanceof Uint8Array?n=this.discriminator.decode(e,t):n=e,this.registry[n]}};U.Union=ui;var ho=class extends me{constructor(e,t,n,i){if(!(e instanceof ui))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&i===void 0&&(i=n,n=null),n){if(!(n instanceof me))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=n.span&&n.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof i!="string")throw new TypeError("variant must have a String property")}let o=e.span;0>e.span&&(o=n?n.span:0,0<=o&&e.usesPrefixDiscriminator&&(o+=e.discriminator.layout.span)),super(o,i),this.union=e,this.variant=t,this.layout=n||null}getSpan(e,t=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let i=0;return this.layout&&(i=this.layout.getSpan(e,t+n)),n+i}decode(e,t=0){let n=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let i=0;return this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,t+i):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(e,t,n=0){let i=0;if(this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,n);let o=i;if(this.layout&&(this.layout.encode(e[this.property],t,n+i),o+=this.layout.getSpan(t,n+i),0<=this.union.span&&o>this.union.span))throw new Error("encoded variant overruns containing union");return o}fromArray(e){if(this.layout)return this.layout.fromArray(e)}};U.VariantLayout=ho;function Mn(r){return 0>r&&(r+=4294967296),r}var fi=class extends me{constructor(e,t,n){if(!(e instanceof Mt||e instanceof zt))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof t=="string"&&n===void 0&&(n=t,t=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,n),this.word=e,this.msb=!!t,this.fields=[];let i=0;this._packedSetValue=function(o){return i=Mn(o),this},this._packedGetValue=function(){return i}}decode(e,t=0){let n=this.makeDestinationObject(),i=this.word.decode(e,t);this._packedSetValue(i);for(let o of this.fields)o.property!==void 0&&(n[o.property]=o.decode(e));return n}encode(e,t,n=0){let i=this.word.decode(t,n);this._packedSetValue(i);for(let o of this.fields)if(o.property!==void 0){let s=e[o.property];s!==void 0&&o.encode(s)}return this.word.encode(this._packedGetValue(),t,n)}addField(e,t){let n=new li(this,e,t);return this.fields.push(n),n}addBoolean(e){let t=new po(this,e);return this.fields.push(t),t}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(let t of this.fields)if(t.property===e)return t}};U.BitStructure=fi;var li=class{constructor(e,t,n){if(!(e instanceof fi))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");let i=8*e.span,o=e.fields.reduce((s,u)=>s+u.bits,0);if(t+o>i)throw new Error("bits too long for span remainder ("+(i-o)+" of "+i+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,t===32&&(this.valueMask=4294967295),this.start=o,this.container.msb&&(this.start=i-o-t),this.wordMask=Mn(this.valueMask<<this.start),this.property=n}decode(e,t){let n=this.container._packedGetValue();return Mn(n&this.wordMask)>>>this.start}encode(e){if(typeof e!="number"||!Number.isInteger(e)||e!==Mn(e&this.valueMask))throw new TypeError(ba("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);let t=this.container._packedGetValue(),n=Mn(e<<this.start);this.container._packedSetValue(Mn(t&~this.wordMask)|n)}};U.BitField=li;var po=class extends li{constructor(e,t){super(e,1,t)}decode(e,t){return!!super.decode(e,t)}encode(e){typeof e=="boolean"&&(e=+e),super.encode(e)}};U.Boolean=po;var go=class extends me{constructor(e,t){if(!(e instanceof bt&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof bt||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t=0){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),pe(e).slice(t,t+n)}encode(e,t,n){let i=this.length;if(this.length instanceof bt&&(i=e.length),!(e instanceof Uint8Array&&i===e.length))throw new TypeError(ba("Blob.encode",this)+" requires (length "+i+") Uint8Array as src");if(n+i>t.length)throw new RangeError("encoding overruns Uint8Array");let o=pe(e);return pe(t).write(o.toString("hex"),n,i,"hex"),this.length instanceof bt&&this.length.encode(i,t,n),i}};U.Blob=go;var yo=class extends me{constructor(e){super(-1,e)}getSpan(e,t=0){Un(e);let n=t;for(;n<e.length&&e[n]!==0;)n+=1;return 1+n-t}decode(e,t=0){let n=this.getSpan(e,t);return pe(e).slice(t,t+n-1).toString("utf-8")}encode(e,t,n=0){typeof e!="string"&&(e=String(e));let i=wa.Buffer.from(e,"utf8"),o=i.length;if(n+o>t.length)throw new RangeError("encoding overruns Buffer");let s=pe(t);return i.copy(s,n),s[n+o]=0,o+1}};U.CString=yo;var mo=class extends me{constructor(e,t){if(typeof e=="string"&&t===void 0&&(t=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t=0){return Un(e),e.length-t}decode(e,t=0){let n=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return pe(e).slice(t,t+n).toString("utf-8")}encode(e,t,n=0){typeof e!="string"&&(e=String(e));let i=wa.Buffer.from(e,"utf8"),o=i.length;if(0<=this.maxSpan&&this.maxSpan<o)throw new RangeError("text length exceeds maxSpan");if(n+o>t.length)throw new RangeError("encoding overruns Buffer");return i.copy(pe(t),n),o}};U.UTF8=mo;var _o=class extends me{constructor(e,t){super(0,t),this.value=e}decode(e,t){return this.value}encode(e,t,n){return 0}};U.Constant=_o;U.greedy=((r,e)=>new to(r,e));U.offset=((r,e,t)=>new ai(r,e,t));U.u8=(r=>new Mt(1,r));U.u16=(r=>new Mt(2,r));U.u24=(r=>new Mt(3,r));U.u32=(r=>new Mt(4,r));U.u40=(r=>new Mt(5,r));U.u48=(r=>new Mt(6,r));U.nu64=(r=>new ro(r));U.u16be=(r=>new zt(2,r));U.u24be=(r=>new zt(3,r));U.u32be=(r=>new zt(4,r));U.u40be=(r=>new zt(5,r));U.u48be=(r=>new zt(6,r));U.nu64be=(r=>new no(r));U.s8=(r=>new br(1,r));U.s16=(r=>new br(2,r));U.s24=(r=>new br(3,r));U.s32=(r=>new br(4,r));U.s40=(r=>new br(5,r));U.s48=(r=>new br(6,r));U.ns64=(r=>new io(r));U.s16be=(r=>new Dr(2,r));U.s24be=(r=>new Dr(3,r));U.s32be=(r=>new Dr(4,r));U.s40be=(r=>new Dr(5,r));U.s48be=(r=>new Dr(6,r));U.ns64be=(r=>new oo(r));U.f32=(r=>new so(r));U.f32be=(r=>new ao(r));U.f64=(r=>new co(r));U.f64be=(r=>new uo(r));U.struct=((r,e,t)=>new lo(r,e,t));U.bits=((r,e,t)=>new fi(r,e,t));U.seq=((r,e,t)=>new fo(r,e,t));U.union=((r,e,t)=>new ui(r,e,t));U.unionLayoutDiscriminator=((r,e)=>new Pn(r,e));U.blob=((r,e)=>new go(r,e));U.cstr=(r=>new yo(r));U.utf8=((r,e)=>new mo(r,e));U.constant=((r,e)=>new _o(r,e))});function pi(){if(!Ao&&(Ao=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Ao))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ao(km)}var Ao,km,Ba=It(()=>{km=new Uint8Array(16)});var Pf,Uf=It(()=>{Pf=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function Bm(r){return typeof r=="string"&&Pf.test(r)}var Fr,gi=It(()=>{Uf();Fr=Bm});function Tm(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(_t[r[e+0]]+_t[r[e+1]]+_t[r[e+2]]+_t[r[e+3]]+"-"+_t[r[e+4]]+_t[r[e+5]]+"-"+_t[r[e+6]]+_t[r[e+7]]+"-"+_t[r[e+8]]+_t[r[e+9]]+"-"+_t[r[e+10]]+_t[r[e+11]]+_t[r[e+12]]+_t[r[e+13]]+_t[r[e+14]]+_t[r[e+15]]).toLowerCase();if(!Fr(t))throw TypeError("Stringified UUID is invalid");return t}var _t,xo,Kr,yi=It(()=>{gi();_t=[];for(xo=0;xo<256;++xo)_t.push((xo+256).toString(16).substr(1));Kr=Tm});function Lm(r,e,t){var n=e&&t||0,i=e||new Array(16);r=r||{};var o=r.node||Df,s=r.clockseq!==void 0?r.clockseq:Ta;if(o==null||s==null){var u=r.random||(r.rng||pi)();o==null&&(o=Df=[u[0]|1,u[1],u[2],u[3],u[4],u[5]]),s==null&&(s=Ta=(u[6]<<8|u[7])&16383)}var f=r.msecs!==void 0?r.msecs:Date.now(),w=r.nsecs!==void 0?r.nsecs:Ca+1,R=f-La+(w-Ca)/1e4;if(R<0&&r.clockseq===void 0&&(s=s+1&16383),(R<0||f>La)&&r.nsecs===void 0&&(w=0),w>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");La=f,Ca=w,Ta=s,f+=122192928e5;var S=((f&268435455)*1e4+w)%4294967296;i[n++]=S>>>24&255,i[n++]=S>>>16&255,i[n++]=S>>>8&255,i[n++]=S&255;var I=f/4294967296*1e4&268435455;i[n++]=I>>>8&255,i[n++]=I&255,i[n++]=I>>>24&15|16,i[n++]=I>>>16&255,i[n++]=s>>>8|128,i[n++]=s&255;for(var x=0;x<6;++x)i[n+x]=o[x];return e||Kr(i)}var Df,Ta,La,Ca,zf,Ff=It(()=>{Ba();yi();La=0,Ca=0;zf=Lm});function Cm(r){if(!Fr(r))throw TypeError("Invalid UUID");var e,t=new Uint8Array(16);return t[0]=(e=parseInt(r.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(r.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(r.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(r.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(r.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}var vo,Ma=It(()=>{gi();vo=Cm});function Mm(r){r=unescape(encodeURIComponent(r));for(var e=[],t=0;t<r.length;++t)e.push(r.charCodeAt(t));return e}function Io(r,e,t){function n(i,o,s,u){if(typeof i=="string"&&(i=Mm(i)),typeof o=="string"&&(o=vo(o)),o.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var f=new Uint8Array(16+i.length);if(f.set(o),f.set(i,o.length),f=t(f),f[6]=f[6]&15|e,f[8]=f[8]&63|128,s){u=u||0;for(var w=0;w<16;++w)s[u+w]=f[w];return s}return Kr(f)}try{n.name=r}catch{}return n.DNS=Pm,n.URL=Um,n}var Pm,Um,Pa=It(()=>{yi();Ma();Pm="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Um="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function Dm(r){if(typeof r=="string"){var e=unescape(encodeURIComponent(r));r=new Uint8Array(e.length);for(var t=0;t<e.length;++t)r[t]=e.charCodeAt(t)}return zm(Fm(Km(r),r.length*8))}function zm(r){for(var e=[],t=r.length*32,n="0123456789abcdef",i=0;i<t;i+=8){var o=r[i>>5]>>>i%32&255,s=parseInt(n.charAt(o>>>4&15)+n.charAt(o&15),16);e.push(s)}return e}function Kf(r){return(r+64>>>9<<4)+14+1}function Fm(r,e){r[e>>5]|=128<<e%32,r[Kf(e)-1]=e;for(var t=1732584193,n=-271733879,i=-1732584194,o=271733878,s=0;s<r.length;s+=16){var u=t,f=n,w=i,R=o;t=Rt(t,n,i,o,r[s],7,-680876936),o=Rt(o,t,n,i,r[s+1],12,-389564586),i=Rt(i,o,t,n,r[s+2],17,606105819),n=Rt(n,i,o,t,r[s+3],22,-1044525330),t=Rt(t,n,i,o,r[s+4],7,-176418897),o=Rt(o,t,n,i,r[s+5],12,1200080426),i=Rt(i,o,t,n,r[s+6],17,-1473231341),n=Rt(n,i,o,t,r[s+7],22,-45705983),t=Rt(t,n,i,o,r[s+8],7,1770035416),o=Rt(o,t,n,i,r[s+9],12,-1958414417),i=Rt(i,o,t,n,r[s+10],17,-42063),n=Rt(n,i,o,t,r[s+11],22,-1990404162),t=Rt(t,n,i,o,r[s+12],7,1804603682),o=Rt(o,t,n,i,r[s+13],12,-40341101),i=Rt(i,o,t,n,r[s+14],17,-1502002290),n=Rt(n,i,o,t,r[s+15],22,1236535329),t=St(t,n,i,o,r[s+1],5,-165796510),o=St(o,t,n,i,r[s+6],9,-1069501632),i=St(i,o,t,n,r[s+11],14,643717713),n=St(n,i,o,t,r[s],20,-373897302),t=St(t,n,i,o,r[s+5],5,-701558691),o=St(o,t,n,i,r[s+10],9,38016083),i=St(i,o,t,n,r[s+15],14,-660478335),n=St(n,i,o,t,r[s+4],20,-405537848),t=St(t,n,i,o,r[s+9],5,568446438),o=St(o,t,n,i,r[s+14],9,-1019803690),i=St(i,o,t,n,r[s+3],14,-187363961),n=St(n,i,o,t,r[s+8],20,1163531501),t=St(t,n,i,o,r[s+13],5,-1444681467),o=St(o,t,n,i,r[s+2],9,-51403784),i=St(i,o,t,n,r[s+7],14,1735328473),n=St(n,i,o,t,r[s+12],20,-1926607734),t=At(t,n,i,o,r[s+5],4,-378558),o=At(o,t,n,i,r[s+8],11,-2022574463),i=At(i,o,t,n,r[s+11],16,1839030562),n=At(n,i,o,t,r[s+14],23,-35309556),t=At(t,n,i,o,r[s+1],4,-1530992060),o=At(o,t,n,i,r[s+4],11,1272893353),i=At(i,o,t,n,r[s+7],16,-155497632),n=At(n,i,o,t,r[s+10],23,-1094730640),t=At(t,n,i,o,r[s+13],4,681279174),o=At(o,t,n,i,r[s],11,-358537222),i=At(i,o,t,n,r[s+3],16,-722521979),n=At(n,i,o,t,r[s+6],23,76029189),t=At(t,n,i,o,r[s+9],4,-640364487),o=At(o,t,n,i,r[s+12],11,-421815835),i=At(i,o,t,n,r[s+15],16,530742520),n=At(n,i,o,t,r[s+2],23,-995338651),t=xt(t,n,i,o,r[s],6,-198630844),o=xt(o,t,n,i,r[s+7],10,1126891415),i=xt(i,o,t,n,r[s+14],15,-1416354905),n=xt(n,i,o,t,r[s+5],21,-57434055),t=xt(t,n,i,o,r[s+12],6,1700485571),o=xt(o,t,n,i,r[s+3],10,-1894986606),i=xt(i,o,t,n,r[s+10],15,-1051523),n=xt(n,i,o,t,r[s+1],21,-2054922799),t=xt(t,n,i,o,r[s+8],6,1873313359),o=xt(o,t,n,i,r[s+15],10,-30611744),i=xt(i,o,t,n,r[s+6],15,-1560198380),n=xt(n,i,o,t,r[s+13],21,1309151649),t=xt(t,n,i,o,r[s+4],6,-145523070),o=xt(o,t,n,i,r[s+11],10,-1120210379),i=xt(i,o,t,n,r[s+2],15,718787259),n=xt(n,i,o,t,r[s+9],21,-343485551),t=qr(t,u),n=qr(n,f),i=qr(i,w),o=qr(o,R)}return[t,n,i,o]}function Km(r){if(r.length===0)return[];for(var e=r.length*8,t=new Uint32Array(Kf(e)),n=0;n<e;n+=8)t[n>>5]|=(r[n/8]&255)<<n%32;return t}function qr(r,e){var t=(r&65535)+(e&65535),n=(r>>16)+(e>>16)+(t>>16);return n<<16|t&65535}function qm(r,e){return r<<e|r>>>32-e}function Oo(r,e,t,n,i,o){return qr(qm(qr(qr(e,r),qr(n,o)),i),t)}function Rt(r,e,t,n,i,o,s){return Oo(e&t|~e&n,r,e,i,o,s)}function St(r,e,t,n,i,o,s){return Oo(e&n|t&~n,r,e,i,o,s)}function At(r,e,t,n,i,o,s){return Oo(e^t^n,r,e,i,o,s)}function xt(r,e,t,n,i,o,s){return Oo(t^(e|~n),r,e,i,o,s)}var qf,Hf=It(()=>{qf=Dm});var Hm,Vf,$f=It(()=>{Pa();Hf();Hm=Io("v3",48,qf),Vf=Hm});function Vm(r,e,t){r=r||{};var n=r.random||(r.rng||pi)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(var i=0;i<16;++i)e[t+i]=n[i];return e}return Kr(n)}var Wf,Gf=It(()=>{Ba();yi();Wf=Vm});function $m(r,e,t,n){switch(r){case 0:return e&t^~e&n;case 1:return e^t^n;case 2:return e&t^e&n^t&n;case 3:return e^t^n}}function Ua(r,e){return r<<e|r>>>32-e}function Wm(r){var e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var i=0;i<n.length;++i)r.push(n.charCodeAt(i))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var o=r.length/4+2,s=Math.ceil(o/16),u=new Array(s),f=0;f<s;++f){for(var w=new Uint32Array(16),R=0;R<16;++R)w[R]=r[f*64+R*4]<<24|r[f*64+R*4+1]<<16|r[f*64+R*4+2]<<8|r[f*64+R*4+3];u[f]=w}u[s-1][14]=(r.length-1)*8/Math.pow(2,32),u[s-1][14]=Math.floor(u[s-1][14]),u[s-1][15]=(r.length-1)*8&4294967295;for(var S=0;S<s;++S){for(var I=new Uint32Array(80),x=0;x<16;++x)I[x]=u[S][x];for(var k=16;k<80;++k)I[k]=Ua(I[k-3]^I[k-8]^I[k-14]^I[k-16],1);for(var T=t[0],P=t[1],C=t[2],L=t[3],F=t[4],V=0;V<80;++V){var Q=Math.floor(V/20),j=Ua(T,5)+$m(Q,P,C,L)+F+e[Q]+I[V]>>>0;F=L,L=C,C=Ua(P,30)>>>0,P=T,T=j}t[0]=t[0]+T>>>0,t[1]=t[1]+P>>>0,t[2]=t[2]+C>>>0,t[3]=t[3]+L>>>0,t[4]=t[4]+F>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var Yf,Xf=It(()=>{Yf=Wm});var Gm,jf,Zf=It(()=>{Pa();Xf();Gm=Io("v5",80,Yf),jf=Gm});var Jf,Qf=It(()=>{Jf="00000000-0000-0000-0000-000000000000"});function Ym(r){if(!Fr(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}var el,tl=It(()=>{gi();el=Ym});var Da={};Mh(Da,{NIL:()=>Jf,parse:()=>vo,stringify:()=>Kr,v1:()=>zf,v3:()=>Vf,v4:()=>Wf,v5:()=>jf,validate:()=>Fr,version:()=>el});var za=It(()=>{Ff();$f();Gf();Zf();Qf();tl();gi();yi();Ma()});var nl=Ot((yE,rl)=>{"use strict";var Xm=(za(),Yc(Da)).v4,jm=function(r,e,t,n){if(typeof r!="string")throw new TypeError(r+" must be a string");n=n||{};let i=typeof n.version=="number"?n.version:2;if(i!==1&&i!==2)throw new TypeError(i+" must be 1 or 2");let o={method:r};if(i===2&&(o.jsonrpc="2.0"),e){if(typeof e!="object"&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");o.params=e}if(typeof t>"u"){let s=typeof n.generator=="function"?n.generator:function(){return Xm()};o.id=s(o,n)}else i===2&&t===null?n.notificationIdNull&&(o.id=null):o.id=t;return o};rl.exports=jm});var ol=Ot((mE,il)=>{"use strict";var Zm=(za(),Yc(Da)).v4,Jm=nl(),mi=function(r,e){if(!(this instanceof mi))return new mi(r,e);e||(e={}),this.options={reviver:typeof e.reviver<"u"?e.reviver:null,replacer:typeof e.replacer<"u"?e.replacer:null,generator:typeof e.generator<"u"?e.generator:function(){return Zm()},version:typeof e.version<"u"?e.version:2,notificationIdNull:typeof e.notificationIdNull=="boolean"?e.notificationIdNull:!1},this.callServer=r};il.exports=mi;mi.prototype.request=function(r,e,t,n){let i=this,o=null,s=Array.isArray(r)&&typeof e=="function";if(this.options.version===1&&s)throw new TypeError("JSON-RPC 1.0 does not support batching");if(s||!s&&r&&typeof r=="object"&&typeof e=="function")n=e,o=r;else{typeof t=="function"&&(n=t,t=void 0);let w=typeof n=="function";try{o=Jm(r,e,t,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(R){if(w)return n(R);throw R}if(!w)return o}let f;try{f=JSON.stringify(o,this.options.replacer)}catch(w){return n(w)}return this.callServer(f,function(w,R){i._parseResponse(w,R,n)}),o};mi.prototype._parseResponse=function(r,e,t){if(r){t(r);return}if(!e)return t();let n;try{n=JSON.parse(e,this.options.reviver)}catch(i){return t(i)}if(t.length===3)if(Array.isArray(n)){let i=function(s){return typeof s.error<"u"},o=function(s){return!i(s)};return t(null,n.filter(i),n.filter(o))}else return t(null,n.error,n.result);t(null,n)}});var al=Ot((_E,Fa)=>{"use strict";var Qm=Object.prototype.hasOwnProperty,Tt="~";function _i(){}Object.create&&(_i.prototype=Object.create(null),new _i().__proto__||(Tt=!1));function e_(r,e,t){this.fn=r,this.context=e,this.once=t||!1}function sl(r,e,t,n,i){if(typeof t!="function")throw new TypeError("The listener must be a function");var o=new e_(t,n||r,i),s=Tt?Tt+e:e;return r._events[s]?r._events[s].fn?r._events[s]=[r._events[s],o]:r._events[s].push(o):(r._events[s]=o,r._eventsCount++),r}function No(r,e){--r._eventsCount===0?r._events=new _i:delete r._events[e]}function vt(){this._events=new _i,this._eventsCount=0}vt.prototype.eventNames=function(){var e=[],t,n;if(this._eventsCount===0)return e;for(n in t=this._events)Qm.call(t,n)&&e.push(Tt?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};vt.prototype.listeners=function(e){var t=Tt?Tt+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++)s[i]=n[i].fn;return s};vt.prototype.listenerCount=function(e){var t=Tt?Tt+e:e,n=this._events[t];return n?n.fn?1:n.length:0};vt.prototype.emit=function(e,t,n,i,o,s){var u=Tt?Tt+e:e;if(!this._events[u])return!1;var f=this._events[u],w=arguments.length,R,S;if(f.fn){switch(f.once&&this.removeListener(e,f.fn,void 0,!0),w){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,t),!0;case 3:return f.fn.call(f.context,t,n),!0;case 4:return f.fn.call(f.context,t,n,i),!0;case 5:return f.fn.call(f.context,t,n,i,o),!0;case 6:return f.fn.call(f.context,t,n,i,o,s),!0}for(S=1,R=new Array(w-1);S<w;S++)R[S-1]=arguments[S];f.fn.apply(f.context,R)}else{var I=f.length,x;for(S=0;S<I;S++)switch(f[S].once&&this.removeListener(e,f[S].fn,void 0,!0),w){case 1:f[S].fn.call(f[S].context);break;case 2:f[S].fn.call(f[S].context,t);break;case 3:f[S].fn.call(f[S].context,t,n);break;case 4:f[S].fn.call(f[S].context,t,n,i);break;default:if(!R)for(x=1,R=new Array(w-1);x<w;x++)R[x-1]=arguments[x];f[S].fn.apply(f[S].context,R)}}return!0};vt.prototype.on=function(e,t,n){return sl(this,e,t,n,!1)};vt.prototype.once=function(e,t,n){return sl(this,e,t,n,!0)};vt.prototype.removeListener=function(e,t,n,i){var o=Tt?Tt+e:e;if(!this._events[o])return this;if(!t)return No(this,o),this;var s=this._events[o];if(s.fn)s.fn===t&&(!i||s.once)&&(!n||s.context===n)&&No(this,o);else{for(var u=0,f=[],w=s.length;u<w;u++)(s[u].fn!==t||i&&!s[u].once||n&&s[u].context!==n)&&f.push(s[u]);f.length?this._events[o]=f.length===1?f[0]:f:No(this,o)}return this};vt.prototype.removeAllListeners=function(e){var t;return e?(t=Tt?Tt+e:e,this._events[t]&&No(this,t)):(this._events=new _i,this._eventsCount=0),this};vt.prototype.off=vt.prototype.removeListener;vt.prototype.addListener=vt.prototype.on;vt.prefixed=Tt;vt.EventEmitter=vt;typeof Fa<"u"&&(Fa.exports=vt)});var ch=Ot(Yn=>{"use strict";Object.defineProperty(Yn,"__esModule",{value:!0});var jo;function hw(r){{let e=Buffer.from(r);e.reverse();let t=e.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}return jo.toBigInt(r,!1)}Yn.toBigIntLE=hw;function dw(r){{let e=r.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}return jo.toBigInt(r,!0)}Yn.toBigIntBE=dw;function pw(r,e){{let t=r.toString(16),n=Buffer.from(t.padStart(e*2,"0").slice(0,e*2),"hex");return n.reverse(),n}return jo.fromBigInt(r,Buffer.allocUnsafe(e),!1)}Yn.toBufferLE=pw;function gw(r,e){{let t=r.toString(16);return Buffer.from(t.padStart(e*2,"0").slice(0,e*2),"hex")}return jo.fromBigInt(r,Buffer.allocUnsafe(e),!0)}Yn.toBufferBE=gw});var ie=ut(vn());var tn=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function fr(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function Or(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function gt(r,...e){if(!fr(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function Mi(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Or(r.outputLen),Or(r.blockLen)}function lr(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function Pi(r,e){gt(r);let t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function yu(r){return new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4))}function Vt(...r){for(let e=0;e<r.length;e++)r[e].fill(0)}function Ui(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function Zt(r,e){return r<<32-e|r>>>e}var pd=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function gd(r){return r<<24&4278190080|r<<8&16711680|r>>>8&65280|r>>>24&255}function yd(r){for(let e=0;e<r.length;e++)r[e]=gd(r[e]);return r}var zs=pd?r=>r:yd,mu=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",md=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function $t(r){if(gt(r),mu)return r.toHex();let e="";for(let t=0;t<r.length;t++)e+=md[r[t]];return e}var ur={_0:48,_9:57,A:65,F:70,a:97,f:102};function gu(r){if(r>=ur._0&&r<=ur._9)return r-ur._0;if(r>=ur.A&&r<=ur.F)return r-(ur.A-10);if(r>=ur.a&&r<=ur.f)return r-(ur.a-10)}function rn(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);if(mu)return Uint8Array.fromHex(r);let e=r.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);let n=new Uint8Array(t);for(let i=0,o=0;i<t;i++,o+=2){let s=gu(r.charCodeAt(o)),u=gu(r.charCodeAt(o+1));if(s===void 0||u===void 0){let f=r[o]+r[o+1];throw new Error('hex string expected, got non-hex character "'+f+'" at index '+o)}n[i]=s*16+u}return n}function Fs(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}function nn(r){return typeof r=="string"&&(r=Fs(r)),gt(r),r}function Nt(...r){let e=0;for(let n=0;n<r.length;n++){let i=r[n];gt(i),e+=i.length}let t=new Uint8Array(e);for(let n=0,i=0;n<r.length;n++){let o=r[n];t.set(o,i),i+=o.length}return t}var Nr=class{};function Jn(r){let e=n=>r().update(nn(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function In(r=32){if(tn&&typeof tn.getRandomValues=="function")return tn.getRandomValues(new Uint8Array(r));if(tn&&typeof tn.randomBytes=="function")return Uint8Array.from(tn.randomBytes(r));throw new Error("crypto.getRandomValues must be defined")}function _d(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(t>>i&o),u=Number(t&o),f=n?4:0,w=n?0:4;r.setUint32(e+f,s,n),r.setUint32(e+w,u,n)}function _u(r,e,t){return r&e^~r&t}function wu(r,e,t){return r&e^r&t^e&t}var Qn=class extends Nr{constructor(e,t,n,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(e),this.view=Ui(this.buffer)}update(e){lr(this),e=nn(e),gt(e);let{view:t,buffer:n,blockLen:i}=this,o=e.length;for(let s=0;s<o;){let u=Math.min(i-this.pos,o-s);if(u===i){let f=Ui(e);for(;i<=o-s;s+=i)this.process(f,s);continue}n.set(e.subarray(s,s+u),this.pos),this.pos+=u,s+=u,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){lr(this),Pi(e,this),this.finished=!0;let{buffer:t,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;t[s++]=128,Vt(this.buffer.subarray(s)),this.padOffset>i-s&&(this.process(n,0),s=0);for(let S=s;S<i;S++)t[S]=0;_d(n,i-8,BigInt(this.length*8),o),this.process(n,0);let u=Ui(e),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let w=f/4,R=this.get();if(w>R.length)throw new Error("_sha2: outputLen bigger than state");for(let S=0;S<w;S++)u.setUint32(4*S,R[S],o)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:n,length:i,finished:o,destroyed:s,pos:u}=this;return e.destroyed=s,e.finished=o,e.length=i,e.pos=u,i%t&&e.buffer.set(n),e}clone(){return this._cloneInto()}},hr=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);var yt=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]);var Di=BigInt(4294967295),bu=BigInt(32);function wd(r,e=!1){return e?{h:Number(r&Di),l:Number(r>>bu&Di)}:{h:Number(r>>bu&Di)|0,l:Number(r&Di)|0}}function zi(r,e=!1){let t=r.length,n=new Uint32Array(t),i=new Uint32Array(t);for(let o=0;o<t;o++){let{h:s,l:u}=wd(r[o],e);[n[o],i[o]]=[s,u]}return[n,i]}var Ks=(r,e,t)=>r>>>t,qs=(r,e,t)=>r<<32-t|e>>>t,on=(r,e,t)=>r>>>t|e<<32-t,sn=(r,e,t)=>r<<32-t|e>>>t,ei=(r,e,t)=>r<<64-t|e>>>t-32,ti=(r,e,t)=>r>>>t-32|e<<64-t;var Eu=(r,e,t)=>r<<t|e>>>32-t,Ru=(r,e,t)=>e<<t|r>>>32-t,Su=(r,e,t)=>e<<t-32|r>>>64-t,Au=(r,e,t)=>r<<t-32|e>>>64-t;function nr(r,e,t,n){let i=(e>>>0)+(n>>>0);return{h:r+t+(i/2**32|0)|0,l:i|0}}var xu=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),vu=(r,e,t,n)=>e+t+n+(r/2**32|0)|0,Iu=(r,e,t,n)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0),Ou=(r,e,t,n,i)=>e+t+n+i+(r/2**32|0)|0,Nu=(r,e,t,n,i)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0)+(i>>>0),ku=(r,e,t,n,i,o)=>e+t+n+i+o+(r/2**32|0)|0;var Ed=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),kr=new Uint32Array(64),Fi=class extends Qn{constructor(e=32){super(64,e,8,!1),this.A=hr[0]|0,this.B=hr[1]|0,this.C=hr[2]|0,this.D=hr[3]|0,this.E=hr[4]|0,this.F=hr[5]|0,this.G=hr[6]|0,this.H=hr[7]|0}get(){let{A:e,B:t,C:n,D:i,E:o,F:s,G:u,H:f}=this;return[e,t,n,i,o,s,u,f]}set(e,t,n,i,o,s,u,f){this.A=e|0,this.B=t|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=u|0,this.H=f|0}process(e,t){for(let S=0;S<16;S++,t+=4)kr[S]=e.getUint32(t,!1);for(let S=16;S<64;S++){let I=kr[S-15],x=kr[S-2],k=Zt(I,7)^Zt(I,18)^I>>>3,T=Zt(x,17)^Zt(x,19)^x>>>10;kr[S]=T+kr[S-7]+k+kr[S-16]|0}let{A:n,B:i,C:o,D:s,E:u,F:f,G:w,H:R}=this;for(let S=0;S<64;S++){let I=Zt(u,6)^Zt(u,11)^Zt(u,25),x=R+I+_u(u,f,w)+Ed[S]+kr[S]|0,T=(Zt(n,2)^Zt(n,13)^Zt(n,22))+wu(n,i,o)|0;R=w,w=f,f=u,u=s+x|0,s=o,o=i,i=n,n=x+T|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,u=u+this.E|0,f=f+this.F|0,w=w+this.G|0,R=R+this.H|0,this.set(n,i,o,s,u,f,w,R)}roundClean(){Vt(kr)}destroy(){this.set(0,0,0,0,0,0,0,0),Vt(this.buffer)}};var Bu=zi(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),Rd=Bu[0],Sd=Bu[1],Br=new Uint32Array(80),Tr=new Uint32Array(80),Hs=class extends Qn{constructor(e=64){super(128,e,16,!1),this.Ah=yt[0]|0,this.Al=yt[1]|0,this.Bh=yt[2]|0,this.Bl=yt[3]|0,this.Ch=yt[4]|0,this.Cl=yt[5]|0,this.Dh=yt[6]|0,this.Dl=yt[7]|0,this.Eh=yt[8]|0,this.El=yt[9]|0,this.Fh=yt[10]|0,this.Fl=yt[11]|0,this.Gh=yt[12]|0,this.Gl=yt[13]|0,this.Hh=yt[14]|0,this.Hl=yt[15]|0}get(){let{Ah:e,Al:t,Bh:n,Bl:i,Ch:o,Cl:s,Dh:u,Dl:f,Eh:w,El:R,Fh:S,Fl:I,Gh:x,Gl:k,Hh:T,Hl:P}=this;return[e,t,n,i,o,s,u,f,w,R,S,I,x,k,T,P]}set(e,t,n,i,o,s,u,f,w,R,S,I,x,k,T,P){this.Ah=e|0,this.Al=t|0,this.Bh=n|0,this.Bl=i|0,this.Ch=o|0,this.Cl=s|0,this.Dh=u|0,this.Dl=f|0,this.Eh=w|0,this.El=R|0,this.Fh=S|0,this.Fl=I|0,this.Gh=x|0,this.Gl=k|0,this.Hh=T|0,this.Hl=P|0}process(e,t){for(let F=0;F<16;F++,t+=4)Br[F]=e.getUint32(t),Tr[F]=e.getUint32(t+=4);for(let F=16;F<80;F++){let V=Br[F-15]|0,Q=Tr[F-15]|0,j=on(V,Q,1)^on(V,Q,8)^Ks(V,Q,7),ee=sn(V,Q,1)^sn(V,Q,8)^qs(V,Q,7),b=Br[F-2]|0,_=Tr[F-2]|0,v=on(b,_,19)^ei(b,_,61)^Ks(b,_,6),B=sn(b,_,19)^ti(b,_,61)^qs(b,_,6),N=Iu(ee,B,Tr[F-7],Tr[F-16]),p=Ou(N,j,v,Br[F-7],Br[F-16]);Br[F]=p|0,Tr[F]=N|0}let{Ah:n,Al:i,Bh:o,Bl:s,Ch:u,Cl:f,Dh:w,Dl:R,Eh:S,El:I,Fh:x,Fl:k,Gh:T,Gl:P,Hh:C,Hl:L}=this;for(let F=0;F<80;F++){let V=on(S,I,14)^on(S,I,18)^ei(S,I,41),Q=sn(S,I,14)^sn(S,I,18)^ti(S,I,41),j=S&x^~S&T,ee=I&k^~I&P,b=Nu(L,Q,ee,Sd[F],Tr[F]),_=ku(b,C,V,j,Rd[F],Br[F]),v=b|0,B=on(n,i,28)^ei(n,i,34)^ei(n,i,39),N=sn(n,i,28)^ti(n,i,34)^ti(n,i,39),p=n&o^n&u^o&u,a=i&s^i&f^s&f;C=T|0,L=P|0,T=x|0,P=k|0,x=S|0,k=I|0,{h:S,l:I}=nr(w|0,R|0,_|0,v|0),w=u|0,R=f|0,u=o|0,f=s|0,o=n|0,s=i|0;let c=xu(v,N,a);n=vu(c,_,B,p),i=c|0}({h:n,l:i}=nr(this.Ah|0,this.Al|0,n|0,i|0)),{h:o,l:s}=nr(this.Bh|0,this.Bl|0,o|0,s|0),{h:u,l:f}=nr(this.Ch|0,this.Cl|0,u|0,f|0),{h:w,l:R}=nr(this.Dh|0,this.Dl|0,w|0,R|0),{h:S,l:I}=nr(this.Eh|0,this.El|0,S|0,I|0),{h:x,l:k}=nr(this.Fh|0,this.Fl|0,x|0,k|0),{h:T,l:P}=nr(this.Gh|0,this.Gl|0,T|0,P|0),{h:C,l:L}=nr(this.Hh|0,this.Hl|0,C|0,L|0),this.set(n,i,o,s,u,f,w,R,S,I,x,k,T,P,C,L)}roundClean(){Vt(Br,Tr)}destroy(){Vt(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};var Ki=Jn(()=>new Fi);var Tu=Jn(()=>new Hs);var Ws=BigInt(0),$s=BigInt(1);function dr(r,e=""){if(typeof r!="boolean"){let t=e&&`"${e}"`;throw new Error(t+"expected boolean, got type="+typeof r)}return r}function Ut(r,e,t=""){let n=fr(r),i=r?.length,o=e!==void 0;if(!n||o&&i!==e){let s=t&&`"${t}" `,u=o?` of length ${e}`:"",f=n?`length=${i}`:`type=${typeof r}`;throw new Error(s+"expected Uint8Array"+u+", got "+f)}return r}function ri(r){let e=r.toString(16);return e.length&1?"0"+e:e}function Lu(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?Ws:BigInt("0x"+r)}function On(r){return Lu($t(r))}function pr(r){return gt(r),Lu($t(Uint8Array.from(r).reverse()))}function qi(r,e){return rn(r.toString(16).padStart(e*2,"0"))}function Gs(r,e){return qi(r,e).reverse()}function be(r,e,t){let n;if(typeof e=="string")try{n=rn(e)}catch(o){throw new Error(r+" must be hex string or Uint8Array, cause: "+o)}else if(fr(e))n=Uint8Array.from(e);else throw new Error(r+" must be hex string or Uint8Array");let i=n.length;if(typeof t=="number"&&i!==t)throw new Error(r+" of length "+t+" expected, got "+i);return n}function Cu(r,e){if(r.length!==e.length)return!1;let t=0;for(let n=0;n<r.length;n++)t|=r[n]^e[n];return t===0}function Ys(r){return Uint8Array.from(r)}var Vs=r=>typeof r=="bigint"&&Ws<=r;function Mu(r,e,t){return Vs(r)&&Vs(e)&&Vs(t)&&e<=r&&r<t}function ni(r,e,t,n){if(!Mu(e,t,n))throw new Error("expected valid "+r+": "+t+" <= n < "+n+", got "+e)}function Hi(r){let e;for(e=0;r>Ws;r>>=$s,e+=1);return e}var Lr=r=>($s<<BigInt(r))-$s;function Pu(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=x=>new Uint8Array(x),i=x=>Uint8Array.of(x),o=n(r),s=n(r),u=0,f=()=>{o.fill(1),s.fill(0),u=0},w=(...x)=>t(s,o,...x),R=(x=n(0))=>{s=w(i(0),x),o=w(),x.length!==0&&(s=w(i(1),x),o=w())},S=()=>{if(u++>=1e3)throw new Error("drbg: tried 1000 values");let x=0,k=[];for(;x<e;){o=w();let T=o.slice();k.push(T),x+=o.length}return Nt(...k)};return(x,k)=>{f(),R(x);let T;for(;!(T=k(S()));)R();return f(),T}}function Cr(r,e,t={}){if(!r||typeof r!="object")throw new Error("expected valid options object");function n(i,o,s){let u=r[i];if(s&&u===void 0)return;let f=typeof u;if(f!==o||u===null)throw new Error(`param "${i}" is invalid: expected ${o}, got ${f}`)}Object.entries(e).forEach(([i,o])=>n(i,o,!1)),Object.entries(t).forEach(([i,o])=>n(i,o,!0))}var Xs=()=>{throw new Error("not implemented")};function Nn(r){let e=new WeakMap;return(t,...n)=>{let i=e.get(t);if(i!==void 0)return i;let o=r(t,...n);return e.set(t,o),o}}var kt=BigInt(0),lt=BigInt(1),an=BigInt(2),zu=BigInt(3),Fu=BigInt(4),Ku=BigInt(5),Ad=BigInt(7),qu=BigInt(8),xd=BigInt(9),Hu=BigInt(16);function Ie(r,e){let t=r%e;return t>=kt?t:e+t}function Se(r,e,t){let n=r;for(;e-- >kt;)n*=n,n%=t;return n}function Uu(r,e){if(r===kt)throw new Error("invert: expected non-zero number");if(e<=kt)throw new Error("invert: expected positive modulus, got "+e);let t=Ie(r,e),n=e,i=kt,o=lt,s=lt,u=kt;for(;t!==kt;){let w=n/t,R=n%t,S=i-s*w,I=o-u*w;n=t,t=R,i=s,o=u,s=S,u=I}if(n!==lt)throw new Error("invert: does not exist");return Ie(i,e)}function js(r,e,t){if(!r.eql(r.sqr(e),t))throw new Error("Cannot find square root")}function Vu(r,e){let t=(r.ORDER+lt)/Fu,n=r.pow(e,t);return js(r,n,e),n}function vd(r,e){let t=(r.ORDER-Ku)/qu,n=r.mul(e,an),i=r.pow(n,t),o=r.mul(e,i),s=r.mul(r.mul(o,an),i),u=r.mul(o,r.sub(s,r.ONE));return js(r,u,e),u}function Id(r){let e=Dt(r),t=$u(r),n=t(e,e.neg(e.ONE)),i=t(e,n),o=t(e,e.neg(n)),s=(r+Ad)/Hu;return(u,f)=>{let w=u.pow(f,s),R=u.mul(w,n),S=u.mul(w,i),I=u.mul(w,o),x=u.eql(u.sqr(R),f),k=u.eql(u.sqr(S),f);w=u.cmov(w,R,x),R=u.cmov(I,S,k);let T=u.eql(u.sqr(R),f),P=u.cmov(w,R,T);return js(u,P,f),P}}function $u(r){if(r<zu)throw new Error("sqrt is not defined for small field");let e=r-lt,t=0;for(;e%an===kt;)e/=an,t++;let n=an,i=Dt(r);for(;Du(i,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(t===1)return Vu;let o=i.pow(n,e),s=(e+lt)/an;return function(f,w){if(f.is0(w))return w;if(Du(f,w)!==1)throw new Error("Cannot find square root");let R=t,S=f.mul(f.ONE,o),I=f.pow(w,e),x=f.pow(w,s);for(;!f.eql(I,f.ONE);){if(f.is0(I))return f.ZERO;let k=1,T=f.sqr(I);for(;!f.eql(T,f.ONE);)if(k++,T=f.sqr(T),k===R)throw new Error("Cannot find square root");let P=lt<<BigInt(R-k-1),C=f.pow(S,P);R=k,S=f.sqr(C),I=f.mul(I,S),x=f.mul(x,C)}return x}}function Od(r){return r%Fu===zu?Vu:r%qu===Ku?vd:r%Hu===xd?Id(r):$u(r)}var gr=(r,e)=>(Ie(r,e)&lt)===lt,Nd=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Zs(r){let e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},t=Nd.reduce((n,i)=>(n[i]="function",n),e);return Cr(r,t),r}function kd(r,e,t){if(t<kt)throw new Error("invalid exponent, negatives unsupported");if(t===kt)return r.ONE;if(t===lt)return e;let n=r.ONE,i=e;for(;t>kt;)t&lt&&(n=r.mul(n,i)),i=r.sqr(i),t>>=lt;return n}function ii(r,e,t=!1){let n=new Array(e.length).fill(t?r.ZERO:void 0),i=e.reduce((s,u,f)=>r.is0(u)?s:(n[f]=s,r.mul(s,u)),r.ONE),o=r.inv(i);return e.reduceRight((s,u,f)=>r.is0(u)?s:(n[f]=r.mul(s,n[f]),r.mul(s,u)),o),n}function Du(r,e){let t=(r.ORDER-lt)/an,n=r.pow(e,t),i=r.eql(n,r.ONE),o=r.eql(n,r.ZERO),s=r.eql(n,r.neg(r.ONE));if(!i&&!o&&!s)throw new Error("invalid Legendre symbol result");return i?1:o?0:-1}function Vi(r,e){e!==void 0&&Or(e);let t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function Dt(r,e,t=!1,n={}){if(r<=kt)throw new Error("invalid field: expected ORDER > 0, got "+r);let i,o,s=!1,u;if(typeof e=="object"&&e!=null){if(n.sqrt||t)throw new Error("cannot specify opts in two arguments");let I=e;I.BITS&&(i=I.BITS),I.sqrt&&(o=I.sqrt),typeof I.isLE=="boolean"&&(t=I.isLE),typeof I.modFromBytes=="boolean"&&(s=I.modFromBytes),u=I.allowedLengths}else typeof e=="number"&&(i=e),n.sqrt&&(o=n.sqrt);let{nBitLength:f,nByteLength:w}=Vi(r,i);if(w>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let R,S=Object.freeze({ORDER:r,isLE:t,BITS:f,BYTES:w,MASK:Lr(f),ZERO:kt,ONE:lt,allowedLengths:u,create:I=>Ie(I,r),isValid:I=>{if(typeof I!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof I);return kt<=I&&I<r},is0:I=>I===kt,isValidNot0:I=>!S.is0(I)&&S.isValid(I),isOdd:I=>(I&lt)===lt,neg:I=>Ie(-I,r),eql:(I,x)=>I===x,sqr:I=>Ie(I*I,r),add:(I,x)=>Ie(I+x,r),sub:(I,x)=>Ie(I-x,r),mul:(I,x)=>Ie(I*x,r),pow:(I,x)=>kd(S,I,x),div:(I,x)=>Ie(I*Uu(x,r),r),sqrN:I=>I*I,addN:(I,x)=>I+x,subN:(I,x)=>I-x,mulN:(I,x)=>I*x,inv:I=>Uu(I,r),sqrt:o||(I=>(R||(R=Od(r)),R(S,I))),toBytes:I=>t?Gs(I,w):qi(I,w),fromBytes:(I,x=!0)=>{if(u){if(!u.includes(I.length)||I.length>w)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+I.length);let T=new Uint8Array(w);T.set(I,t?0:T.length-I.length),I=T}if(I.length!==w)throw new Error("Field.fromBytes: expected "+w+" bytes, got "+I.length);let k=t?pr(I):On(I);if(s&&(k=Ie(k,r)),!x&&!S.isValid(k))throw new Error("invalid field element: outside of range 0..ORDER");return k},invertBatch:I=>ii(S,I),cmov:(I,x,k)=>k?x:I});return Object.freeze(S)}function Wu(r){if(typeof r!="bigint")throw new Error("field order must be bigint");let e=r.toString(2).length;return Math.ceil(e/8)}function Js(r){let e=Wu(r);return e+Math.ceil(e/2)}function Qs(r,e,t=!1){let n=r.length,i=Wu(e),o=Js(e);if(n<16||n<o||n>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+n);let s=t?pr(r):On(r),u=Ie(s,e-lt)+lt;return t?Gs(u,i):qi(u,i)}var kn=BigInt(0),cn=BigInt(1);function oi(r,e){let t=e.negate();return r?t:e}function yr(r,e){let t=ii(r.Fp,e.map(n=>n.Z));return e.map((n,i)=>r.fromAffine(n.toAffine(t[i])))}function ju(r,e){if(!Number.isSafeInteger(r)||r<=0||r>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+r)}function ea(r,e){ju(r,e);let t=Math.ceil(e/r)+1,n=2**(r-1),i=2**r,o=Lr(r),s=BigInt(r);return{windows:t,windowSize:n,mask:o,maxNumber:i,shiftBy:s}}function Gu(r,e,t){let{windowSize:n,mask:i,maxNumber:o,shiftBy:s}=t,u=Number(r&i),f=r>>s;u>n&&(u-=o,f+=cn);let w=e*n,R=w+Math.abs(u)-1,S=u===0,I=u<0,x=e%2!==0;return{nextN:f,offset:R,isZero:S,isNeg:I,isNegF:x,offsetF:w}}function Bd(r,e){if(!Array.isArray(r))throw new Error("array expected");r.forEach((t,n)=>{if(!(t instanceof e))throw new Error("invalid point at index "+n)})}function Td(r,e){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((t,n)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+n)})}var ta=new WeakMap,Zu=new WeakMap;function ra(r){return Zu.get(r)||1}function Yu(r){if(r!==kn)throw new Error("invalid wNAF")}var Bn=class{constructor(e,t){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=t}_unsafeLadder(e,t,n=this.ZERO){let i=e;for(;t>kn;)t&cn&&(n=n.add(i)),i=i.double(),t>>=cn;return n}precomputeWindow(e,t){let{windows:n,windowSize:i}=ea(t,this.bits),o=[],s=e,u=s;for(let f=0;f<n;f++){u=s,o.push(u);for(let w=1;w<i;w++)u=u.add(s),o.push(u);s=u.double()}return o}wNAF(e,t,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let i=this.ZERO,o=this.BASE,s=ea(e,this.bits);for(let u=0;u<s.windows;u++){let{nextN:f,offset:w,isZero:R,isNeg:S,isNegF:I,offsetF:x}=Gu(n,u,s);n=f,R?o=o.add(oi(I,t[x])):i=i.add(oi(S,t[w]))}return Yu(n),{p:i,f:o}}wNAFUnsafe(e,t,n,i=this.ZERO){let o=ea(e,this.bits);for(let s=0;s<o.windows&&n!==kn;s++){let{nextN:u,offset:f,isZero:w,isNeg:R}=Gu(n,s,o);if(n=u,!w){let S=t[f];i=i.add(R?S.negate():S)}}return Yu(n),i}getPrecomputes(e,t,n){let i=ta.get(t);return i||(i=this.precomputeWindow(t,e),e!==1&&(typeof n=="function"&&(i=n(i)),ta.set(t,i))),i}cached(e,t,n){let i=ra(e);return this.wNAF(i,this.getPrecomputes(i,e,n),t)}unsafe(e,t,n,i){let o=ra(e);return o===1?this._unsafeLadder(e,t,i):this.wNAFUnsafe(o,this.getPrecomputes(o,e,n),t,i)}createCache(e,t){ju(t,this.bits),Zu.set(e,t),ta.delete(e)}hasCache(e){return ra(e)!==1}};function Ju(r,e,t,n){let i=e,o=r.ZERO,s=r.ZERO;for(;t>kn||n>kn;)t&cn&&(o=o.add(i)),n&cn&&(s=s.add(i)),i=i.double(),t>>=cn,n>>=cn;return{p1:o,p2:s}}function Tn(r,e,t,n){Bd(t,r),Td(n,e);let i=t.length,o=n.length;if(i!==o)throw new Error("arrays of points and scalars must have equal length");let s=r.ZERO,u=Hi(BigInt(i)),f=1;u>12?f=u-3:u>4?f=u-2:u>0&&(f=2);let w=Lr(f),R=new Array(Number(w)+1).fill(s),S=Math.floor((e.BITS-1)/f)*f,I=s;for(let x=S;x>=0;x-=f){R.fill(s);for(let T=0;T<o;T++){let P=n[T],C=Number(P>>BigInt(x)&w);R[C]=R[C].add(t[T])}let k=s;for(let T=R.length-1,P=s;T>0;T--)P=P.add(R[T]),k=k.add(P);if(I=I.add(k),x!==0)for(let T=0;T<f;T++)I=I.double()}return I}function Xu(r,e,t){if(e){if(e.ORDER!==r)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Zs(e),e}else return Dt(r,{isLE:t})}function $i(r,e,t={},n){if(n===void 0&&(n=r==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${r} CURVE object`);for(let f of["p","n","h"]){let w=e[f];if(!(typeof w=="bigint"&&w>kn))throw new Error(`CURVE.${f} must be positive bigint`)}let i=Xu(e.p,t.Fp,n),o=Xu(e.n,t.Fn,n),u=["Gx","Gy","a",r==="weierstrass"?"b":"d"];for(let f of u)if(!i.isValid(e[f]))throw new Error(`CURVE.${f} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:i,Fn:o}}var Mr=BigInt(0),ht=BigInt(1),na=BigInt(2),Ld=BigInt(8);function Cd(r,e,t,n){let i=r.sqr(t),o=r.sqr(n),s=r.add(r.mul(e.a,i),o),u=r.add(r.ONE,r.mul(e.d,r.mul(i,o)));return r.eql(s,u)}function Md(r,e={}){let t=$i("edwards",r,e,e.FpFnLE),{Fp:n,Fn:i}=t,o=t.CURVE,{h:s}=o;Cr(e,{},{uvRatio:"function"});let u=na<<BigInt(i.BYTES*8)-ht,f=P=>n.create(P),w=e.uvRatio||((P,C)=>{try{return{isValid:!0,value:n.sqrt(n.div(P,C))}}catch{return{isValid:!1,value:Mr}}});if(!Cd(n,o,o.Gx,o.Gy))throw new Error("bad curve params: generator point");function R(P,C,L=!1){let F=L?ht:Mr;return ni("coordinate "+P,C,F,u),C}function S(P){if(!(P instanceof k))throw new Error("ExtendedPoint expected")}let I=Nn((P,C)=>{let{X:L,Y:F,Z:V}=P,Q=P.is0();C==null&&(C=Q?Ld:n.inv(V));let j=f(L*C),ee=f(F*C),b=n.mul(V,C);if(Q)return{x:Mr,y:ht};if(b!==ht)throw new Error("invZ was invalid");return{x:j,y:ee}}),x=Nn(P=>{let{a:C,d:L}=o;if(P.is0())throw new Error("bad point: ZERO");let{X:F,Y:V,Z:Q,T:j}=P,ee=f(F*F),b=f(V*V),_=f(Q*Q),v=f(_*_),B=f(ee*C),N=f(_*f(B+b)),p=f(v+f(L*f(ee*b)));if(N!==p)throw new Error("bad point: equation left != right (1)");let a=f(F*V),c=f(Q*j);if(a!==c)throw new Error("bad point: equation left != right (2)");return!0});class k{constructor(C,L,F,V){this.X=R("x",C),this.Y=R("y",L),this.Z=R("z",F,!0),this.T=R("t",V),Object.freeze(this)}static CURVE(){return o}static fromAffine(C){if(C instanceof k)throw new Error("extended point not allowed");let{x:L,y:F}=C||{};return R("x",L),R("y",F),new k(L,F,ht,f(L*F))}static fromBytes(C,L=!1){let F=n.BYTES,{a:V,d:Q}=o;C=Ys(Ut(C,F,"point")),dr(L,"zip215");let j=Ys(C),ee=C[F-1];j[F-1]=ee&-129;let b=pr(j),_=L?u:n.ORDER;ni("point.y",b,Mr,_);let v=f(b*b),B=f(v-ht),N=f(Q*v-V),{isValid:p,value:a}=w(B,N);if(!p)throw new Error("bad point: invalid y coordinate");let c=(a&ht)===ht,l=(ee&128)!==0;if(!L&&a===Mr&&l)throw new Error("bad point: x=0 and x_0=1");return l!==c&&(a=f(-a)),k.fromAffine({x:a,y:b})}static fromHex(C,L=!1){return k.fromBytes(be("point",C),L)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(C=8,L=!0){return T.createCache(this,C),L||this.multiply(na),this}assertValidity(){x(this)}equals(C){S(C);let{X:L,Y:F,Z:V}=this,{X:Q,Y:j,Z:ee}=C,b=f(L*ee),_=f(Q*V),v=f(F*ee),B=f(j*V);return b===_&&v===B}is0(){return this.equals(k.ZERO)}negate(){return new k(f(-this.X),this.Y,this.Z,f(-this.T))}double(){let{a:C}=o,{X:L,Y:F,Z:V}=this,Q=f(L*L),j=f(F*F),ee=f(na*f(V*V)),b=f(C*Q),_=L+F,v=f(f(_*_)-Q-j),B=b+j,N=B-ee,p=b-j,a=f(v*N),c=f(B*p),l=f(v*p),d=f(N*B);return new k(a,c,d,l)}add(C){S(C);let{a:L,d:F}=o,{X:V,Y:Q,Z:j,T:ee}=this,{X:b,Y:_,Z:v,T:B}=C,N=f(V*b),p=f(Q*_),a=f(ee*F*B),c=f(j*v),l=f((V+Q)*(b+_)-N-p),d=c-a,g=c+a,m=f(p-L*N),A=f(l*d),y=f(g*m),h=f(l*m),E=f(d*g);return new k(A,y,E,h)}subtract(C){return this.add(C.negate())}multiply(C){if(!i.isValidNot0(C))throw new Error("invalid scalar: expected 1 <= sc < curve.n");let{p:L,f:F}=T.cached(this,C,V=>yr(k,V));return yr(k,[L,F])[0]}multiplyUnsafe(C,L=k.ZERO){if(!i.isValid(C))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return C===Mr?k.ZERO:this.is0()||C===ht?this:T.unsafe(this,C,F=>yr(k,F),L)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}isTorsionFree(){return T.unsafe(this,o.n).is0()}toAffine(C){return I(this,C)}clearCofactor(){return s===ht?this:this.multiplyUnsafe(s)}toBytes(){let{x:C,y:L}=this.toAffine(),F=n.toBytes(L);return F[F.length-1]|=C&ht?128:0,F}toHex(){return $t(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(C){return yr(k,C)}static msm(C,L){return Tn(k,i,C,L)}_setWindowSize(C){this.precompute(C)}toRawBytes(){return this.toBytes()}}k.BASE=new k(o.Gx,o.Gy,ht,f(o.Gx*o.Gy)),k.ZERO=new k(Mr,ht,ht,Mr),k.Fp=n,k.Fn=i;let T=new Bn(k,i.BITS);return k.BASE.precompute(8),k}var Wi=class{constructor(e){this.ep=e}static fromBytes(e){Xs()}static fromHex(e){Xs()}get x(){return this.toAffine().x}get y(){return this.toAffine().y}clearCofactor(){return this}assertValidity(){this.ep.assertValidity()}toAffine(e){return this.ep.toAffine(e)}toHex(){return $t(this.toBytes())}toString(){return this.toHex()}isTorsionFree(){return!0}isSmallOrder(){return!1}add(e){return this.assertSame(e),this.init(this.ep.add(e.ep))}subtract(e){return this.assertSame(e),this.init(this.ep.subtract(e.ep))}multiply(e){return this.init(this.ep.multiply(e))}multiplyUnsafe(e){return this.init(this.ep.multiplyUnsafe(e))}double(){return this.init(this.ep.double())}negate(){return this.init(this.ep.negate())}precompute(e,t){return this.init(this.ep.precompute(e,t))}toRawBytes(){return this.toBytes()}};function Pd(r,e,t={}){if(typeof e!="function")throw new Error('"hash" function param is required');Cr(t,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});let{prehash:n}=t,{BASE:i,Fp:o,Fn:s}=r,u=t.randomBytes||In,f=t.adjustScalarBytes||(_=>_),w=t.domain||((_,v,B)=>{if(dr(B,"phflag"),v.length||B)throw new Error("Contexts/pre-hash are not supported");return _});function R(_){return s.create(pr(_))}function S(_){let v=F.secretKey;_=be("private key",_,v);let B=be("hashed private key",e(_),2*v),N=f(B.slice(0,v)),p=B.slice(v,2*v),a=R(N);return{head:N,prefix:p,scalar:a}}function I(_){let{head:v,prefix:B,scalar:N}=S(_),p=i.multiply(N),a=p.toBytes();return{head:v,prefix:B,scalar:N,point:p,pointBytes:a}}function x(_){return I(_).pointBytes}function k(_=Uint8Array.of(),...v){let B=Nt(...v);return R(e(w(B,be("context",_),!!n)))}function T(_,v,B={}){_=be("message",_),n&&(_=n(_));let{prefix:N,scalar:p,pointBytes:a}=I(v),c=k(B.context,N,_),l=i.multiply(c).toBytes(),d=k(B.context,l,a,_),g=s.create(c+d*p);if(!s.isValid(g))throw new Error("sign failed: invalid s");let m=Nt(l,s.toBytes(g));return Ut(m,F.signature,"result")}let P={zip215:!0};function C(_,v,B,N=P){let{context:p,zip215:a}=N,c=F.signature;_=be("signature",_,c),v=be("message",v),B=be("publicKey",B,F.publicKey),a!==void 0&&dr(a,"zip215"),n&&(v=n(v));let l=c/2,d=_.subarray(0,l),g=pr(_.subarray(l,c)),m,A,y;try{m=r.fromBytes(B,a),A=r.fromBytes(d,a),y=i.multiplyUnsafe(g)}catch{return!1}if(!a&&m.isSmallOrder())return!1;let h=k(p,A.toBytes(),m.toBytes(),v);return A.add(m.multiplyUnsafe(h)).subtract(y).clearCofactor().is0()}let L=o.BYTES,F={secretKey:L,publicKey:L,signature:2*L,seed:L};function V(_=u(F.seed)){return Ut(_,F.seed,"seed")}function Q(_){let v=b.randomSecretKey(_);return{secretKey:v,publicKey:x(v)}}function j(_){return fr(_)&&_.length===s.BYTES}function ee(_,v){try{return!!r.fromBytes(_,v)}catch{return!1}}let b={getExtendedPublicKey:I,randomSecretKey:V,isValidSecretKey:j,isValidPublicKey:ee,toMontgomery(_){let{y:v}=r.fromBytes(_),B=F.publicKey,N=B===32;if(!N&&B!==57)throw new Error("only defined for 25519 and 448");let p=N?o.div(ht+v,ht-v):o.div(v-ht,v+ht);return o.toBytes(p)},toMontgomerySecret(_){let v=F.secretKey;Ut(_,v);let B=e(_.subarray(0,v));return f(B).subarray(0,v)},randomPrivateKey:V,precompute(_=8,v=r.BASE){return v.precompute(_,!1)}};return Object.freeze({keygen:Q,getPublicKey:x,sign:T,verify:C,utils:b,Point:r,lengths:F})}function Ud(r){let e={a:r.a,d:r.d,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},t=r.Fp,n=Dt(e.n,r.nBitLength,!0),i={Fp:t,Fn:n,uvRatio:r.uvRatio},o={randomBytes:r.randomBytes,adjustScalarBytes:r.adjustScalarBytes,domain:r.domain,prehash:r.prehash,mapToCurve:r.mapToCurve};return{CURVE:e,curveOpts:i,hash:r.hash,eddsaOpts:o}}function Dd(r,e){let t=e.Point;return Object.assign({},e,{ExtendedPoint:t,CURVE:r,nBitLength:t.Fn.BITS,nByteLength:t.Fn.BYTES})}function Qu(r){let{CURVE:e,curveOpts:t,hash:n,eddsaOpts:i}=Ud(r),o=Md(e,t),s=Pd(o,n,i);return Dd(r,s)}var zd=BigInt(0),mr=BigInt(1),ef=BigInt(2),lb=BigInt(3),Fd=BigInt(5),Kd=BigInt(8),Ln=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),si={p:Ln,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:Kd,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function qd(r){let e=BigInt(10),t=BigInt(20),n=BigInt(40),i=BigInt(80),o=Ln,u=r*r%o*r%o,f=Se(u,ef,o)*u%o,w=Se(f,mr,o)*r%o,R=Se(w,Fd,o)*w%o,S=Se(R,e,o)*R%o,I=Se(S,t,o)*S%o,x=Se(I,n,o)*I%o,k=Se(x,i,o)*x%o,T=Se(k,i,o)*x%o,P=Se(T,e,o)*R%o;return{pow_p_5_8:Se(P,ef,o)*r%o,b2:u}}function Hd(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}var ia=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function aa(r,e){let t=Ln,n=Ie(e*e*e,t),i=Ie(n*n*e,t),o=qd(r*i).pow_p_5_8,s=Ie(r*n*o,t),u=Ie(e*s*s,t),f=s,w=Ie(s*ia,t),R=u===r,S=u===Ie(-r,t),I=u===Ie(-r*ia,t);return R&&(s=f),(S||I)&&(s=w),gr(s,t)&&(s=Ie(-s,t)),{isValid:R||S,value:s}}var Pr=Dt(si.p,{isLE:!0}),Vd=Dt(si.n,{isLE:!0}),$d={...si,Fp:Pr,hash:Tu,adjustScalarBytes:Hd,uvRatio:aa},Ct=Qu($d);var oa=ia,Wd=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),Gd=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),Yd=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),Xd=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),tf=r=>aa(mr,r),jd=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),sa=r=>Ct.Point.Fp.create(pr(r)&jd);function rf(r){let{d:e}=si,t=Ln,n=C=>Pr.create(C),i=n(oa*r*r),o=n((i+mr)*Yd),s=BigInt(-1),u=n((s-e*i)*n(i+e)),{isValid:f,value:w}=aa(o,u),R=n(w*r);gr(R,t)||(R=n(-R)),f||(w=R),f||(s=i);let S=n(s*(i-mr)*Xd-u),I=w*w,x=n((w+w)*u),k=n(S*Wd),T=n(mr-I),P=n(mr+I);return new Ct.Point(n(x*P),n(T*k),n(k*P),n(x*T))}function Zd(r){gt(r,64);let e=sa(r.subarray(0,32)),t=rf(e),n=sa(r.subarray(32,64)),i=rf(n);return new _r(t.add(i))}var _r=class r extends Wi{constructor(e){super(e)}static fromAffine(e){return new r(Ct.Point.fromAffine(e))}assertSame(e){if(!(e instanceof r))throw new Error("RistrettoPoint expected")}init(e){return new r(e)}static hashToCurve(e){return Zd(be("ristrettoHash",e,64))}static fromBytes(e){gt(e,32);let{a:t,d:n}=si,i=Ln,o=V=>Pr.create(V),s=sa(e);if(!Cu(Pr.toBytes(s),e)||gr(s,i))throw new Error("invalid ristretto255 encoding 1");let u=o(s*s),f=o(mr+t*u),w=o(mr-t*u),R=o(f*f),S=o(w*w),I=o(t*n*R-S),{isValid:x,value:k}=tf(o(I*S)),T=o(k*w),P=o(k*T*I),C=o((s+s)*T);gr(C,i)&&(C=o(-C));let L=o(f*P),F=o(C*L);if(!x||gr(F,i)||L===zd)throw new Error("invalid ristretto255 encoding 2");return new r(new Ct.Point(C,L,mr,F))}static fromHex(e){return r.fromBytes(be("ristrettoHex",e,32))}static msm(e,t){return Tn(r,Ct.Point.Fn,e,t)}toBytes(){let{X:e,Y:t,Z:n,T:i}=this.ep,o=Ln,s=P=>Pr.create(P),u=s(s(n+t)*s(n-t)),f=s(e*t),w=s(f*f),{value:R}=tf(s(u*w)),S=s(R*u),I=s(R*f),x=s(S*I*i),k;if(gr(i*x,o)){let P=s(t*oa),C=s(e*oa);e=P,t=C,k=s(S*Gd)}else k=I;gr(e*x,o)&&(t=s(-t));let T=s((n-t)*k);return gr(T,o)&&(T=s(-T)),Pr.toBytes(T)}equals(e){this.assertSame(e);let{X:t,Y:n}=this.ep,{X:i,Y:o}=e.ep,s=w=>Pr.create(w),u=s(t*o)===s(n*i),f=s(n*o)===s(t*i);return u||f}is0(){return this.equals(r.ZERO)}};_r.BASE=new _r(Ct.Point.BASE);_r.ZERO=new _r(Ct.Point.ZERO);_r.Fp=Pr;_r.Fn=Vd;var nc=ut(ua()),dt=ut(la());var ha=Ki;var Wn=ut(mf()),O=ut(ar()),ql=ut(ar());var m0=1,_0=2,w0=3,b0=4,E0=5,R0=6,S0=7,A0=8,x0=9,v0=10,I0=-32700,O0=-32603,N0=-32602,k0=-32601,B0=-32600,T0=-32016,L0=-32015,C0=-32014,M0=-32013,P0=-32012,U0=-32011,D0=-32010,z0=-32009,F0=-32008,K0=-32007,q0=-32006,H0=-32005,V0=-32004,$0=-32003,W0=-32002,G0=-32001,Y0=28e5,X0=2800001,j0=2800002,Z0=2800003,J0=2800004,Q0=2800005,ep=2800006,tp=2800007,rp=2800008,np=2800009,ip=2800010,op=2800011,sp=323e4,ap=32300001,cp=3230002,up=3230003,fp=3230004,lp=361e4,hp=3610001,dp=3610002,pp=3610003,gp=3610004,yp=3610005,mp=3610006,_p=3610007,wp=3611e3,bp=3704e3,Ep=3704001,Rp=3704002,Sp=3704003,Ap=3704004,xp=4128e3,vp=4128001,Ip=4128002,Op=4615e3,Np=4615001,kp=4615002,Bp=4615003,Tp=4615004,Lp=4615005,Cp=4615006,Mp=4615007,Pp=4615008,Up=4615009,Dp=4615010,zp=4615011,Fp=4615012,Kp=4615013,qp=4615014,Hp=4615015,Vp=4615016,$p=4615017,Wp=4615018,Gp=4615019,Yp=4615020,Xp=4615021,jp=4615022,Zp=4615023,Jp=4615024,Qp=4615025,eg=4615026,tg=4615027,rg=4615028,ng=4615029,ig=4615030,og=4615031,sg=4615032,ag=4615033,cg=4615034,ug=4615035,fg=4615036,lg=4615037,hg=4615038,dg=4615039,pg=4615040,gg=4615041,yg=4615042,mg=4615043,_g=4615044,wg=4615045,bg=4615046,Eg=4615047,Rg=4615048,Sg=4615049,Ag=4615050,xg=4615051,vg=4615052,Ig=4615053,Og=4615054,Ng=5508e3,kg=5508001,Bg=5508002,Tg=5508003,Lg=5508004,Cg=5508005,Mg=5508006,Pg=5508007,Ug=5508008,Dg=5508009,zg=5508010,Fg=5508011,Kg=5663e3,qg=5663001,Hg=5663002,Vg=5663003,$g=5663004,Wg=5663005,Gg=5663006,Yg=5663007,Xg=5663008,jg=5663009,Zg=5663010,Jg=5663011,Qg=5663012,ey=5663013,ty=5663014,ry=5663015,ny=5663016,iy=5663017,oy=5663018,sy=5663019,ay=5663020,cy=705e4,uy=7050001,fy=7050002,ly=7050003,hy=7050004,dy=7050005,py=7050006,gy=7050007,yy=7050008,my=7050009,_y=7050010,wy=7050011,by=7050012,Ey=7050013,Ry=7050014,Sy=7050015,Ay=7050016,xy=7050017,vy=7050018,Iy=7050019,Oy=7050020,Ny=7050021,ky=7050022,By=7050023,Ty=7050024,Ly=7050025,Cy=7050026,My=7050027,Py=7050028,Uy=7050029,Dy=7050030,zy=7050031,Fy=7050032,Ky=7050033,qy=7050034,Hy=7050035,Vy=7050036,Ea=8078e3,Ra=8078001,_f=8078002,wf=8078003,Sa=8078004,Aa=8078005,xa=8078006,$y=8078007,Wy=8078008,Gy=8078009,Yy=8078010,va=8078011,Xy=8078012,bf=8078013,Ef=8078014,jy=8078015,Zy=8078016,Jy=8078017,Qy=8078018,em=8078019,Rf=8078020,Sf=8078021,tm=8078022,rm=81e5,nm=8100001,im=8100002,om=8100003,sm=819e4,am=8190001,cm=8190002,um=8190003,fm=8190004,lm=99e5,hm=9900001,dm=9900002,pm=9900003,gm=9900004;function Af(r){return Array.isArray(r)?"%5B"+r.map(Af).join("%2C%20")+"%5D":typeof r=="bigint"?`${r}n`:encodeURIComponent(String(r!=null&&Object.getPrototypeOf(r)===null?{...r}:r))}function ym([r,e]){return`${r}=${Af(e)}`}function mm(r){let e=Object.entries(r).map(ym).join("&");return btoa(e)}var Ab={[sp]:"Account not found at address: $address",[fp]:"Not all accounts were decoded. Encoded accounts found at addresses: $addresses.",[up]:"Expected decoded account at address: $address",[cp]:"Failed to decode account data at address: $address",[ap]:"Accounts not found at addresses: $addresses",[np]:"Unable to find a viable program address bump seed.",[j0]:"$putativeAddress is not a base58-encoded address.",[Y0]:"Expected base58 encoded address to decode to a byte array of length 32. Actual length: $actualLength.",[Z0]:"The `CryptoKey` must be an `Ed25519` public key.",[op]:"$putativeOffCurveAddress is not a base58-encoded off-curve address.",[rp]:"Invalid seeds; point must fall off the Ed25519 curve.",[J0]:"Expected given program derived address to have the following format: [Address, ProgramDerivedAddressBump].",[ep]:"A maximum of $maxSeeds seeds, including the bump seed, may be supplied when creating an address. Received: $actual.",[tp]:"The seed at index $index with length $actual exceeds the maximum length of $maxSeedLength bytes.",[Q0]:"Expected program derived address bump to be in the range [0, 255], got: $bump.",[ip]:"Program address cannot end with PDA marker.",[X0]:"Expected base58-encoded address string of length in the range [32, 44]. Actual length: $actualLength.",[b0]:"Expected base58-encoded blockash string of length in the range [32, 44]. Actual length: $actualLength.",[m0]:"The network has progressed past the last block for which this transaction could have been committed.",[Ea]:"Codec [$codecDescription] cannot decode empty byte arrays.",[tm]:"Enum codec cannot use lexical values [$stringValues] as discriminators. Either remove all lexical values or set `useValuesAsDiscriminators` to `false`.",[Rf]:"Sentinel [$hexSentinel] must not be present in encoded bytes [$hexEncodedBytes].",[Aa]:"Encoder and decoder must have the same fixed size, got [$encoderFixedSize] and [$decoderFixedSize].",[xa]:"Encoder and decoder must have the same max size, got [$encoderMaxSize] and [$decoderMaxSize].",[Sa]:"Encoder and decoder must either both be fixed-size or variable-size.",[Wy]:"Enum discriminator out of range. Expected a number in [$formattedValidDiscriminators], got $discriminator.",[_f]:"Expected a fixed-size codec, got a variable-size one.",[bf]:"Codec [$codecDescription] expected a positive byte length, got $bytesLength.",[wf]:"Expected a variable-size codec, got a fixed-size one.",[em]:"Codec [$codecDescription] expected zero-value [$hexZeroValue] to have the same size as the provided fixed-size item [$expectedSize bytes].",[Ra]:"Codec [$codecDescription] expected $expected bytes, got $bytesLength.",[Qy]:"Expected byte array constant [$hexConstant] to be present in data [$hexData] at offset [$offset].",[Gy]:"Invalid discriminated union variant. Expected one of [$variants], got $value.",[Yy]:"Invalid enum variant. Expected one of [$stringValues] or a number in [$formattedNumericalValues], got $variant.",[jy]:"Invalid literal union variant. Expected one of [$variants], got $value.",[$y]:"Expected [$codecDescription] to have $expected items, got $actual.",[Xy]:"Invalid value $value for base $base with alphabet $alphabet.",[Zy]:"Literal union discriminator out of range. Expected a number between $minRange and $maxRange, got $discriminator.",[va]:"Codec [$codecDescription] expected number to be in the range [$min, $max], got $value.",[Ef]:"Codec [$codecDescription] expected offset to be in the range [0, $bytesLength], got $offset.",[Sf]:"Expected sentinel [$hexSentinel] to be present in decoded bytes [$hexDecodedBytes].",[Jy]:"Union variant out of range. Expected an index between $minRange and $maxRange, got $variant.",[wp]:"No random values implementation could be found.",[Up]:"instruction requires an uninitialized account",[Zp]:"instruction tries to borrow reference for an account which is already borrowed",[Jp]:"instruction left account with an outstanding borrowed reference",[Xp]:"program other than the account's owner changed the size of the account data",[Lp]:"account data too small for instruction",[jp]:"instruction expected an executable account",[bg]:"An account does not have enough lamports to be rent-exempt",[Rg]:"Program arithmetic overflowed",[wg]:"Failed to serialize or deserialize account data: $encodedData",[Og]:"Builtin programs must consume compute units",[sg]:"Cross-program invocation call depth too deep",[hg]:"Computational budget exceeded",[eg]:"custom program error: #$code",[$p]:"instruction contains duplicate accounts",[Qp]:"instruction modifications of multiply-passed account differ",[ig]:"executable accounts must be rent exempt",[rg]:"instruction changed executable accounts data",[ng]:"instruction changed the balance of an executable account",[Wp]:"instruction changed executable bit of an account",[qp]:"instruction modified data of an account it does not own",[Kp]:"instruction spent from the balance of an account it does not own",[Np]:"generic instruction error",[Ag]:"Provided owner is not allowed",[mg]:"Account is immutable",[_g]:"Incorrect authority provided",[Mp]:"incorrect program id for instruction",[Cp]:"insufficient funds for instruction",[Tp]:"invalid account data for instruction",[Eg]:"Invalid account owner",[kp]:"invalid program argument",[tg]:"program returned invalid error code",[Bp]:"invalid instruction data",[lg]:"Failed to reallocate account data",[fg]:"Provided seeds do not result in a valid address",[xg]:"Accounts data allocations exceeded the maximum allowed per transaction",[vg]:"Max accounts exceeded",[Ig]:"Max instruction trace length exceeded",[ug]:"Length of the seed is too long for address generation",[ag]:"An account required by the instruction is missing",[Pp]:"missing required signature for instruction",[Fp]:"instruction illegally modified the program id of an account",[Yp]:"insufficient account keys for instruction",[dg]:"Cross-program invocation with unauthorized signer or writable account",[pg]:"Failed to create program execution environment",[yg]:"Program failed to compile",[gg]:"Program failed to complete",[Vp]:"instruction modified data of a read-only account",[Hp]:"instruction changed the balance of a read-only account",[cg]:"Cross-program invocation reentrancy not allowed for this instruction",[Gp]:"instruction modified rent epoch of an account",[zp]:"sum of account balances before and after instruction do not match",[Dp]:"instruction requires an initialized account",[Op]:"",[og]:"Unsupported program id",[Sg]:"Unsupported sysvar",[xp]:"The instruction does not have any accounts.",[vp]:"The instruction does not have any data.",[Ip]:"Expected instruction to have progress address $expectedProgramAddress, got $actualProgramAddress.",[E0]:"Expected base58 encoded blockhash to decode to a byte array of length 32. Actual length: $actualLength.",[_0]:"The nonce `$expectedNonceValue` is no longer valid. It has advanced to `$actualNonceValue`",[dm]:"Invariant violation: Found no abortable iterable cache entry for key `$cacheKey`. It should be impossible to hit this error; please file an issue at https://sola.na/web3invariant",[gm]:"Invariant violation: This data publisher does not publish to the channel named `$channelName`. Supported channels include $supportedChannelNames.",[hm]:"Invariant violation: WebSocket message iterator state is corrupt; iterated without first resolving existing message promise. It should be impossible to hit this error; please file an issue at https://sola.na/web3invariant",[lm]:"Invariant violation: WebSocket message iterator is missing state storage. It should be impossible to hit this error; please file an issue at https://sola.na/web3invariant",[pm]:"Invariant violation: Switch statement non-exhaustive. Received unexpected value `$unexpectedValue`. It should be impossible to hit this error; please file an issue at https://sola.na/web3invariant",[O0]:"JSON-RPC error: Internal JSON-RPC error ($__serverMessage)",[N0]:"JSON-RPC error: Invalid method parameter(s) ($__serverMessage)",[B0]:"JSON-RPC error: The JSON sent is not a valid `Request` object ($__serverMessage)",[k0]:"JSON-RPC error: The method does not exist / is not available ($__serverMessage)",[I0]:"JSON-RPC error: An error occurred on the server while parsing the JSON text ($__serverMessage)",[P0]:"$__serverMessage",[G0]:"$__serverMessage",[V0]:"$__serverMessage",[C0]:"$__serverMessage",[D0]:"$__serverMessage",[z0]:"$__serverMessage",[T0]:"Minimum context slot has not been reached",[H0]:"Node is unhealthy; behind by $numSlotsBehind slots",[F0]:"No snapshot",[W0]:"Transaction simulation failed",[K0]:"$__serverMessage",[U0]:"Transaction history is not available from this node",[q0]:"$__serverMessage",[M0]:"Transaction signature length mismatch",[$0]:"Transaction signature verification failure",[L0]:"$__serverMessage",[bp]:"Key pair bytes must be of length 64, got $byteLength.",[Ep]:"Expected private key bytes with length 32. Actual length: $actualLength.",[Rp]:"Expected base58-encoded signature to decode to a byte array of length 64. Actual length: $actualLength.",[Ap]:"The provided private key does not match the provided public key.",[Sp]:"Expected base58-encoded signature string of length in the range [64, 88]. Actual length: $actualLength.",[R0]:"Lamports value must be in the range [0, 2e64-1]",[S0]:"`$value` cannot be parsed as a `BigInt`",[v0]:"$message",[A0]:"`$value` cannot be parsed as a `Number`",[w0]:"No nonce account could be found at address `$nonceAccountAddress`",[sm]:"The notification name must end in 'Notifications' and the API must supply a subscription plan creator function for the notification '$notificationName'.",[cm]:"WebSocket was closed before payload could be added to the send buffer",[um]:"WebSocket connection closed",[fm]:"WebSocket failed to connect",[am]:"Failed to obtain a subscription id from the server",[om]:"Could not find an API plan for RPC method: `$method`",[rm]:"The $argumentLabel argument to the `$methodName` RPC method$optionalPathLabel was `$value`. This number is unsafe for use with the Solana JSON-RPC because it exceeds `Number.MAX_SAFE_INTEGER`.",[im]:"HTTP error ($statusCode): $message",[nm]:"HTTP header(s) forbidden: $headers. Learn more at https://developer.mozilla.org/en-US/docs/Glossary/Forbidden_header_name.",[Ng]:"Multiple distinct signers were identified for address `$address`. Please ensure that you are using the same signer instance for each address.",[kg]:"The provided value does not implement the `KeyPairSigner` interface",[Tg]:"The provided value does not implement the `MessageModifyingSigner` interface",[Lg]:"The provided value does not implement the `MessagePartialSigner` interface",[Bg]:"The provided value does not implement any of the `MessageSigner` interfaces",[Mg]:"The provided value does not implement the `TransactionModifyingSigner` interface",[Pg]:"The provided value does not implement the `TransactionPartialSigner` interface",[Ug]:"The provided value does not implement the `TransactionSendingSigner` interface",[Cg]:"The provided value does not implement any of the `TransactionSigner` interfaces",[Dg]:"More than one `TransactionSendingSigner` was identified.",[zg]:"No `TransactionSendingSigner` was identified. Please provide a valid `TransactionWithSingleSendingSigner` transaction.",[Fg]:"Wallet account signers do not support signing multiple messages/transactions in a single operation",[_p]:"Cannot export a non-extractable key.",[hp]:"No digest implementation could be found.",[lp]:"Cryptographic operations are only allowed in secure browser contexts. Read more here: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts.",[dp]:`This runtime does not support the generation of Ed25519 key pairs.

Install @solana/webcrypto-ed25519-polyfill and call its \`install\` function before generating keys in environments that do not support Ed25519.

For a list of runtimes that currently support Ed25519 operations, visit https://github.com/WICG/webcrypto-secure-curves/issues/20.`,[pp]:"No signature verification implementation could be found.",[gp]:"No key generation implementation could be found.",[yp]:"No signing implementation could be found.",[mp]:"No key export implementation could be found.",[x0]:"Timestamp value must be in the range [-(2n ** 63n), (2n ** 63n) - 1]. `$value` given",[Ay]:"Transaction processing left an account with an outstanding borrowed reference",[uy]:"Account in use",[fy]:"Account loaded twice",[ly]:"Attempt to debit an account but found no record of a prior credit.",[By]:"Transaction loads an address table account that doesn't exist",[gy]:"This transaction has already been processed",[yy]:"Blockhash not found",[my]:"Loader call chain is too deep",[Sy]:"Transactions are currently disabled due to cluster maintenance",[Dy]:"Transaction contains a duplicate instruction ($index) that is not allowed",[dy]:"Insufficient funds for fee",[zy]:"Transaction results in an account ($accountIndex) with insufficient funds for rent",[py]:"This account may not be used to pay transaction fees",[wy]:"Transaction contains an invalid account reference",[Ly]:"Transaction loads an address table account with invalid data",[Cy]:"Transaction address table lookup uses an invalid index",[Ty]:"Transaction loads an address table account with an invalid owner",[Ky]:"LoadedAccountsDataSizeLimit set for transaction must be greater than 0.",[Ey]:"This program may not be used for executing instructions",[My]:"Transaction leaves an account with a lower balance than rent-exempt minimum",[Iy]:"Transaction loads a writable account that cannot be written",[Fy]:"Transaction exceeded max loaded accounts data size cap",[_y]:"Transaction requires a fee but has no signature present",[hy]:"Attempt to load a program that does not exist",[Hy]:"Execution of the program referenced by account at index $accountIndex is temporarily restricted.",[qy]:"ResanitizationNeeded",[Ry]:"Transaction failed to sanitize accounts offsets correctly",[by]:"Transaction did not pass signature verification",[ky]:"Transaction locked too many accounts",[Vy]:"Sum of account balances before and after transaction do not match",[cy]:"The transaction failed with the error `$errorName`",[vy]:"Transaction version is unsupported",[Ny]:"Transaction would exceed account data limit within the block",[Uy]:"Transaction would exceed total account data limit",[Oy]:"Transaction would exceed max account limit within the block",[xy]:"Transaction would exceed max Block Cost Limit",[Py]:"Transaction would exceed max Vote Cost Limit",[ry]:"Attempted to sign a transaction with an address that is not a signer for it",[Zg]:"Transaction is missing an address at index: $index.",[ny]:"Transaction has no expected signers therefore it cannot be encoded",[ay]:"Transaction size $transactionSize exceeds limit of $transactionSizeLimit bytes",[Hg]:"Transaction does not have a blockhash lifetime",[Vg]:"Transaction is not a durable nonce transaction",[Wg]:"Contents of these address lookup tables unknown: $lookupTableAddresses",[Gg]:"Lookup of address at index $highestRequestedIndex failed for lookup table `$lookupTableAddress`. Highest known index is $highestKnownIndex. The lookup table may have been extended since its contents were retrieved",[Xg]:"No fee payer set in CompiledTransaction",[Yg]:"Could not find program address at index $index",[oy]:"Failed to estimate the compute unit consumption for this transaction message. This is likely because simulating the transaction failed. Inspect the `cause` property of this error to learn more",[sy]:"Transaction failed when it was simulated in order to estimate the compute unit consumption. The compute unit estimate provided is for a transaction that failed when simulated and may not be representative of the compute units this transaction would consume if successful. Inspect the `cause` property of this error to learn more",[Jg]:"Transaction is missing a fee payer.",[Qg]:"Could not determine this transaction's signature. Make sure that the transaction has been signed by its fee payer.",[ty]:"Transaction first instruction is not advance nonce account instruction.",[ey]:"Transaction with no instructions cannot be durable nonce transaction.",[Kg]:"This transaction includes an address (`$programAddress`) which is both invoked and set as the fee payer. Program addresses may not pay fees",[qg]:"This transaction includes an address (`$programAddress`) which is both invoked and marked writable. Program addresses may not be writable",[iy]:"The transaction message expected the transaction to have $signerAddressesLength signatures, got $signaturesLength.",[jg]:"Transaction is missing signatures for addresses: $addresses.",[$g]:"Transaction version must be in the range [0, 127]. `$actualVersion` given"};function _m(r,e={}){{let t=`Solana error #${r}; Decode this error by running \`npx @solana/errors decode -- ${r}`;return Object.keys(e).length&&(t+=` '${mm(e)}'`),`${t}\``}}var zr=class extends Error{cause=this.cause;context;constructor(...[r,e]){let t,n;if(e){let{cause:o,...s}=e;o&&(n={cause:o}),Object.keys(s).length>0&&(t=s)}let i=_m(r,t);super(i,n),this.context={__code:r,...t},this.name="SolanaError"}};function wm(r,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(r)}function xf(r){return Object.freeze({...r,encode:e=>{let t=new Uint8Array(wm(e,r));return r.write(e,t,0),t}})}function vf(r){return Object.freeze({...r,decode:(e,t=0)=>r.read(e,t)[0]})}function Dn(r){return"fixedSize"in r&&typeof r.fixedSize=="number"}function If(r,e){if(Dn(r)!==Dn(e))throw new zr(Sa);if(Dn(r)&&Dn(e)&&r.fixedSize!==e.fixedSize)throw new zr(Aa,{decoderFixedSize:e.fixedSize,encoderFixedSize:r.fixedSize});if(!Dn(r)&&!Dn(e)&&r.maxSize!==e.maxSize)throw new zr(xa,{decoderMaxSize:e.maxSize,encoderMaxSize:r.maxSize});return{...e,...r,decode:e.decode,encode:r.encode,read:e.read,write:r.write}}function Of(r,e,t=0){if(e.length-t<=0)throw new zr(Ea,{codecDescription:r})}function Nf(r,e,t,n=0){let i=t.length-n;if(i<e)throw new zr(Ra,{bytesLength:i,codecDescription:r,expected:e})}function bm(r,e,t,n){if(n<e||n>t)throw new zr(va,{codecDescription:r,max:t,min:e,value:n})}function kf(r){return r?.endian!==1}function Em(r){return xf({fixedSize:r.size,write(e,t,n){r.range&&bm(r.name,r.range[0],r.range[1],e);let i=new ArrayBuffer(r.size);return r.set(new DataView(i),e,kf(r.config)),t.set(new Uint8Array(i),n),n+r.size}})}function Rm(r){return vf({fixedSize:r.size,read(e,t=0){Of(r.name,e,t),Nf(r.name,r.size,e,t);let n=new DataView(Sm(e,t,r.size));return[r.get(n,kf(r.config)),t+r.size]}})}function Sm(r,e,t){let n=r.byteOffset+(e??0),i=t??r.byteLength;return r.buffer.slice(n,n+i)}var Ia=(r={})=>Em({config:r,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,t,n)=>e.setBigUint64(0,BigInt(t),n),size:8}),Am=(r={})=>Rm({config:r,get:(e,t)=>e.getBigUint64(0,t),name:"u64",size:8}),Bf=(r={})=>If(Ia(r),Am(r));var Oa=class extends TypeError{constructor(e,t){let n,{message:i,explanation:o,...s}=e,{path:u}=e,f=u.length===0?i:`At path: ${u.join(".")} -- ${i}`;super(o??f),o!=null&&(this.cause=f),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...t()])}};function xm(r){return hi(r)&&typeof r[Symbol.iterator]=="function"}function hi(r){return typeof r=="object"&&r!=null}function Eo(r){return hi(r)&&!Array.isArray(r)}function Jt(r){return typeof r=="symbol"?r.toString():typeof r=="string"?JSON.stringify(r):`${r}`}function vm(r){let{done:e,value:t}=r.next();return e?void 0:t}function Im(r,e,t,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});let{path:i,branch:o}=e,{type:s}=t,{refinement:u,message:f=`Expected a value of type \`${s}\`${u?` with refinement \`${u}\``:""}, but received: \`${Jt(n)}\``}=r;return{value:n,type:s,refinement:u,key:i[i.length-1],path:i,branch:o,...r,message:f}}function*Tf(r,e,t,n){xm(r)||(r=[r]);for(let i of r){let o=Im(i,e,t,n);o&&(yield o)}}function*Na(r,e,t={}){let{path:n=[],branch:i=[r],coerce:o=!1,mask:s=!1}=t,u={path:n,branch:i,mask:s};o&&(r=e.coercer(r,u));let f="valid";for(let w of e.validator(r,u))w.explanation=t.message,f="not_valid",yield[w,void 0];for(let[w,R,S]of e.entries(r,u)){let I=Na(R,S,{path:w===void 0?n:[...n,w],branch:w===void 0?i:[...i,R],coerce:o,mask:s,message:t.message});for(let x of I)x[0]?(f=x[0].refinement!=null?"not_refined":"not_valid",yield[x[0],void 0]):o&&(R=x[1],w===void 0?r=R:r instanceof Map?r.set(w,R):r instanceof Set?r.add(R):hi(r)&&(R!==void 0||w in r)&&(r[w]=R))}if(f!=="not_valid")for(let w of e.refiner(r,u))w.explanation=t.message,f="not_refined",yield[w,void 0];f==="valid"&&(yield[void 0,r])}var Wt=class{constructor(e){let{type:t,schema:n,validator:i,refiner:o,coercer:s=f=>f,entries:u=function*(){}}=e;this.type=t,this.schema=n,this.entries=u,this.coercer=s,i?this.validator=(f,w)=>{let R=i(f,w);return Tf(R,w,this,f)}:this.validator=()=>[],o?this.refiner=(f,w)=>{let R=o(f,w);return Tf(R,w,this,f)}:this.refiner=()=>[]}assert(e,t){return Lf(e,this,t)}create(e,t){return W(e,this,t)}is(e){return Cf(e,this)}mask(e,t){return Om(e,this,t)}validate(e,t={}){return di(e,this,t)}};function Lf(r,e,t){let n=di(r,e,{message:t});if(n[0])throw n[0]}function W(r,e,t){let n=di(r,e,{coerce:!0,message:t});if(n[0])throw n[0];return n[1]}function Om(r,e,t){let n=di(r,e,{coerce:!0,mask:!0,message:t});if(n[0])throw n[0];return n[1]}function Cf(r,e){return!di(r,e)[0]}function di(r,e,t={}){let n=Na(r,e,t),i=vm(n);return i[0]?[new Oa(i[0],function*(){for(let s of n)s[0]&&(yield s[0])}),void 0]:[void 0,i[1]]}function hn(r,e){return new Wt({type:r,schema:null,validator:e})}function Mf(){return hn("any",()=>!0)}function Y(r){return new Wt({type:"array",schema:r,*entries(e){if(r&&Array.isArray(e))for(let[t,n]of e.entries())yield[t,n,r]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${Jt(e)}`}})}function Qt(){return hn("boolean",r=>typeof r=="boolean")}function Ro(r){return hn("instance",e=>e instanceof r||`Expected a \`${r.name}\` instance, but received: ${Jt(e)}`)}function Ae(r){let e=Jt(r),t=typeof r;return new Wt({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?r:null,validator(n){return n===r||`Expected the literal \`${e}\`, but received: ${Jt(n)}`}})}function Nm(){return hn("never",()=>!1)}function X(r){return new Wt({...r,validator:(e,t)=>e===null||r.validator(e,t),refiner:(e,t)=>e===null||r.refiner(e,t)})}function M(){return hn("number",r=>typeof r=="number"&&!isNaN(r)||`Expected a number, but received: ${Jt(r)}`)}function te(r){return new Wt({...r,validator:(e,t)=>e===void 0||r.validator(e,t),refiner:(e,t)=>e===void 0||r.refiner(e,t)})}function ka(r,e){return new Wt({type:"record",schema:null,*entries(t){if(hi(t))for(let n in t){let i=t[n];yield[n,n,r],yield[n,i,e]}},validator(t){return Eo(t)||`Expected an object, but received: ${Jt(t)}`},coercer(t){return Eo(t)?{...t}:t}})}function $(){return hn("string",r=>typeof r=="string"||`Expected a string, but received: ${Jt(r)}`)}function So(r){let e=Nm();return new Wt({type:"tuple",schema:null,*entries(t){if(Array.isArray(t)){let n=Math.max(r.length,t.length);for(let i=0;i<n;i++)yield[i,t[i],r[i]||e]}},validator(t){return Array.isArray(t)||`Expected an array, but received: ${Jt(t)}`},coercer(t){return Array.isArray(t)?t.slice():t}})}function H(r){let e=Object.keys(r);return new Wt({type:"type",schema:r,*entries(t){if(hi(t))for(let n of e)yield[n,t[n],r[n]]},validator(t){return Eo(t)||`Expected an object, but received: ${Jt(t)}`},coercer(t){return Eo(t)?{...t}:t}})}function Et(r){let e=r.map(t=>t.type).join(" | ");return new Wt({type:"union",schema:null,coercer(t,n){for(let i of r){let[o,s]=i.validate(t,{coerce:!0,mask:n.mask});if(!o)return s}return t},validator(t,n){let i=[];for(let o of r){let[...s]=Na(t,o,n),[u]=s;if(u[0])for(let[f]of s)f&&i.push(f);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${Jt(t)}`,...i]}})}function dn(){return hn("unknown",()=>!0)}function zn(r,e,t){return new Wt({...r,coercer:(n,i)=>Cf(n,e)?r.coercer(t(n,i),i):r.coercer(n,i)})}var Hl=ut(ol());var cl=ut(vn(),1);var ko=ut(al(),1);var t_=class extends ko.default{socket;constructor(r,e,t){super(),this.socket=new window.WebSocket(r,t),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=n=>this.emit("message",n.data),this.socket.onerror=n=>this.emit("error",n),this.socket.onclose=n=>{this.emit("close",n.code,n.reason)}}send(r,e,t){let n=t||e;try{this.socket.send(r),n()}catch(i){n(i)}}close(r,e){this.socket.close(r,e)}addEventListener(r,e,t){this.socket.addEventListener(r,e,t)}};function ul(r,e){return new t_(r,e)}var r_=class{encode(r){return JSON.stringify(r)}decode(r){return JSON.parse(r)}},fl=class extends ko.default{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(r,e="ws://localhost:8080",{autoconnect:t=!0,reconnect:n=!0,reconnect_interval:i=1e3,max_reconnects:o=5,...s}={},u,f){super(),this.webSocketFactory=r,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=t,this.ready=!1,this.reconnect=n,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=o,this.rest_options=s,this.current_reconnects=0,this.generate_request_id=u||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),f?this.dataPack=f:this.dataPack=new r_,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(r,e,t,n){return!n&&typeof t=="object"&&(n=t,t=null),new Promise((i,o)=>{if(!this.ready)return o(new Error("socket not ready"));let s=this.generate_request_id(r,e),u={jsonrpc:"2.0",method:r,params:e||void 0,id:s};this.socket.send(this.dataPack.encode(u),n,f=>{if(f)return o(f);this.queue[s]={promise:[i,o]},t&&(this.queue[s].timeout=setTimeout(()=>{delete this.queue[s],o(new Error("reply timeout"))},t))})})}async login(r){let e=await this.call("rpc.login",r);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(r,e){return new Promise((t,n)=>{if(!this.ready)return n(new Error("socket not ready"));let i={jsonrpc:"2.0",method:r,params:e};this.socket.send(this.dataPack.encode(i),o=>{if(o)return n(o);t()})})}async subscribe(r){typeof r=="string"&&(r=[r]);let e=await this.call("rpc.on",r);if(typeof r=="string"&&e[r]!=="ok")throw new Error("Failed subscribing to an event '"+r+"' with: "+e[r]);return e}async unsubscribe(r){typeof r=="string"&&(r=[r]);let e=await this.call("rpc.off",r);if(typeof r=="string"&&e[r]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(r,e){this.socket&&this.socket.close(r||1e3,e)}setAutoReconnect(r){this.reconnect=r}setReconnectInterval(r){this.reconnect_interval=r}setMaxReconnects(r){this.max_reconnects=r}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return this.reconnect_timer_id!==void 0}willReconnect(){return this.reconnect&&(this.max_reconnects===0||this.current_reconnects<this.max_reconnects)}_connect(r,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(r,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:t})=>{t instanceof ArrayBuffer&&(t=cl.Buffer.from(t).toString());try{t=this.dataPack.decode(t)}catch{return}if(t.notification&&this.listeners(t.notification).length){if(!Object.keys(t.params).length)return this.emit(t.notification);let n=[t.notification];if(t.params.constructor===Object)n.push(t.params);else for(let i=0;i<t.params.length;i++)n.push(t.params[i]);return Promise.resolve().then(()=>{this.emit.apply(this,n)})}if(!this.queue[t.id])return t.method?Promise.resolve().then(()=>{this.emit(t.method,t?.params)}):void 0;"error"in t=="result"in t&&this.queue[t.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[t.id].timeout&&clearTimeout(this.queue[t.id].timeout),t.error?this.queue[t.id].promise[1](t.error):this.queue[t.id].promise[0](t.result),delete this.queue[t.id]}),this.socket.addEventListener("error",t=>this.emit("error",t)),this.socket.addEventListener("close",({code:t,reason:n})=>{this.ready&&setTimeout(()=>this.emit("close",t,n),0),this.ready=!1,this.socket=void 0,t!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)?this.reconnect_timer_id=setTimeout(()=>this._connect(r,e),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",t,n),1))})}};var n_=BigInt(0),wi=BigInt(1),i_=BigInt(2),o_=BigInt(7),s_=BigInt(256),a_=BigInt(113),dl=[],pl=[],gl=[];for(let r=0,e=wi,t=1,n=0;r<24;r++){[t,n]=[n,(2*t+3*n)%5],dl.push(2*(5*n+t)),pl.push((r+1)*(r+2)/2%64);let i=n_;for(let o=0;o<7;o++)e=(e<<wi^(e>>o_)*a_)%s_,e&i_&&(i^=wi<<(wi<<BigInt(o))-wi);gl.push(i)}var yl=zi(gl,!0),c_=yl[0],u_=yl[1],ll=(r,e,t)=>t>32?Su(r,e,t):Eu(r,e,t),hl=(r,e,t)=>t>32?Au(r,e,t):Ru(r,e,t);function f_(r,e=24){let t=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let s=0;s<10;s++)t[s]=r[s]^r[s+10]^r[s+20]^r[s+30]^r[s+40];for(let s=0;s<10;s+=2){let u=(s+8)%10,f=(s+2)%10,w=t[f],R=t[f+1],S=ll(w,R,1)^t[u],I=hl(w,R,1)^t[u+1];for(let x=0;x<50;x+=10)r[s+x]^=S,r[s+x+1]^=I}let i=r[2],o=r[3];for(let s=0;s<24;s++){let u=pl[s],f=ll(i,o,u),w=hl(i,o,u),R=dl[s];i=r[R],o=r[R+1],r[R]=f,r[R+1]=w}for(let s=0;s<50;s+=10){for(let u=0;u<10;u++)t[u]=r[s+u];for(let u=0;u<10;u++)r[s+u]^=~t[(u+2)%10]&t[(u+4)%10]}r[0]^=c_[n],r[1]^=u_[n]}Vt(t)}var Ka=class r extends Nr{constructor(e,t,n,i=!1,o=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=i,this.rounds=o,Or(n),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=yu(this.state)}clone(){return this._cloneInto()}keccak(){zs(this.state32),f_(this.state32,this.rounds),zs(this.state32),this.posOut=0,this.pos=0}update(e){lr(this),e=nn(e),gt(e);let{blockLen:t,state:n}=this,i=e.length;for(let o=0;o<i;){let s=Math.min(t-this.pos,i-o);for(let u=0;u<s;u++)n[this.pos++]^=e[o++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:n,blockLen:i}=this;e[n]^=t,(t&128)!==0&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){lr(this,!1),gt(e),this.finish();let t=this.state,{blockLen:n}=this;for(let i=0,o=e.length;i<o;){this.posOut>=n&&this.keccak();let s=Math.min(n-this.posOut,o-i);e.set(t.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Or(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Pi(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Vt(this.state)}_cloneInto(e){let{blockLen:t,suffix:n,outputLen:i,rounds:o,enableXOF:s}=this;return e||(e=new r(t,n,i,s,o)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=n,e.outputLen=i,e.enableXOF=s,e.destroyed=this.destroyed,e}},l_=(r,e,t)=>Jn(()=>new Ka(e,r,t));var qa=l_(1,136,256/8);var Bo=class extends Nr{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Mi(e);let n=nn(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?e.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=e.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),Vt(o)}update(e){return lr(this),this.iHash.update(e),this}digestInto(e){lr(this),gt(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:u}=this;return e=e,e.finished=i,e.destroyed=o,e.blockLen=s,e.outputLen=u,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Ha=(r,e,t)=>new Bo(r,e).update(t).digest();Ha.create=(r,e)=>new Bo(r,e);var ml=(r,e)=>(r+(r>=0?e:-e)/_l)/e;function h_(r,e,t){let[[n,i],[o,s]]=e,u=ml(s*r,t),f=ml(-i*r,t),w=r-u*n-f*o,R=-u*i-f*s,S=w<Rr,I=R<Rr;S&&(w=-w),I&&(R=-R);let x=Lr(Math.ceil(Hi(t)/2))+Kn;if(w<Rr||w>=x||R<Rr||R>=x)throw new Error("splitScalar (endomorphism): failed, k="+r);return{k1neg:S,k1:w,k2neg:I,k2:R}}function $a(r){if(!["compact","recovered","der"].includes(r))throw new Error('Signature format must be "compact", "recovered", or "der"');return r}function Va(r,e){let t={};for(let n of Object.keys(e))t[n]=r[n]===void 0?e[n]:r[n];return dr(t.lowS,"lowS"),dr(t.prehash,"prehash"),t.format!==void 0&&$a(t.format),t}var Wa=class extends Error{constructor(e=""){super(e)}},Er={Err:Wa,_tlv:{encode:(r,e)=>{let{Err:t}=Er;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");let n=e.length/2,i=ri(n);if(i.length/2&128)throw new t("tlv.encode: long form length too big");let o=n>127?ri(i.length/2|128):"";return ri(r)+o+i+e},decode(r,e){let{Err:t}=Er,n=0;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[n++]!==r)throw new t("tlv.decode: wrong tlv");let i=e[n++],o=!!(i&128),s=0;if(!o)s=i;else{let f=i&127;if(!f)throw new t("tlv.decode(long): indefinite length not supported");if(f>4)throw new t("tlv.decode(long): byte length is too big");let w=e.subarray(n,n+f);if(w.length!==f)throw new t("tlv.decode: length bytes not complete");if(w[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(let R of w)s=s<<8|R;if(n+=f,s<128)throw new t("tlv.decode(long): not minimal encoding")}let u=e.subarray(n,n+s);if(u.length!==s)throw new t("tlv.decode: wrong value length");return{v:u,l:e.subarray(n+s)}}},_int:{encode(r){let{Err:e}=Er;if(r<Rr)throw new e("integer: negative integers are not allowed");let t=ri(r);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(r){let{Err:e}=Er;if(r[0]&128)throw new e("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return On(r)}},toSig(r){let{Err:e,_int:t,_tlv:n}=Er,i=be("signature",r),{v:o,l:s}=n.decode(48,i);if(s.length)throw new e("invalid signature: left bytes after parsing");let{v:u,l:f}=n.decode(2,o),{v:w,l:R}=n.decode(2,f);if(R.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(u),s:t.decode(w)}},hexFromSig(r){let{_tlv:e,_int:t}=Er,n=e.encode(2,t.encode(r.r)),i=e.encode(2,t.encode(r.s)),o=n+i;return e.encode(48,o)}},Rr=BigInt(0),Kn=BigInt(1),_l=BigInt(2),To=BigInt(3),d_=BigInt(4);function Fn(r,e){let{BYTES:t}=r,n;if(typeof e=="bigint")n=e;else{let i=be("private key",e);try{n=r.fromBytes(i)}catch{throw new Error(`invalid private key: expected ui8a of size ${t}, got ${typeof e}`)}}if(!r.isValidNot0(n))throw new Error("invalid private key: out of range [1..N-1]");return n}function p_(r,e={}){let t=$i("weierstrass",r,e),{Fp:n,Fn:i}=t,o=t.CURVE,{h:s,n:u}=o;Cr(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});let{endo:f}=e;if(f&&(!n.is0(o.a)||typeof f.beta!="bigint"||!Array.isArray(f.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');let w=bl(n,i);function R(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function S(N,p,a){let{x:c,y:l}=p.toAffine(),d=n.toBytes(c);if(dr(a,"isCompressed"),a){R();let g=!n.isOdd(l);return Nt(wl(g),d)}else return Nt(Uint8Array.of(4),d,n.toBytes(l))}function I(N){Ut(N,void 0,"Point");let{publicKey:p,publicKeyUncompressed:a}=w,c=N.length,l=N[0],d=N.subarray(1);if(c===p&&(l===2||l===3)){let g=n.fromBytes(d);if(!n.isValid(g))throw new Error("bad point: is not on curve, wrong x");let m=T(g),A;try{A=n.sqrt(m)}catch(E){let K=E instanceof Error?": "+E.message:"";throw new Error("bad point: is not on curve, sqrt error"+K)}R();let y=n.isOdd(A);return(l&1)===1!==y&&(A=n.neg(A)),{x:g,y:A}}else if(c===a&&l===4){let g=n.BYTES,m=n.fromBytes(d.subarray(0,g)),A=n.fromBytes(d.subarray(g,g*2));if(!P(m,A))throw new Error("bad point: is not on curve");return{x:m,y:A}}else throw new Error(`bad point: got length ${c}, expected compressed=${p} or uncompressed=${a}`)}let x=e.toBytes||S,k=e.fromBytes||I;function T(N){let p=n.sqr(N),a=n.mul(p,N);return n.add(n.add(a,n.mul(N,o.a)),o.b)}function P(N,p){let a=n.sqr(p),c=T(N);return n.eql(a,c)}if(!P(o.Gx,o.Gy))throw new Error("bad curve params: generator point");let C=n.mul(n.pow(o.a,To),d_),L=n.mul(n.sqr(o.b),BigInt(27));if(n.is0(n.add(C,L)))throw new Error("bad curve params: a or b");function F(N,p,a=!1){if(!n.isValid(p)||a&&n.is0(p))throw new Error(`bad point coordinate ${N}`);return p}function V(N){if(!(N instanceof _))throw new Error("ProjectivePoint expected")}function Q(N){if(!f||!f.basises)throw new Error("no endo");return h_(N,f.basises,i.ORDER)}let j=Nn((N,p)=>{let{X:a,Y:c,Z:l}=N;if(n.eql(l,n.ONE))return{x:a,y:c};let d=N.is0();p==null&&(p=d?n.ONE:n.inv(l));let g=n.mul(a,p),m=n.mul(c,p),A=n.mul(l,p);if(d)return{x:n.ZERO,y:n.ZERO};if(!n.eql(A,n.ONE))throw new Error("invZ was invalid");return{x:g,y:m}}),ee=Nn(N=>{if(N.is0()){if(e.allowInfinityPoint&&!n.is0(N.Y))return;throw new Error("bad point: ZERO")}let{x:p,y:a}=N.toAffine();if(!n.isValid(p)||!n.isValid(a))throw new Error("bad point: x or y not field elements");if(!P(p,a))throw new Error("bad point: equation left != right");if(!N.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function b(N,p,a,c,l){return a=new _(n.mul(a.X,N),a.Y,a.Z),p=oi(c,p),a=oi(l,a),p.add(a)}class _{constructor(p,a,c){this.X=F("x",p),this.Y=F("y",a,!0),this.Z=F("z",c),Object.freeze(this)}static CURVE(){return o}static fromAffine(p){let{x:a,y:c}=p||{};if(!p||!n.isValid(a)||!n.isValid(c))throw new Error("invalid affine point");if(p instanceof _)throw new Error("projective point not allowed");return n.is0(a)&&n.is0(c)?_.ZERO:new _(a,c,n.ONE)}static fromBytes(p){let a=_.fromAffine(k(Ut(p,void 0,"point")));return a.assertValidity(),a}static fromHex(p){return _.fromBytes(be("pointHex",p))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(p=8,a=!0){return B.createCache(this,p),a||this.multiply(To),this}assertValidity(){ee(this)}hasEvenY(){let{y:p}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(p)}equals(p){V(p);let{X:a,Y:c,Z:l}=this,{X:d,Y:g,Z:m}=p,A=n.eql(n.mul(a,m),n.mul(d,l)),y=n.eql(n.mul(c,m),n.mul(g,l));return A&&y}negate(){return new _(this.X,n.neg(this.Y),this.Z)}double(){let{a:p,b:a}=o,c=n.mul(a,To),{X:l,Y:d,Z:g}=this,m=n.ZERO,A=n.ZERO,y=n.ZERO,h=n.mul(l,l),E=n.mul(d,d),K=n.mul(g,g),z=n.mul(l,d);return z=n.add(z,z),y=n.mul(l,g),y=n.add(y,y),m=n.mul(p,y),A=n.mul(c,K),A=n.add(m,A),m=n.sub(E,A),A=n.add(E,A),A=n.mul(m,A),m=n.mul(z,m),y=n.mul(c,y),K=n.mul(p,K),z=n.sub(h,K),z=n.mul(p,z),z=n.add(z,y),y=n.add(h,h),h=n.add(y,h),h=n.add(h,K),h=n.mul(h,z),A=n.add(A,h),K=n.mul(d,g),K=n.add(K,K),h=n.mul(K,z),m=n.sub(m,h),y=n.mul(K,E),y=n.add(y,y),y=n.add(y,y),new _(m,A,y)}add(p){V(p);let{X:a,Y:c,Z:l}=this,{X:d,Y:g,Z:m}=p,A=n.ZERO,y=n.ZERO,h=n.ZERO,E=o.a,K=n.mul(o.b,To),z=n.mul(a,d),q=n.mul(c,g),G=n.mul(l,m),ne=n.add(a,c),re=n.add(d,g);ne=n.mul(ne,re),re=n.add(z,q),ne=n.sub(ne,re),re=n.add(a,l);let _e=n.add(d,m);return re=n.mul(re,_e),_e=n.add(z,G),re=n.sub(re,_e),_e=n.add(c,l),A=n.add(g,m),_e=n.mul(_e,A),A=n.add(q,G),_e=n.sub(_e,A),h=n.mul(E,re),A=n.mul(K,G),h=n.add(A,h),A=n.sub(q,h),h=n.add(q,h),y=n.mul(A,h),q=n.add(z,z),q=n.add(q,z),G=n.mul(E,G),re=n.mul(K,re),q=n.add(q,G),G=n.sub(z,G),G=n.mul(E,G),re=n.add(re,G),z=n.mul(q,re),y=n.add(y,z),z=n.mul(_e,re),A=n.mul(ne,A),A=n.sub(A,z),z=n.mul(ne,q),h=n.mul(_e,h),h=n.add(h,z),new _(A,y,h)}subtract(p){return this.add(p.negate())}is0(){return this.equals(_.ZERO)}multiply(p){let{endo:a}=e;if(!i.isValidNot0(p))throw new Error("invalid scalar: out of range");let c,l,d=g=>B.cached(this,g,m=>yr(_,m));if(a){let{k1neg:g,k1:m,k2neg:A,k2:y}=Q(p),{p:h,f:E}=d(m),{p:K,f:z}=d(y);l=E.add(z),c=b(a.beta,h,K,g,A)}else{let{p:g,f:m}=d(p);c=g,l=m}return yr(_,[c,l])[0]}multiplyUnsafe(p){let{endo:a}=e,c=this;if(!i.isValid(p))throw new Error("invalid scalar: out of range");if(p===Rr||c.is0())return _.ZERO;if(p===Kn)return c;if(B.hasCache(this))return this.multiply(p);if(a){let{k1neg:l,k1:d,k2neg:g,k2:m}=Q(p),{p1:A,p2:y}=Ju(_,c,d,m);return b(a.beta,A,y,l,g)}else return B.unsafe(c,p)}multiplyAndAddUnsafe(p,a,c){let l=this.multiplyUnsafe(a).add(p.multiplyUnsafe(c));return l.is0()?void 0:l}toAffine(p){return j(this,p)}isTorsionFree(){let{isTorsionFree:p}=e;return s===Kn?!0:p?p(_,this):B.unsafe(this,u).is0()}clearCofactor(){let{clearCofactor:p}=e;return s===Kn?this:p?p(_,this):this.multiplyUnsafe(s)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}toBytes(p=!0){return dr(p,"isCompressed"),this.assertValidity(),x(_,this,p)}toHex(p=!0){return $t(this.toBytes(p))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(p=!0){return this.toBytes(p)}_setWindowSize(p){this.precompute(p)}static normalizeZ(p){return yr(_,p)}static msm(p,a){return Tn(_,i,p,a)}static fromPrivateKey(p){return _.BASE.multiply(Fn(i,p))}}_.BASE=new _(o.Gx,o.Gy,n.ONE),_.ZERO=new _(n.ZERO,n.ONE,n.ZERO),_.Fp=n,_.Fn=i;let v=i.BITS,B=new Bn(_,e.endo?Math.ceil(v/2):v);return _.BASE.precompute(8),_}function wl(r){return Uint8Array.of(r?2:3)}function bl(r,e){return{secretKey:e.BYTES,publicKey:1+r.BYTES,publicKeyUncompressed:1+2*r.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function g_(r,e={}){let{Fn:t}=r,n=e.randomBytes||In,i=Object.assign(bl(r.Fp,t),{seed:Js(t.ORDER)});function o(x){try{return!!Fn(t,x)}catch{return!1}}function s(x,k){let{publicKey:T,publicKeyUncompressed:P}=i;try{let C=x.length;return k===!0&&C!==T||k===!1&&C!==P?!1:!!r.fromBytes(x)}catch{return!1}}function u(x=n(i.seed)){return Qs(Ut(x,i.seed,"seed"),t.ORDER)}function f(x,k=!0){return r.BASE.multiply(Fn(t,x)).toBytes(k)}function w(x){let k=u(x);return{secretKey:k,publicKey:f(k)}}function R(x){if(typeof x=="bigint")return!1;if(x instanceof r)return!0;let{secretKey:k,publicKey:T,publicKeyUncompressed:P}=i;if(t.allowedLengths||k===T)return;let C=be("key",x).length;return C===T||C===P}function S(x,k,T=!0){if(R(x)===!0)throw new Error("first arg must be private key");if(R(k)===!1)throw new Error("second arg must be public key");let P=Fn(t,x);return r.fromHex(k).multiply(P).toBytes(T)}return Object.freeze({getPublicKey:f,getSharedSecret:S,keygen:w,Point:r,utils:{isValidSecretKey:o,isValidPublicKey:s,randomSecretKey:u,isValidPrivateKey:o,randomPrivateKey:u,normPrivateKeyToScalar:x=>Fn(t,x),precompute(x=8,k=r.BASE){return k.precompute(x,!1)}},lengths:i})}function y_(r,e,t={}){Mi(e),Cr(t,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});let n=t.randomBytes||In,i=t.hmac||((a,...c)=>Ha(e,a,Nt(...c))),{Fp:o,Fn:s}=r,{ORDER:u,BITS:f}=s,{keygen:w,getPublicKey:R,getSharedSecret:S,utils:I,lengths:x}=g_(r,t),k={prehash:!1,lowS:typeof t.lowS=="boolean"?t.lowS:!1,format:void 0,extraEntropy:!1},T="compact";function P(a){let c=u>>Kn;return a>c}function C(a,c){if(!s.isValidNot0(c))throw new Error(`invalid signature ${a}: out of range 1..Point.Fn.ORDER`);return c}function L(a,c){$a(c);let l=x.signature,d=c==="compact"?l:c==="recovered"?l+1:void 0;return Ut(a,d,`${c} signature`)}class F{constructor(c,l,d){this.r=C("r",c),this.s=C("s",l),d!=null&&(this.recovery=d),Object.freeze(this)}static fromBytes(c,l=T){L(c,l);let d;if(l==="der"){let{r:y,s:h}=Er.toSig(Ut(c));return new F(y,h)}l==="recovered"&&(d=c[0],l="compact",c=c.subarray(1));let g=s.BYTES,m=c.subarray(0,g),A=c.subarray(g,g*2);return new F(s.fromBytes(m),s.fromBytes(A),d)}static fromHex(c,l){return this.fromBytes(rn(c),l)}addRecoveryBit(c){return new F(this.r,this.s,c)}recoverPublicKey(c){let l=o.ORDER,{r:d,s:g,recovery:m}=this;if(m==null||![0,1,2,3].includes(m))throw new Error("recovery id invalid");if(u*_l<l&&m>1)throw new Error("recovery id is ambiguous for h>1 curve");let y=m===2||m===3?d+u:d;if(!o.isValid(y))throw new Error("recovery id 2 or 3 invalid");let h=o.toBytes(y),E=r.fromBytes(Nt(wl((m&1)===0),h)),K=s.inv(y),z=Q(be("msgHash",c)),q=s.create(-z*K),G=s.create(g*K),ne=r.BASE.multiplyUnsafe(q).add(E.multiplyUnsafe(G));if(ne.is0())throw new Error("point at infinify");return ne.assertValidity(),ne}hasHighS(){return P(this.s)}toBytes(c=T){if($a(c),c==="der")return rn(Er.hexFromSig(this));let l=s.toBytes(this.r),d=s.toBytes(this.s);if(c==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Nt(Uint8Array.of(this.recovery),l,d)}return Nt(l,d)}toHex(c){return $t(this.toBytes(c))}assertValidity(){}static fromCompact(c){return F.fromBytes(be("sig",c),"compact")}static fromDER(c){return F.fromBytes(be("sig",c),"der")}normalizeS(){return this.hasHighS()?new F(this.r,s.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return $t(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return $t(this.toBytes("compact"))}}let V=t.bits2int||function(c){if(c.length>8192)throw new Error("input is too large");let l=On(c),d=c.length*8-f;return d>0?l>>BigInt(d):l},Q=t.bits2int_modN||function(c){return s.create(V(c))},j=Lr(f);function ee(a){return ni("num < 2^"+f,a,Rr,j),s.toBytes(a)}function b(a,c){return Ut(a,void 0,"message"),c?Ut(e(a),void 0,"prehashed message"):a}function _(a,c,l){if(["recovered","canonical"].some(q=>q in l))throw new Error("sign() legacy options not supported");let{lowS:d,prehash:g,extraEntropy:m}=Va(l,k);a=b(a,g);let A=Q(a),y=Fn(s,c),h=[ee(y),ee(A)];if(m!=null&&m!==!1){let q=m===!0?n(x.secretKey):m;h.push(be("extraEntropy",q))}let E=Nt(...h),K=A;function z(q){let G=V(q);if(!s.isValidNot0(G))return;let ne=s.inv(G),re=r.BASE.multiply(G).toAffine(),_e=s.create(re.x);if(_e===Rr)return;let ae=s.create(ne*s.create(K+_e*y));if(ae===Rr)return;let de=(re.x===_e?0:2)|Number(re.y&Kn),ct=ae;return d&&P(ae)&&(ct=s.neg(ae),de^=1),new F(_e,ct,de)}return{seed:E,k2sig:z}}function v(a,c,l={}){a=be("message",a);let{seed:d,k2sig:g}=_(a,c,l);return Pu(e.outputLen,s.BYTES,i)(d,g)}function B(a){let c,l=typeof a=="string"||fr(a),d=!l&&a!==null&&typeof a=="object"&&typeof a.r=="bigint"&&typeof a.s=="bigint";if(!l&&!d)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(d)c=new F(a.r,a.s);else if(l){try{c=F.fromBytes(be("sig",a),"der")}catch(g){if(!(g instanceof Er.Err))throw g}if(!c)try{c=F.fromBytes(be("sig",a),"compact")}catch{return!1}}return c||!1}function N(a,c,l,d={}){let{lowS:g,prehash:m,format:A}=Va(d,k);if(l=be("publicKey",l),c=b(be("message",c),m),"strict"in d)throw new Error("options.strict was renamed to lowS");let y=A===void 0?B(a):F.fromBytes(be("sig",a),A);if(y===!1)return!1;try{let h=r.fromBytes(l);if(g&&y.hasHighS())return!1;let{r:E,s:K}=y,z=Q(c),q=s.inv(K),G=s.create(z*q),ne=s.create(E*q),re=r.BASE.multiplyUnsafe(G).add(h.multiplyUnsafe(ne));return re.is0()?!1:s.create(re.x)===E}catch{return!1}}function p(a,c,l={}){let{prehash:d}=Va(l,k);return c=b(c,d),F.fromBytes(a,"recovered").recoverPublicKey(c).toBytes()}return Object.freeze({keygen:w,getPublicKey:R,getSharedSecret:S,utils:I,lengths:x,Point:r,sign:v,verify:N,recoverPublicKey:p,Signature:F,hash:e})}function m_(r){let e={a:r.a,b:r.b,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},t=r.Fp,n=r.allowedPrivateKeyLengths?Array.from(new Set(r.allowedPrivateKeyLengths.map(s=>Math.ceil(s/2)))):void 0,i=Dt(e.n,{BITS:r.nBitLength,allowedLengths:n,modFromBytes:r.wrapPrivateKey}),o={Fp:t,Fn:i,allowInfinityPoint:r.allowInfinityPoint,endo:r.endo,isTorsionFree:r.isTorsionFree,clearCofactor:r.clearCofactor,fromBytes:r.fromBytes,toBytes:r.toBytes};return{CURVE:e,curveOpts:o}}function __(r){let{CURVE:e,curveOpts:t}=m_(r),n={hmac:r.hmac,randomBytes:r.randomBytes,lowS:r.lowS,bits2int:r.bits2int,bits2int_modN:r.bits2int_modN};return{CURVE:e,curveOpts:t,hash:r.hash,ecdsaOpts:n}}function w_(r,e){let t=e.Point;return Object.assign({},e,{ProjectivePoint:t,CURVE:Object.assign({},r,Vi(t.Fn.ORDER,t.Fn.BITS))})}function El(r){let{CURVE:e,curveOpts:t,hash:n,ecdsaOpts:i}=__(r),o=p_(e,t),s=y_(o,n,i);return w_(r,s)}function Rl(r,e){let t=n=>El({...r,hash:n});return{...t(e),create:t}}var Ya={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},b_={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]};var Sl=BigInt(2);function E_(r){let e=Ya.p,t=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),u=BigInt(44),f=BigInt(88),w=r*r*r%e,R=w*w*r%e,S=Se(R,t,e)*R%e,I=Se(S,t,e)*R%e,x=Se(I,Sl,e)*w%e,k=Se(x,i,e)*x%e,T=Se(k,o,e)*k%e,P=Se(T,u,e)*T%e,C=Se(P,f,e)*P%e,L=Se(C,u,e)*T%e,F=Se(L,t,e)*R%e,V=Se(F,s,e)*k%e,Q=Se(V,n,e)*w%e,j=Se(Q,Sl,e);if(!Ga.eql(Ga.sqr(j),r))throw new Error("Cannot find square root");return j}var Ga=Dt(Ya.p,{sqrt:E_}),Lo=Rl({...Ya,Fp:Ga,lowS:!0,endo:b_},Ki);var jE=Ct.utils.randomPrivateKey,Al=()=>{let r=Ct.utils.randomPrivateKey(),e=ic(r),t=new Uint8Array(64);return t.set(r),t.set(e,32),{publicKey:e,secretKey:t}},ic=Ct.getPublicKey;function xl(r){try{return Ct.ExtendedPoint.fromHex(r),!0}catch{return!1}}var mc=(r,e)=>Ct.sign(r,e.slice(0,32)),R_=Ct.verify,le=r=>ie.Buffer.isBuffer(r)?r:r instanceof Uint8Array?ie.Buffer.from(r.buffer,r.byteOffset,r.byteLength):ie.Buffer.from(r),oc=class{constructor(e){Object.assign(this,e)}encode(){return ie.Buffer.from((0,Wn.serialize)(Po,this))}static decode(e){return(0,Wn.deserialize)(Po,this,e)}static decodeUnchecked(e){return(0,Wn.deserializeUnchecked)(Po,this,e)}};var Po=new Map,Vl,S_=32,$r=32;function A_(r){return r._bn!==void 0}var vl=1,Z=class r extends oc{constructor(e){if(super({}),this._bn=void 0,A_(e))this._bn=e._bn;else{if(typeof e=="string"){let t=dt.default.decode(e);if(t.length!=$r)throw new Error("Invalid public key input");this._bn=new nc.default(t)}else this._bn=new nc.default(e);if(this._bn.byteLength()>$r)throw new Error("Invalid public key input")}}static unique(){let e=new r(vl);return vl+=1,new r(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return dt.default.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){let e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){let e=this._bn.toArrayLike(ie.Buffer);if(e.length===$r)return e;let t=ie.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,n){let i=ie.Buffer.concat([e.toBuffer(),ie.Buffer.from(t),n.toBuffer()]),o=ha(i);return new r(o)}static createProgramAddressSync(e,t){let n=ie.Buffer.alloc(0);e.forEach(function(o){if(o.length>S_)throw new TypeError("Max seed length exceeded");n=ie.Buffer.concat([n,le(o)])}),n=ie.Buffer.concat([n,t.toBuffer(),ie.Buffer.from("ProgramDerivedAddress")]);let i=ha(n);if(xl(i))throw new Error("Invalid seeds, address must fall off the curve");return new r(i)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let n=255,i;for(;n!=0;){try{let o=e.concat(ie.Buffer.from([n]));i=this.createProgramAddressSync(o,t)}catch(o){if(o instanceof TypeError)throw o;n--;continue}return[i,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){let t=new r(e);return xl(t.toBytes())}};Vl=Z;Z.default=new Vl("11111111111111111111111111111111");Po.set(Z,{kind:"struct",fields:[["_bn","u256"]]});var ZE=new Z("BPFLoader1111111111111111111111111111111111"),yn=1232,_c=127,Uo=64,Do=class extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}};Object.defineProperty(Do.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});var zo=class extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}};Object.defineProperty(zo.prototype,"name",{value:"TransactionExpiredTimeoutError"});var gn=class extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}};Object.defineProperty(gn.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});var Hn=class{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){let e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(let t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");let n=new Map;this.keySegments().flat().forEach((o,s)=>{n.set(o.toBase58(),s)});let i=o=>{let s=n.get(o.toBase58());if(s===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return s};return e.map(o=>({programIdIndex:i(o.programId),accountKeyIndexes:o.keys.map(s=>i(s.pubkey)),data:o.data}))}},ue=(r="publicKey")=>O.blob(32,r),x_=(r="signature")=>O.blob(64,r),qn=(r="string")=>{let e=O.struct([O.u32("length"),O.u32("lengthPadding"),O.blob(O.offset(O.u32(),-8),"chars")],r),t=e.decode.bind(e),n=e.encode.bind(e),i=e;return i.decode=(o,s)=>t(o,s).chars.toString(),i.encode=(o,s,u)=>{let f={chars:ie.Buffer.from(o,"utf8")};return n(f,s,u)},i.alloc=o=>O.u32().span+O.u32().span+ie.Buffer.from(o,"utf8").length,i},v_=(r="authorized")=>O.struct([ue("staker"),ue("withdrawer")],r),I_=(r="lockup")=>O.struct([O.ns64("unixTimestamp"),O.ns64("epoch"),ue("custodian")],r),O_=(r="voteInit")=>O.struct([ue("nodePubkey"),ue("authorizedVoter"),ue("authorizedWithdrawer"),O.u8("commission")],r),N_=(r="voteAuthorizeWithSeedArgs")=>O.struct([O.u32("voteAuthorizationType"),ue("currentAuthorityDerivedKeyOwnerPubkey"),qn("currentAuthorityDerivedKeySeed"),ue("newAuthorized")],r);function $l(r,e){let t=i=>{if(i.span>=0)return i.span;if(typeof i.alloc=="function")return i.alloc(e[i.property]);if("count"in i&&"elementLayout"in i){let o=e[i.property];if(Array.isArray(o))return o.length*t(i.elementLayout)}else if("fields"in i)return $l({layout:i},e[i.property]);return 0},n=0;return r.layout.fields.forEach(i=>{n+=t(i)}),n}function Ft(r){let e=0,t=0;for(;;){let n=r.shift();if(e|=(n&127)<<t*7,t+=1,(n&128)===0)break}return e}function Kt(r,e){let t=e;for(;;){let n=t&127;if(t>>=7,t==0){r.push(n);break}else n|=128,r.push(n)}}function ge(r,e){if(!r)throw new Error(e||"Assertion failed")}var Fo=class r{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){let n=new Map,i=s=>{let u=s.toBase58(),f=n.get(u);return f===void 0&&(f={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(u,f)),f},o=i(t);o.isSigner=!0,o.isWritable=!0;for(let s of e){i(s.programId).isInvoked=!0;for(let u of s.keys){let f=i(u.pubkey);f.isSigner||=u.isSigner,f.isWritable||=u.isWritable}}return new r(t,n)}getMessageComponents(){let e=[...this.keyMetaMap.entries()];ge(e.length<=256,"Max static account keys length exceeded");let t=e.filter(([,f])=>f.isSigner&&f.isWritable),n=e.filter(([,f])=>f.isSigner&&!f.isWritable),i=e.filter(([,f])=>!f.isSigner&&f.isWritable),o=e.filter(([,f])=>!f.isSigner&&!f.isWritable),s={numRequiredSignatures:t.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:o.length};{ge(t.length>0,"Expected at least one writable signer key");let[f]=t[0];ge(f===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}let u=[...t.map(([f])=>new Z(f)),...n.map(([f])=>new Z(f)),...i.map(([f])=>new Z(f)),...o.map(([f])=>new Z(f))];return[s,u]}extractTableLookup(e){let[t,n]=this.drainKeysFoundInLookupTable(e.state.addresses,s=>!s.isSigner&&!s.isInvoked&&s.isWritable),[i,o]=this.drainKeysFoundInLookupTable(e.state.addresses,s=>!s.isSigner&&!s.isInvoked&&!s.isWritable);if(!(t.length===0&&i.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:i},{writable:n,readonly:o}]}drainKeysFoundInLookupTable(e,t){let n=new Array,i=new Array;for(let[o,s]of this.keyMetaMap.entries())if(t(s)){let u=new Z(o),f=e.findIndex(w=>w.equals(u));f>=0&&(ge(f<256,"Max lookup table index exceeded"),n.push(f),i.push(u),this.keyMetaMap.delete(o))}return[n,i]}},Wl="Reached end of buffer unexpectedly";function Ar(r){if(r.length===0)throw new Error(Wl);return r.shift()}function qt(r,...e){let[t]=e;if(e.length===2?t+(e[1]??0)>r.length:t>=r.length)throw new Error(Wl);return r.splice(...e)}var xr=class r{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new Z(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:dt.default.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Hn(this.staticAccountKeys)}static compile(e){let t=Fo.compile(e.instructions,e.payerKey),[n,i]=t.getMessageComponents(),s=new Hn(i).compileInstructions(e.instructions).map(u=>({programIdIndex:u.programIdIndex,accounts:u.accountKeyIndexes,data:dt.default.encode(u.data)}));return new r({header:n,accountKeys:i,recentBlockhash:e.recentBlockhash,instructions:s})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){let t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){let n=e-t,o=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return n<o}else{let n=t-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){let e=this.accountKeys.length,t=[];Kt(t,e);let n=this.instructions.map(S=>{let{accounts:I,programIdIndex:x}=S,k=Array.from(dt.default.decode(S.data)),T=[];Kt(T,I.length);let P=[];return Kt(P,k.length),{programIdIndex:x,keyIndicesCount:ie.Buffer.from(T),keyIndices:I,dataLength:ie.Buffer.from(P),data:k}}),i=[];Kt(i,n.length);let o=ie.Buffer.alloc(yn);ie.Buffer.from(i).copy(o);let s=i.length;n.forEach(S=>{let x=O.struct([O.u8("programIdIndex"),O.blob(S.keyIndicesCount.length,"keyIndicesCount"),O.seq(O.u8("keyIndex"),S.keyIndices.length,"keyIndices"),O.blob(S.dataLength.length,"dataLength"),O.seq(O.u8("userdatum"),S.data.length,"data")]).encode(S,o,s);s+=x}),o=o.slice(0,s);let u=O.struct([O.blob(1,"numRequiredSignatures"),O.blob(1,"numReadonlySignedAccounts"),O.blob(1,"numReadonlyUnsignedAccounts"),O.blob(t.length,"keyCount"),O.seq(ue("key"),e,"keys"),ue("recentBlockhash")]),f={numRequiredSignatures:ie.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:ie.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:ie.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:ie.Buffer.from(t),keys:this.accountKeys.map(S=>le(S.toBytes())),recentBlockhash:dt.default.decode(this.recentBlockhash)},w=ie.Buffer.alloc(2048),R=u.encode(f,w);return o.copy(w,R),w.slice(0,R+o.length)}static from(e){let t=[...e],n=Ar(t);if(n!==(n&_c))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");let i=Ar(t),o=Ar(t),s=Ft(t),u=[];for(let I=0;I<s;I++){let x=qt(t,0,$r);u.push(new Z(ie.Buffer.from(x)))}let f=qt(t,0,$r),w=Ft(t),R=[];for(let I=0;I<w;I++){let x=Ar(t),k=Ft(t),T=qt(t,0,k),P=Ft(t),C=qt(t,0,P),L=dt.default.encode(ie.Buffer.from(C));R.push({programIdIndex:x,accounts:T,data:L})}let S={header:{numRequiredSignatures:n,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:o},recentBlockhash:dt.default.encode(ie.Buffer.from(f)),accountKeys:u,instructions:R};return new r(S)}},Si=class r{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(let t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Hn(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){let t=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){let i=e-n,o=this.addressTableLookups.reduce((s,u)=>s+u.writableIndexes.length,0);return i<o}else if(e>=this.header.numRequiredSignatures){let i=e-t,s=n-t-this.header.numReadonlyUnsignedAccounts;return i<s}else{let i=t-this.header.numReadonlySignedAccounts;return e<i}}resolveAddressTableLookups(e){let t={writable:[],readonly:[]};for(let n of this.addressTableLookups){let i=e.find(o=>o.key.equals(n.accountKey));if(!i)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(let o of n.writableIndexes)if(o<i.state.addresses.length)t.writable.push(i.state.addresses[o]);else throw new Error(`Failed to find address for index ${o} in address lookup table ${n.accountKey.toBase58()}`);for(let o of n.readonlyIndexes)if(o<i.state.addresses.length)t.readonly.push(i.state.addresses[o]);else throw new Error(`Failed to find address for index ${o} in address lookup table ${n.accountKey.toBase58()}`)}return t}static compile(e){let t=Fo.compile(e.instructions,e.payerKey),n=new Array,i={writable:new Array,readonly:new Array},o=e.addressLookupTableAccounts||[];for(let R of o){let S=t.extractTableLookup(R);if(S!==void 0){let[I,{writable:x,readonly:k}]=S;n.push(I),i.writable.push(...x),i.readonly.push(...k)}}let[s,u]=t.getMessageComponents(),w=new Hn(u,i).compileInstructions(e.instructions);return new r({header:s,staticAccountKeys:u,recentBlockhash:e.recentBlockhash,compiledInstructions:w,addressTableLookups:n})}serialize(){let e=Array();Kt(e,this.staticAccountKeys.length);let t=this.serializeInstructions(),n=Array();Kt(n,this.compiledInstructions.length);let i=this.serializeAddressTableLookups(),o=Array();Kt(o,this.addressTableLookups.length);let s=O.struct([O.u8("prefix"),O.struct([O.u8("numRequiredSignatures"),O.u8("numReadonlySignedAccounts"),O.u8("numReadonlyUnsignedAccounts")],"header"),O.blob(e.length,"staticAccountKeysLength"),O.seq(ue(),this.staticAccountKeys.length,"staticAccountKeys"),ue("recentBlockhash"),O.blob(n.length,"instructionsLength"),O.blob(t.length,"serializedInstructions"),O.blob(o.length,"addressTableLookupsLength"),O.blob(i.length,"serializedAddressTableLookups")]),u=new Uint8Array(yn),w=s.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(R=>R.toBytes()),recentBlockhash:dt.default.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(o),serializedAddressTableLookups:i},u);return u.slice(0,w)}serializeInstructions(){let e=0,t=new Uint8Array(yn);for(let n of this.compiledInstructions){let i=Array();Kt(i,n.accountKeyIndexes.length);let o=Array();Kt(o,n.data.length);let s=O.struct([O.u8("programIdIndex"),O.blob(i.length,"encodedAccountKeyIndexesLength"),O.seq(O.u8(),n.accountKeyIndexes.length,"accountKeyIndexes"),O.blob(o.length,"encodedDataLength"),O.blob(n.data.length,"data")]);e+=s.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(i),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(o),data:n.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0,t=new Uint8Array(yn);for(let n of this.addressTableLookups){let i=Array();Kt(i,n.writableIndexes.length);let o=Array();Kt(o,n.readonlyIndexes.length);let s=O.struct([ue("accountKey"),O.blob(i.length,"encodedWritableIndexesLength"),O.seq(O.u8(),n.writableIndexes.length,"writableIndexes"),O.blob(o.length,"encodedReadonlyIndexesLength"),O.seq(O.u8(),n.readonlyIndexes.length,"readonlyIndexes")]);e+=s.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(i),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(o),readonlyIndexes:n.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e],n=Ar(t),i=n&_c;ge(n!==i,"Expected versioned message but received legacy message");let o=i;ge(o===0,`Expected versioned message with version 0 but found version ${o}`);let s={numRequiredSignatures:Ar(t),numReadonlySignedAccounts:Ar(t),numReadonlyUnsignedAccounts:Ar(t)},u=[],f=Ft(t);for(let k=0;k<f;k++)u.push(new Z(qt(t,0,$r)));let w=dt.default.encode(qt(t,0,$r)),R=Ft(t),S=[];for(let k=0;k<R;k++){let T=Ar(t),P=Ft(t),C=qt(t,0,P),L=Ft(t),F=new Uint8Array(qt(t,0,L));S.push({programIdIndex:T,accountKeyIndexes:C,data:F})}let I=Ft(t),x=[];for(let k=0;k<I;k++){let T=new Z(qt(t,0,$r)),P=Ft(t),C=qt(t,0,P),L=Ft(t),F=qt(t,0,L);x.push({accountKey:T,writableIndexes:C,readonlyIndexes:F})}return new r({header:s,staticAccountKeys:u,recentBlockhash:w,compiledInstructions:S,addressTableLookups:x})}},Gl={deserializeMessageVersion(r){let e=r[0],t=e&_c;return t===e?"legacy":t},deserialize:r=>{let e=Gl.deserializeMessageVersion(r);if(e==="legacy")return xr.from(r);if(e===0)return Si.deserialize(r);throw new Error(`Transaction message version ${e} deserialization is not supported`)}},Hr=(function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r})({}),k_=ie.Buffer.alloc(Uo).fill(0),ye=class{constructor(e){this.keys=void 0,this.programId=void 0,this.data=ie.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:n})=>({pubkey:e.toJSON(),isSigner:t,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}},we=class r{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){let{minContextSlot:t,nonceInfo:n}=e;this.minNonceContextSlot=t,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){let{blockhash:t,lastValidBlockHeight:n}=e;this.recentBlockhash=t,this.lastValidBlockHeight=n}else{let{recentBlockhash:t,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new ye(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let T=0;T<t.length;T++)if(t[T].programId===void 0)throw new Error(`Transaction instruction index ${T} has undefined program id`);let i=[],o=[];t.forEach(T=>{T.keys.forEach(C=>{o.push({...C})});let P=T.programId.toString();i.includes(P)||i.push(P)}),i.forEach(T=>{o.push({pubkey:new Z(T),isSigner:!1,isWritable:!1})});let s=[];o.forEach(T=>{let P=T.pubkey.toString(),C=s.findIndex(L=>L.pubkey.toString()===P);C>-1?(s[C].isWritable=s[C].isWritable||T.isWritable,s[C].isSigner=s[C].isSigner||T.isSigner):s.push(T)}),s.sort(function(T,P){if(T.isSigner!==P.isSigner)return T.isSigner?-1:1;if(T.isWritable!==P.isWritable)return T.isWritable?-1:1;let C={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return T.pubkey.toBase58().localeCompare(P.pubkey.toBase58(),"en",C)});let u=s.findIndex(T=>T.pubkey.equals(n));if(u>-1){let[T]=s.splice(u,1);T.isSigner=!0,T.isWritable=!0,s.unshift(T)}else s.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(let T of this.signatures){let P=s.findIndex(C=>C.pubkey.equals(T.publicKey));if(P>-1)s[P].isSigner||(s[P].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${T.publicKey.toString()}`)}let f=0,w=0,R=0,S=[],I=[];s.forEach(({pubkey:T,isSigner:P,isWritable:C})=>{P?(S.push(T.toString()),f+=1,C||(w+=1)):(I.push(T.toString()),C||(R+=1))});let x=S.concat(I),k=t.map(T=>{let{data:P,programId:C}=T;return{programIdIndex:x.indexOf(C.toString()),accounts:T.keys.map(L=>x.indexOf(L.pubkey.toString())),data:dt.default.encode(P)}});return k.forEach(T=>{ge(T.programIdIndex>=0),T.accounts.forEach(P=>ge(P>=0))}),new xr({header:{numRequiredSignatures:f,numReadonlySignedAccounts:w,numReadonlyUnsignedAccounts:R},accountKeys:x,recentBlockhash:e,instructions:k})}_compile(){let e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((i,o)=>t[o].equals(i.publicKey))||(this.signatures=t.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");let t=new Set;this.signatures=e.filter(n=>{let i=n.toString();return t.has(i)?!1:(t.add(i),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");let t=new Set,n=[];for(let o of e){let s=o.publicKey.toString();t.has(s)||(t.add(s),n.push(o))}this.signatures=n.map(o=>({signature:null,publicKey:o.publicKey}));let i=this._compile();this._partialSign(i,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");let t=new Set,n=[];for(let o of e){let s=o.publicKey.toString();t.has(s)||(t.add(s),n.push(o))}let i=this._compile();this._partialSign(i,...n)}_partialSign(e,...t){let n=e.serialize();t.forEach(i=>{let o=mc(n,i.secretKey);this._addSignature(i.publicKey,le(o))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){ge(t.length===64);let n=this.signatures.findIndex(i=>e.equals(i.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=ie.Buffer.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){let n={};for(let{signature:i,publicKey:o}of this.signatures)i===null?t&&(n.missing||=[]).push(o):R_(i,e,o.toBytes())||(n.invalid||=[]).push(o);return n.invalid||n.missing?n:void 0}serialize(e){let{requireAllSignatures:t,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),i=this.serializeMessage();if(n){let o=this._getMessageSignednessErrors(i,t);if(o){let s="Signature verification failed.";throw o.invalid&&(s+=`
Invalid signature for public key${o.invalid.length===1?"":"(s)"} [\`${o.invalid.map(u=>u.toBase58()).join("`, `")}\`].`),o.missing&&(s+=`
Missing signature for public key${o.missing.length===1?"":"(s)"} [\`${o.missing.map(u=>u.toBase58()).join("`, `")}\`].`),new Error(s)}}return this._serialize(i)}_serialize(e){let{signatures:t}=this,n=[];Kt(n,t.length);let i=n.length+t.length*64+e.length,o=ie.Buffer.alloc(i);return ge(t.length<256),ie.Buffer.from(n).copy(o,0),t.forEach(({signature:s},u)=>{s!==null&&(ge(s.length===64,"signature has invalid length"),ie.Buffer.from(s).copy(o,n.length+u*64))}),e.copy(o,n.length+t.length*64),ge(o.length<=yn,`Transaction too large: ${o.length} > ${yn}`),o}get keys(){return ge(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return ge(this.instructions.length===1),this.instructions[0].programId}get data(){return ge(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e],n=Ft(t),i=[];for(let o=0;o<n;o++){let s=qt(t,0,Uo);i.push(dt.default.encode(ie.Buffer.from(s)))}return r.populate(xr.from(t),i)}static populate(e,t=[]){let n=new r;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),t.forEach((i,o)=>{let s={signature:i==dt.default.encode(k_)?null:dt.default.decode(i),publicKey:e.accountKeys[o]};n.signatures.push(s)}),e.instructions.forEach(i=>{let o=i.accounts.map(s=>{let u=e.accountKeys[s];return{pubkey:u,isSigner:n.signatures.some(f=>f.publicKey.toString()===u.toString())||e.isAccountSigner(s),isWritable:e.isAccountWritable(s)}});n.instructions.push(new ye({keys:o,programId:e.accountKeys[i.programIdIndex],data:dt.default.decode(i.data)}))}),n._message=e,n._json=n.toJSON(),n}},Ko=class r{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,t){let{header:n,compiledInstructions:i,recentBlockhash:o}=e,{numRequiredSignatures:s,numReadonlySignedAccounts:u,numReadonlyUnsignedAccounts:f}=n,w=s-u;ge(w>0,"Message header is invalid");let R=e.staticAccountKeys.length-s-f;ge(R>=0,"Message header is invalid");let S=e.getAccountKeys(t),I=S.get(0);if(I===void 0)throw new Error("Failed to decompile message because no account keys were found");let x=[];for(let k of i){let T=[];for(let C of k.accountKeyIndexes){let L=S.get(C);if(L===void 0)throw new Error(`Failed to find key for account key index ${C}`);let F=C<s,V;F?V=C<w:C<S.staticAccountKeys.length?V=C-s<R:V=C-S.staticAccountKeys.length<S.accountKeysFromLookups.writable.length,T.push({pubkey:L,isSigner:C<n.numRequiredSignatures,isWritable:V})}let P=S.get(k.programIdIndex);if(P===void 0)throw new Error(`Failed to find program id for program id index ${k.programIdIndex}`);x.push(new ye({programId:P,data:le(k.data),keys:T}))}return new r({payerKey:I,instructions:x,recentBlockhash:o})}compileToLegacyMessage(){return xr.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return Si.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}},qo=class r{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,t!==void 0)ge(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{let n=[];for(let i=0;i<e.header.numRequiredSignatures;i++)n.push(new Uint8Array(Uo));this.signatures=n}this.message=e}serialize(){let e=this.message.serialize(),t=Array();Kt(t,this.signatures.length);let n=O.struct([O.blob(t.length,"encodedSignaturesLength"),O.seq(x_(),this.signatures.length,"signatures"),O.blob(e.length,"serializedMessage")]),i=new Uint8Array(2048),o=n.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},i);return i.slice(0,o)}static deserialize(e){let t=[...e],n=[],i=Ft(t);for(let s=0;s<i;s++)n.push(new Uint8Array(qt(t,0,Uo)));let o=Gl.deserialize(new Uint8Array(t));return new r(o,n)}sign(e){let t=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(let i of e){let o=n.findIndex(s=>s.equals(i.publicKey));ge(o>=0,`Cannot sign with non signer key ${i.publicKey.toBase58()}`),this.signatures[o]=mc(t,i.secretKey)}}addSignature(e,t){ge(t.byteLength===64,"Signature must be 64 bytes long");let i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(o=>o.equals(e));ge(i>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=t}},B_=160,T_=64,L_=B_/T_,Yl=1e3/L_,Sr=new Z("SysvarC1ock11111111111111111111111111111111"),JE=new Z("SysvarEpochSchedu1e111111111111111111111111"),QE=new Z("Sysvar1nstructions1111111111111111111111111"),Xa=new Z("SysvarRecentB1ockHashes11111111111111111111"),Ai=new Z("SysvarRent111111111111111111111111111111111"),eR=new Z("SysvarRewards111111111111111111111111111111"),tR=new Z("SysvarS1otHashes111111111111111111111111111"),rR=new Z("SysvarS1otHistory11111111111111111111111111"),ja=new Z("SysvarStakeHistory1111111111111111111111111"),xi=class extends Error{constructor({action:e,signature:t,transactionMessage:n,logs:i}){let o=i?`Logs: 
${JSON.stringify(i.slice(-10),null,2)}. `:"",s="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.",u;switch(e){case"send":u=`Transaction ${t} resulted in an error. 
${n}. `+o+s;break;case"simulate":u=`Simulation failed. 
Message: ${n}. 
`+o+s;break;default:u=`Unknown action '${(f=>f)(e)}'`}super(u),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=n,this.transactionLogs=i||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){let e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((t,n)=>{e.getTransaction(this.signature).then(i=>{if(i&&i.meta&&i.meta.logMessages){let o=i.meta.logMessages;this.transactionLogs=o,t(o)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}};var J=class extends Error{constructor({code:e,message:t,data:n},i){super(i!=null?`${i}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=n,this.name="SolanaJSONRPCError"}};async function Il(r,e,t,n){let i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},o=await r.sendTransaction(e,t,i),s;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)s=(await r.confirmTransaction({abortSignal:n?.abortSignal,signature:o,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){let{nonceInstruction:u}=e.nonceInfo,f=u.keys[0].pubkey;s=(await r.confirmTransaction({abortSignal:n?.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:f,nonceValue:e.nonceInfo.nonce,signature:o},n&&n.commitment)).value}else n?.abortSignal!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),s=(await r.confirmTransaction(o,n&&n.commitment)).value;if(s.err)throw o!=null?new xi({action:"send",signature:o,transactionMessage:`Status: (${JSON.stringify(s)})`}):new Error(`Transaction ${o} failed (${JSON.stringify(s)})`);return o}function pn(r){return new Promise(e=>setTimeout(e,r))}function he(r,e){let t=r.layout.span>=0?r.layout.span:$l(r,e),n=ie.Buffer.alloc(t),i=Object.assign({instruction:r.index},e);return r.layout.encode(i,n),n}var C_=O.nu64("lamportsPerSignature"),Xl=O.struct([O.u32("version"),O.u32("state"),ue("authorizedPubkey"),ue("nonce"),O.struct([C_],"feeCalculator")]),Ol=Xl.span,sc=class r{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){let t=Xl.decode(le(e),0);return new r({authorizedPubkey:new Z(t.authorizedPubkey),nonce:new Z(t.nonce).toString(),feeCalculator:t.feeCalculator})}};function Vn(r){let e=(0,ql.blob)(8,r),t=e.decode.bind(e),n=e.encode.bind(e),i=e,o=Bf();return i.decode=(s,u)=>{let f=t(s,u);return o.decode(f)},i.encode=(s,u,f)=>{let w=o.encode(s);return n(w,u,f)},i}var Gt=Object.freeze({Create:{index:0,layout:O.struct([O.u32("instruction"),O.ns64("lamports"),O.ns64("space"),ue("programId")])},Assign:{index:1,layout:O.struct([O.u32("instruction"),ue("programId")])},Transfer:{index:2,layout:O.struct([O.u32("instruction"),Vn("lamports")])},CreateWithSeed:{index:3,layout:O.struct([O.u32("instruction"),ue("base"),qn("seed"),O.ns64("lamports"),O.ns64("space"),ue("programId")])},AdvanceNonceAccount:{index:4,layout:O.struct([O.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:O.struct([O.u32("instruction"),O.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:O.struct([O.u32("instruction"),ue("authorized")])},AuthorizeNonceAccount:{index:7,layout:O.struct([O.u32("instruction"),ue("authorized")])},Allocate:{index:8,layout:O.struct([O.u32("instruction"),O.ns64("space")])},AllocateWithSeed:{index:9,layout:O.struct([O.u32("instruction"),ue("base"),qn("seed"),O.ns64("space"),ue("programId")])},AssignWithSeed:{index:10,layout:O.struct([O.u32("instruction"),ue("base"),qn("seed"),ue("programId")])},TransferWithSeed:{index:11,layout:O.struct([O.u32("instruction"),Vn("lamports"),qn("seed"),ue("programId")])},UpgradeNonceAccount:{index:12,layout:O.struct([O.u32("instruction")])}}),wt=class r{constructor(){}static createAccount(e){let t=Gt.Create,n=he(t,{lamports:e.lamports,space:e.space,programId:le(e.programId.toBuffer())});return new ye({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let t,n;if("basePubkey"in e){let i=Gt.TransferWithSeed;t=he(i,{lamports:BigInt(e.lamports),seed:e.seed,programId:le(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{let i=Gt.Transfer;t=he(i,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new ye({keys:n,programId:this.programId,data:t})}static assign(e){let t,n;if("basePubkey"in e){let i=Gt.AssignWithSeed;t=he(i,{base:le(e.basePubkey.toBuffer()),seed:e.seed,programId:le(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{let i=Gt.Assign;t=he(i,{programId:le(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new ye({keys:n,programId:this.programId,data:t})}static createAccountWithSeed(e){let t=Gt.CreateWithSeed,n=he(t,{base:le(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:le(e.programId.toBuffer())}),i=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||i.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new ye({keys:i,programId:this.programId,data:n})}static createNonceAccount(e){let t=new we;"basePubkey"in e&&"seed"in e?t.add(r.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:Ol,programId:this.programId})):t.add(r.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:Ol,programId:this.programId}));let n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(n)),t}static nonceInitialize(e){let t=Gt.InitializeNonceAccount,n=he(t,{authorized:le(e.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Xa,isSigner:!1,isWritable:!1},{pubkey:Ai,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new ye(i)}static nonceAdvance(e){let t=Gt.AdvanceNonceAccount,n=he(t),i={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Xa,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new ye(i)}static nonceWithdraw(e){let t=Gt.WithdrawNonceAccount,n=he(t,{lamports:e.lamports});return new ye({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Xa,isSigner:!1,isWritable:!1},{pubkey:Ai,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){let t=Gt.AuthorizeNonceAccount,n=he(t,{authorized:le(e.newAuthorizedPubkey.toBuffer())});return new ye({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let t,n;if("basePubkey"in e){let i=Gt.AllocateWithSeed;t=he(i,{base:le(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:le(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{let i=Gt.Allocate;t=he(i,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new ye({keys:n,programId:this.programId,data:t})}};wt.programId=new Z("11111111111111111111111111111111");var M_=yn-300,ac=class r{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/r.chunkSize)+1+1)}static async load(e,t,n,i,o){{let S=await e.getMinimumBalanceForRentExemption(o.length),I=await e.getAccountInfo(n.publicKey,"confirmed"),x=null;if(I!==null){if(I.executable)return console.error("Program load failed, account is already executable"),!1;I.data.length!==o.length&&(x=x||new we,x.add(wt.allocate({accountPubkey:n.publicKey,space:o.length}))),I.owner.equals(i)||(x=x||new we,x.add(wt.assign({accountPubkey:n.publicKey,programId:i}))),I.lamports<S&&(x=x||new we,x.add(wt.transfer({fromPubkey:t.publicKey,toPubkey:n.publicKey,lamports:S-I.lamports})))}else x=new we().add(wt.createAccount({fromPubkey:t.publicKey,newAccountPubkey:n.publicKey,lamports:S>0?S:1,space:o.length,programId:i}));x!==null&&await Il(e,x,[t,n],{commitment:"confirmed"})}let s=O.struct([O.u32("instruction"),O.u32("offset"),O.u32("bytesLength"),O.u32("bytesLengthPadding"),O.seq(O.u8("byte"),O.offset(O.u32(),-8),"bytes")]),u=r.chunkSize,f=0,w=o,R=[];for(;w.length>0;){let S=w.slice(0,u),I=ie.Buffer.alloc(u+16);s.encode({instruction:0,offset:f,bytes:S,bytesLength:0,bytesLengthPadding:0},I);let x=new we().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}],programId:i,data:I});R.push(Il(e,x,[t,n],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")&&await pn(1e3/4),f+=u,w=w.slice(u)}await Promise.all(R);{let S=O.struct([O.u32("instruction")]),I=ie.Buffer.alloc(S.span);S.encode({instruction:1},I);let x=new we().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0},{pubkey:Ai,isSigner:!1,isWritable:!1}],programId:i,data:I}),k="processed",T=await e.sendTransaction(x,[t,n],{preflightCommitment:k}),{context:P,value:C}=await e.confirmTransaction({signature:T,lastValidBlockHeight:x.lastValidBlockHeight,blockhash:x.recentBlockhash},k);if(C.err)throw new Error(`Transaction ${T} failed (${JSON.stringify(C)})`);for(;;){try{if(await e.getSlot({commitment:k})>P.slot)break}catch{}await new Promise(L=>setTimeout(L,Math.round(Yl/2)))}}return!0}};ac.chunkSize=M_;var nR=new Z("BPFLoader2111111111111111111111111111111111");function P_(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Za,Nl;function U_(){if(Nl)return Za;Nl=1;var r=Object.prototype.toString,e=Object.keys||function(n){var i=[];for(var o in n)i.push(o);return i};function t(n,i){var o,s,u,f,w,R,S;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return t(n.toJSON(),i);if(S=r.call(n),S==="[object Array]"){for(u="[",s=n.length-1,o=0;o<s;o++)u+=t(n[o],!0)+",";return s>-1&&(u+=t(n[o],!0)),u+"]"}else if(S==="[object Object]"){for(f=e(n).sort(),s=f.length,u="",o=0;o<s;)w=f[o],R=t(n[w],!1),R!==void 0&&(u&&(u+=","),u+=JSON.stringify(w)+":"+R),o++;return"{"+u+"}"}else return JSON.stringify(n);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return Za=function(n){var i=t(n,!1);if(i!==void 0)return""+i},Za}var D_=U_(),kl=P_(D_),bi=32;function Ja(r){let e=0;for(;r>1;)r/=2,e++;return e}function z_(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}var cc=class{constructor(e,t,n,i,o){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=n,this.firstNormalEpoch=i,this.firstNormalSlot=o}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){let t=Ja(z_(e+bi+1))-Ja(bi)-1,n=this.getSlotsInEpoch(t),i=e-(n-bi);return[t,i]}else{let t=e-this.firstNormalSlot,n=Math.floor(t/this.slotsPerEpoch),i=this.firstNormalEpoch+n,o=t%this.slotsPerEpoch;return[i,o]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*bi:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+Ja(bi)):this.slotsPerEpoch}},F_=globalThis.fetch,uc=class extends fl{constructor(e,t,n){let i=o=>{let s=ul(o,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in s?this.underlyingSocket=s.socket:this.underlyingSocket=s,s};super(i,e,t,n),this.underlyingSocket=void 0}call(...e){let t=this.underlyingSocket?.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){let t=this.underlyingSocket?.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}};function K_(r,e){let t;try{t=r.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${r.index}`);return t}var Bl=56,Ho=class{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){let e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){let t=K_(q_,e),n=e.length-Bl;ge(n>=0,"lookup table is invalid"),ge(n%32===0,"lookup table is invalid");let i=n/32,{addresses:o}=O.struct([O.seq(ue(),i,"addresses")]).decode(e.slice(Bl));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new Z(t.authority[0]):void 0,addresses:o.map(s=>new Z(s))}}},q_={index:1,layout:O.struct([O.u32("typeIndex"),Vn("deactivationSlot"),O.nu64("lastExtendedSlot"),O.u8("lastExtendedStartIndex"),O.u8(),O.seq(ue(),O.offset(O.u8(),-1),"authority")])},H_=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function V_(r){let e=r.match(H_);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);let[t,n,i,o]=e,s=r.startsWith("https:")?"wss:":"ws:",u=i==null?null:parseInt(i.slice(1),10),f=u==null?"":`:${u+1}`;return`${s}//${n}${f}${o}`}var xe=zn(Ro(Z),$(),r=>new Z(r)),jl=So([$(),Ae("base64")]),wc=zn(Ro(ie.Buffer),jl,r=>ie.Buffer.from(r[0],"base64")),$_=30*1e3;function W_(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function Re(r){let e,t;if(typeof r=="string")e=r;else if(r){let{commitment:n,...i}=r;e=n,t=i}return{commitment:e,config:t}}function Tl(r){return r.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function Zl(r){return Et([H({jsonrpc:Ae("2.0"),id:$(),result:r}),H({jsonrpc:Ae("2.0"),id:$(),error:H({code:dn(),message:$(),data:te(Mf())})})])}var G_=Zl(dn());function ce(r){return zn(Zl(r),G_,e=>"error"in e?e:{...e,result:W(e.result,r)})}function Oe(r){return ce(H({context:H({slot:M()}),value:r}))}function Yo(r){return H({context:H({slot:M()}),value:r})}function Qa(r,e){return r===0?new Si({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new Z(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:dt.default.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new xr(e)}var Y_=H({foundation:M(),foundationTerm:M(),initial:M(),taper:M(),terminal:M()}),X_=ce(Y(X(H({epoch:M(),effectiveSlot:M(),amount:M(),postBalance:M(),commission:te(X(M()))})))),j_=Y(H({slot:M(),prioritizationFee:M()})),Z_=H({total:M(),validator:M(),foundation:M(),epoch:M()}),J_=H({epoch:M(),slotIndex:M(),slotsInEpoch:M(),absoluteSlot:M(),blockHeight:te(M()),transactionCount:te(M())}),Q_=H({slotsPerEpoch:M(),leaderScheduleSlotOffset:M(),warmup:Qt(),firstNormalEpoch:M(),firstNormalSlot:M()}),e1=ka($(),Y(M())),mn=X(Et([H({}),$()])),t1=H({err:mn}),r1=Ae("receivedSignature"),n1=H({"solana-core":$(),"feature-set":te(M())}),i1=H({program:$(),programId:xe,parsed:dn()}),o1=H({programId:xe,accounts:Y(xe),data:$()}),Ll=Oe(H({err:X(Et([H({}),$()])),logs:X(Y($())),accounts:te(X(Y(X(H({executable:Qt(),owner:$(),lamports:M(),data:Y($()),rentEpoch:te(M())}))))),unitsConsumed:te(M()),returnData:te(X(H({programId:$(),data:So([$(),Ae("base64")])}))),innerInstructions:te(X(Y(H({index:M(),instructions:Y(Et([i1,o1]))}))))})),s1=Oe(H({byIdentity:ka($(),Y(M())),range:H({firstSlot:M(),lastSlot:M()})}));function a1(r,e,t,n,i,o){let s=t||F_,u;o!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let f;return n&&(f=async(R,S)=>{let I=await new Promise((x,k)=>{try{n(R,S,(T,P)=>x([T,P]))}catch(T){k(T)}});return await s(...I)}),new Hl.default(async(R,S)=>{let I={method:"POST",body:R,agent:u,headers:Object.assign({"Content-Type":"application/json"},e||{},aw)};try{let x=5,k,T=500;for(;f?k=await f(r,I):k=await s(r,I),!(k.status!==429||i===!0||(x-=1,x===0));)console.error(`Server responded with ${k.status} ${k.statusText}.  Retrying after ${T}ms delay...`),await pn(T),T*=2;let P=await k.text();k.ok?S(null,P):S(new Error(`${k.status} ${k.statusText}: ${P}`))}catch(x){x instanceof Error&&S(x)}},{})}function c1(r){return(e,t)=>new Promise((n,i)=>{r.request(e,t,(o,s)=>{if(o){i(o);return}n(s)})})}function u1(r){return e=>new Promise((t,n)=>{e.length===0&&t([]);let i=e.map(o=>r.request(o.methodName,o.args));r.request(i,(o,s)=>{if(o){n(o);return}t(s)})})}var f1=ce(Y_),l1=ce(Z_),h1=ce(j_),d1=ce(J_),p1=ce(Q_),g1=ce(e1),y1=ce(M()),m1=Oe(H({total:M(),circulating:M(),nonCirculating:M(),nonCirculatingAccounts:Y(xe)})),fc=H({amount:$(),uiAmount:X(M()),decimals:M(),uiAmountString:te($())}),_1=Oe(Y(H({address:xe,amount:$(),uiAmount:X(M()),decimals:M(),uiAmountString:te($())}))),w1=Oe(Y(H({pubkey:xe,account:H({executable:Qt(),owner:xe,lamports:M(),data:wc,rentEpoch:M()})}))),lc=H({program:$(),parsed:dn(),space:M()}),b1=Oe(Y(H({pubkey:xe,account:H({executable:Qt(),owner:xe,lamports:M(),data:lc,rentEpoch:M()})}))),E1=Oe(Y(H({lamports:M(),address:xe}))),vi=H({executable:Qt(),owner:xe,lamports:M(),data:wc,rentEpoch:M()}),R1=H({pubkey:xe,account:vi}),S1=zn(Et([Ro(ie.Buffer),lc]),Et([jl,lc]),r=>Array.isArray(r)?W(r,wc):r),hc=H({executable:Qt(),owner:xe,lamports:M(),data:S1,rentEpoch:M()}),A1=H({pubkey:xe,account:hc}),x1=H({state:Et([Ae("active"),Ae("inactive"),Ae("activating"),Ae("deactivating")]),active:M(),inactive:M()}),v1=ce(Y(H({signature:$(),slot:M(),err:mn,memo:X($()),blockTime:te(X(M()))}))),I1=ce(Y(H({signature:$(),slot:M(),err:mn,memo:X($()),blockTime:te(X(M()))}))),O1=H({subscription:M(),result:Yo(vi)}),N1=H({pubkey:xe,account:vi}),k1=H({subscription:M(),result:Yo(N1)}),B1=H({parent:M(),slot:M(),root:M()}),T1=H({subscription:M(),result:B1}),L1=Et([H({type:Et([Ae("firstShredReceived"),Ae("completed"),Ae("optimisticConfirmation"),Ae("root")]),slot:M(),timestamp:M()}),H({type:Ae("createdBank"),parent:M(),slot:M(),timestamp:M()}),H({type:Ae("frozen"),slot:M(),timestamp:M(),stats:H({numTransactionEntries:M(),numSuccessfulTransactions:M(),numFailedTransactions:M(),maxTransactionsPerEntry:M()})}),H({type:Ae("dead"),slot:M(),timestamp:M(),err:$()})]),C1=H({subscription:M(),result:L1}),M1=H({subscription:M(),result:Yo(Et([t1,r1]))}),P1=H({subscription:M(),result:M()}),U1=H({pubkey:$(),gossip:X($()),tpu:X($()),rpc:X($()),version:X($())}),Cl=H({votePubkey:$(),nodePubkey:$(),activatedStake:M(),epochVoteAccount:Qt(),epochCredits:Y(So([M(),M(),M()])),commission:M(),lastVote:M(),rootSlot:X(M())}),D1=ce(H({current:Y(Cl),delinquent:Y(Cl)})),z1=Et([Ae("processed"),Ae("confirmed"),Ae("finalized")]),F1=H({slot:M(),confirmations:X(M()),err:mn,confirmationStatus:te(z1)}),K1=Oe(Y(X(F1))),q1=ce(M()),Jl=H({accountKey:xe,writableIndexes:Y(M()),readonlyIndexes:Y(M())}),bc=H({signatures:Y($()),message:H({accountKeys:Y($()),header:H({numRequiredSignatures:M(),numReadonlySignedAccounts:M(),numReadonlyUnsignedAccounts:M()}),instructions:Y(H({accounts:Y(M()),data:$(),programIdIndex:M()})),recentBlockhash:$(),addressTableLookups:te(Y(Jl))})}),Ql=H({pubkey:xe,signer:Qt(),writable:Qt(),source:te(Et([Ae("transaction"),Ae("lookupTable")]))}),eh=H({accountKeys:Y(Ql),signatures:Y($())}),th=H({parsed:dn(),program:$(),programId:xe}),rh=H({accounts:Y(xe),data:$(),programId:xe}),H1=Et([rh,th]),V1=Et([H({parsed:dn(),program:$(),programId:$()}),H({accounts:Y($()),data:$(),programId:$()})]),nh=zn(H1,V1,r=>"accounts"in r?W(r,rh):W(r,th)),ih=H({signatures:Y($()),message:H({accountKeys:Y(Ql),instructions:Y(nh),recentBlockhash:$(),addressTableLookups:te(X(Y(Jl)))})}),Vo=H({accountIndex:M(),mint:$(),owner:te($()),programId:te($()),uiTokenAmount:fc}),oh=H({writable:Y(xe),readonly:Y(xe)}),Xo=H({err:mn,fee:M(),innerInstructions:te(X(Y(H({index:M(),instructions:Y(H({accounts:Y(M()),data:$(),programIdIndex:M()}))})))),preBalances:Y(M()),postBalances:Y(M()),logMessages:te(X(Y($()))),preTokenBalances:te(X(Y(Vo))),postTokenBalances:te(X(Y(Vo))),loadedAddresses:te(oh),computeUnitsConsumed:te(M()),costUnits:te(M())}),Ec=H({err:mn,fee:M(),innerInstructions:te(X(Y(H({index:M(),instructions:Y(nh)})))),preBalances:Y(M()),postBalances:Y(M()),logMessages:te(X(Y($()))),preTokenBalances:te(X(Y(Vo))),postTokenBalances:te(X(Y(Vo))),loadedAddresses:te(oh),computeUnitsConsumed:te(M()),costUnits:te(M())}),Gn=Et([Ae(0),Ae("legacy")]),_n=H({pubkey:$(),lamports:M(),postBalance:X(M()),rewardType:X($()),commission:te(X(M()))}),$1=ce(X(H({blockhash:$(),previousBlockhash:$(),parentSlot:M(),transactions:Y(H({transaction:bc,meta:X(Xo),version:te(Gn)})),rewards:te(Y(_n)),blockTime:X(M()),blockHeight:X(M())}))),W1=ce(X(H({blockhash:$(),previousBlockhash:$(),parentSlot:M(),rewards:te(Y(_n)),blockTime:X(M()),blockHeight:X(M())}))),G1=ce(X(H({blockhash:$(),previousBlockhash:$(),parentSlot:M(),transactions:Y(H({transaction:eh,meta:X(Xo),version:te(Gn)})),rewards:te(Y(_n)),blockTime:X(M()),blockHeight:X(M())}))),Y1=ce(X(H({blockhash:$(),previousBlockhash:$(),parentSlot:M(),transactions:Y(H({transaction:ih,meta:X(Ec),version:te(Gn)})),rewards:te(Y(_n)),blockTime:X(M()),blockHeight:X(M())}))),X1=ce(X(H({blockhash:$(),previousBlockhash:$(),parentSlot:M(),transactions:Y(H({transaction:eh,meta:X(Ec),version:te(Gn)})),rewards:te(Y(_n)),blockTime:X(M()),blockHeight:X(M())}))),j1=ce(X(H({blockhash:$(),previousBlockhash:$(),parentSlot:M(),rewards:te(Y(_n)),blockTime:X(M()),blockHeight:X(M())}))),Z1=ce(X(H({blockhash:$(),previousBlockhash:$(),parentSlot:M(),transactions:Y(H({transaction:bc,meta:X(Xo)})),rewards:te(Y(_n)),blockTime:X(M())}))),Ml=ce(X(H({blockhash:$(),previousBlockhash:$(),parentSlot:M(),signatures:Y($()),blockTime:X(M())}))),ec=ce(X(H({slot:M(),meta:X(Xo),blockTime:te(X(M())),transaction:bc,version:te(Gn)}))),Co=ce(X(H({slot:M(),transaction:ih,meta:X(Ec),blockTime:te(X(M())),version:te(Gn)}))),J1=Oe(H({blockhash:$(),lastValidBlockHeight:M()})),Q1=Oe(Qt()),ew=H({slot:M(),numTransactions:M(),numSlots:M(),samplePeriodSecs:M()}),tw=ce(Y(ew)),rw=Oe(X(H({feeCalculator:H({lamportsPerSignature:M()})}))),nw=ce($()),iw=ce($()),ow=H({err:mn,logs:Y($()),signature:$()}),sw=H({result:Yo(ow),subscription:M()}),aw={"solana-client":"js/1.0.0-maintenance"},$o=class{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{let w={};return async R=>{let{commitment:S,config:I}=Re(R),x=this._buildArgs([],S,void 0,I),k=kl(x);return w[k]=w[k]??(async()=>{try{let T=await this._rpcRequest("getBlockHeight",x),P=W(T,ce(M()));if("error"in P)throw new J(P.error,"failed to get block height information");return P.result}finally{delete w[k]}})(),await w[k]}})();let n,i,o,s,u,f;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,n=t.wsEndpoint,i=t.httpHeaders,o=t.fetch,s=t.fetchMiddleware,u=t.disableRetryOnRateLimit,f=t.httpAgent),this._rpcEndpoint=W_(e),this._rpcWsEndpoint=n||V_(e),this._rpcClient=a1(e,i,o,s,u,f),this._rpcRequest=c1(this._rpcClient),this._rpcBatchRequest=u1(this._rpcClient),this._rpcWebSocket=new uc(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){let{commitment:n,config:i}=Re(t),o=this._buildArgs([e.toBase58()],n,void 0,i),s=await this._rpcRequest("getBalance",o),u=W(s,Oe(M()));if("error"in u)throw new J(u.error,`failed to get balance for ${e.toBase58()}`);return u.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+n)})}async getBlockTime(e){let t=await this._rpcRequest("getBlockTime",[e]),n=W(t,ce(X(M())));if("error"in n)throw new J(n.error,`failed to get block time for slot ${e}`);return n.result}async getMinimumLedgerSlot(){let e=await this._rpcRequest("minimumLedgerSlot",[]),t=W(e,ce(M()));if("error"in t)throw new J(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){let e=await this._rpcRequest("getFirstAvailableBlock",[]),t=W(e,y1);if("error"in t)throw new J(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};typeof e=="string"?t={commitment:e}:e?t={...e,commitment:e&&e.commitment||this.commitment}:t={commitment:this.commitment};let n=await this._rpcRequest("getSupply",[t]),i=W(n,m1);if("error"in i)throw new J(i.error,"failed to get supply");return i.result}async getTokenSupply(e,t){let n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenSupply",n),o=W(i,Oe(fc));if("error"in o)throw new J(o.error,"failed to get token supply");return o.result}async getTokenAccountBalance(e,t){let n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenAccountBalance",n),o=W(i,Oe(fc));if("error"in o)throw new J(o.error,"failed to get token account balance");return o.result}async getTokenAccountsByOwner(e,t,n){let{commitment:i,config:o}=Re(n),s=[e.toBase58()];"mint"in t?s.push({mint:t.mint.toBase58()}):s.push({programId:t.programId.toBase58()});let u=this._buildArgs(s,i,"base64",o),f=await this._rpcRequest("getTokenAccountsByOwner",u),w=W(f,w1);if("error"in w)throw new J(w.error,`failed to get token accounts owned by account ${e.toBase58()}`);return w.result}async getParsedTokenAccountsByOwner(e,t,n){let i=[e.toBase58()];"mint"in t?i.push({mint:t.mint.toBase58()}):i.push({programId:t.programId.toBase58()});let o=this._buildArgs(i,n,"jsonParsed"),s=await this._rpcRequest("getTokenAccountsByOwner",o),u=W(s,b1);if("error"in u)throw new J(u.error,`failed to get token accounts owned by account ${e.toBase58()}`);return u.result}async getLargestAccounts(e){let t={...e,commitment:e&&e.commitment||this.commitment},n=t.filter||t.commitment?[t]:[],i=await this._rpcRequest("getLargestAccounts",n),o=W(i,E1);if("error"in o)throw new J(o.error,"failed to get largest accounts");return o.result}async getTokenLargestAccounts(e,t){let n=this._buildArgs([e.toBase58()],t),i=await this._rpcRequest("getTokenLargestAccounts",n),o=W(i,_1);if("error"in o)throw new J(o.error,"failed to get token largest accounts");return o.result}async getAccountInfoAndContext(e,t){let{commitment:n,config:i}=Re(t),o=this._buildArgs([e.toBase58()],n,"base64",i),s=await this._rpcRequest("getAccountInfo",o),u=W(s,Oe(X(vi)));if("error"in u)throw new J(u.error,`failed to get info about account ${e.toBase58()}`);return u.result}async getParsedAccountInfo(e,t){let{commitment:n,config:i}=Re(t),o=this._buildArgs([e.toBase58()],n,"jsonParsed",i),s=await this._rpcRequest("getAccountInfo",o),u=W(s,Oe(X(hc)));if("error"in u)throw new J(u.error,`failed to get info about account ${e.toBase58()}`);return u.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(n){throw new Error("failed to get info about account "+e.toBase58()+": "+n)}}async getMultipleParsedAccounts(e,t){let{commitment:n,config:i}=Re(t),o=e.map(w=>w.toBase58()),s=this._buildArgs([o],n,"jsonParsed",i),u=await this._rpcRequest("getMultipleAccounts",s),f=W(u,Oe(Y(X(hc))));if("error"in f)throw new J(f.error,`failed to get info for accounts ${o}`);return f.result}async getMultipleAccountsInfoAndContext(e,t){let{commitment:n,config:i}=Re(t),o=e.map(w=>w.toBase58()),s=this._buildArgs([o],n,"base64",i),u=await this._rpcRequest("getMultipleAccounts",s),f=W(u,Oe(Y(X(vi))));if("error"in f)throw new J(f.error,`failed to get info for accounts ${o}`);return f.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,n){let{commitment:i,config:o}=Re(t),s=this._buildArgs([e.toBase58()],i,void 0,{...o,epoch:n??o?.epoch}),u=await this._rpcRequest("getStakeActivation",s),f=W(u,ce(x1));if("error"in f)throw new J(f.error,`failed to get Stake Activation ${e.toBase58()}`);return f.result}async getProgramAccounts(e,t){let{commitment:n,config:i}=Re(t),{encoding:o,...s}=i||{},u=this._buildArgs([e.toBase58()],n,o||"base64",{...s,...s.filters?{filters:Tl(s.filters)}:null}),f=await this._rpcRequest("getProgramAccounts",u),w=Y(R1),R=s.withContext===!0?W(f,Oe(w)):W(f,ce(w));if("error"in R)throw new J(R.error,`failed to get accounts owned by program ${e.toBase58()}`);return R.result}async getParsedProgramAccounts(e,t){let{commitment:n,config:i}=Re(t),o=this._buildArgs([e.toBase58()],n,"jsonParsed",i),s=await this._rpcRequest("getProgramAccounts",o),u=W(s,ce(Y(A1)));if("error"in u)throw new J(u.error,`failed to get accounts owned by program ${e.toBase58()}`);return u.result}async confirmTransaction(e,t){let n;if(typeof e=="string")n=e;else{let o=e;if(o.abortSignal?.aborted)return Promise.reject(o.abortSignal.reason);n=o.signature}let i;try{i=dt.default.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return ge(i.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:n}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,n)=>{e!=null&&(e.aborted?n(e.reason):e.addEventListener("abort",()=>{n(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let n,i,o=!1,s=new Promise((f,w)=>{try{n=this.onSignature(t,(S,I)=>{n=void 0;let x={context:I,value:S};f({__type:Hr.PROCESSED,response:x})},e);let R=new Promise(S=>{n==null?S():i=this._onSubscriptionStateChange(n,I=>{I==="subscribed"&&S()})});(async()=>{if(await R,o)return;let S=await this.getSignatureStatus(t);if(o||S==null)return;let{context:I,value:x}=S;if(x!=null)if(x?.err)w(x.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(x.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(x.confirmationStatus==="processed"||x.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}o=!0,f({__type:Hr.PROCESSED,response:{context:I,value:x}})}})()}catch(R){w(R)}});return{abortConfirmation:()=>{i&&(i(),i=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:s}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:n,signature:i}}){let o=!1,s=new Promise(S=>{let I=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let x=await I();if(!o){for(;x<=n;)if(await pn(1e3),o||(x=await I(),o))return;S({__type:Hr.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:u,confirmationPromise:f}=this.getTransactionConfirmationPromise({commitment:e,signature:i}),w=this.getCancellationPromise(t),R;try{let S=await Promise.race([w,f,s]);if(S.__type===Hr.PROCESSED)R=S.response;else throw new Do(i)}finally{o=!0,u()}return R}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:n,nonceAccountPubkey:i,nonceValue:o,signature:s}}){let u=!1,f=new Promise(x=>{let k=o,T=null,P=async()=>{try{let{context:C,value:L}=await this.getNonceAndContext(i,{commitment:e,minContextSlot:n});return T=C.slot,L?.nonce}catch{return k}};(async()=>{if(k=await P(),!u)for(;;){if(o!==k){x({__type:Hr.NONCE_INVALID,slotInWhichNonceDidAdvance:T});return}if(await pn(2e3),u||(k=await P(),u))return}})()}),{abortConfirmation:w,confirmationPromise:R}=this.getTransactionConfirmationPromise({commitment:e,signature:s}),S=this.getCancellationPromise(t),I;try{let x=await Promise.race([S,R,f]);if(x.__type===Hr.PROCESSED)I=x.response;else{let k;for(;;){let T=await this.getSignatureStatus(s);if(T==null)break;if(T.context.slot<(x.slotInWhichNonceDidAdvance??n)){await pn(400);continue}k=T;break}if(k?.value){let T=e||"finalized",{confirmationStatus:P}=k.value;switch(T){case"processed":case"recent":if(P!=="processed"&&P!=="confirmed"&&P!=="finalized")throw new gn(s);break;case"confirmed":case"single":case"singleGossip":if(P!=="confirmed"&&P!=="finalized")throw new gn(s);break;case"finalized":case"max":case"root":if(P!=="finalized")throw new gn(s);break;default:}I={context:k.context,value:{err:k.value.err}}}else throw new gn(s)}}finally{u=!0,w()}return I}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let n,i=new Promise(f=>{let w=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{w=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>f({__type:Hr.TIMED_OUT,timeoutMs:w}),w)}),{abortConfirmation:o,confirmationPromise:s}=this.getTransactionConfirmationPromise({commitment:e,signature:t}),u;try{let f=await Promise.race([s,i]);if(f.__type===Hr.PROCESSED)u=f.response;else throw new zo(t,f.timeoutMs/1e3)}finally{clearTimeout(n),o()}return u}async getClusterNodes(){let e=await this._rpcRequest("getClusterNodes",[]),t=W(e,ce(Y(U1)));if("error"in t)throw new J(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){let t=this._buildArgs([],e),n=await this._rpcRequest("getVoteAccounts",t),i=W(n,D1);if("error"in i)throw new J(i.error,"failed to get vote accounts");return i.result}async getSlot(e){let{commitment:t,config:n}=Re(e),i=this._buildArgs([],t,void 0,n),o=await this._rpcRequest("getSlot",i),s=W(o,ce(M()));if("error"in s)throw new J(s.error,"failed to get slot");return s.result}async getSlotLeader(e){let{commitment:t,config:n}=Re(e),i=this._buildArgs([],t,void 0,n),o=await this._rpcRequest("getSlotLeader",i),s=W(o,ce($()));if("error"in s)throw new J(s.error,"failed to get slot leader");return s.result}async getSlotLeaders(e,t){let n=[e,t],i=await this._rpcRequest("getSlotLeaders",n),o=W(i,ce(Y(xe)));if("error"in o)throw new J(o.error,"failed to get slot leaders");return o.result}async getSignatureStatus(e,t){let{context:n,value:i}=await this.getSignatureStatuses([e],t);ge(i.length===1);let o=i[0];return{context:n,value:o}}async getSignatureStatuses(e,t){let n=[e];t&&n.push(t);let i=await this._rpcRequest("getSignatureStatuses",n),o=W(i,K1);if("error"in o)throw new J(o.error,"failed to get signature status");return o.result}async getTransactionCount(e){let{commitment:t,config:n}=Re(e),i=this._buildArgs([],t,void 0,n),o=await this._rpcRequest("getTransactionCount",i),s=W(o,ce(M()));if("error"in s)throw new J(s.error,"failed to get transaction count");return s.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){let t=this._buildArgs([],e),n=await this._rpcRequest("getInflationGovernor",t),i=W(n,f1);if("error"in i)throw new J(i.error,"failed to get inflation");return i.result}async getInflationReward(e,t,n){let{commitment:i,config:o}=Re(n),s=this._buildArgs([e.map(w=>w.toBase58())],i,void 0,{...o,epoch:t??o?.epoch}),u=await this._rpcRequest("getInflationReward",s),f=W(u,X_);if("error"in f)throw new J(f.error,"failed to get inflation reward");return f.result}async getInflationRate(){let e=await this._rpcRequest("getInflationRate",[]),t=W(e,l1);if("error"in t)throw new J(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){let{commitment:t,config:n}=Re(e),i=this._buildArgs([],t,void 0,n),o=await this._rpcRequest("getEpochInfo",i),s=W(o,d1);if("error"in s)throw new J(s.error,"failed to get epoch info");return s.result}async getEpochSchedule(){let e=await this._rpcRequest("getEpochSchedule",[]),t=W(e,p1);if("error"in t)throw new J(t.error,"failed to get epoch schedule");let n=t.result;return new cc(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){let e=await this._rpcRequest("getLeaderSchedule",[]),t=W(e,g1);if("error"in t)throw new J(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){let n=this._buildArgs([e],t),i=await this._rpcRequest("getMinimumBalanceForRentExemption",n),o=W(i,q1);return"error"in o?(console.warn("Unable to fetch minimum balance for rent exemption"),0):o.result}async getRecentBlockhashAndContext(e){let{context:t,value:{blockhash:n}}=await this.getLatestBlockhashAndContext(e);return{context:t,value:{blockhash:n,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){let t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),n=W(t,tw);if("error"in n)throw new J(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(e,t){let n=this._buildArgs([e],t),i=await this._rpcRequest("getFeeCalculatorForBlockhash",n),o=W(i,rw);if("error"in o)throw new J(o.error,"failed to get fee calculator");let{context:s,value:u}=o.result;return{context:s,value:u!==null?u.feeCalculator:null}}async getFeeForMessage(e,t){let n=le(e.serialize()).toString("base64"),i=this._buildArgs([n],t),o=await this._rpcRequest("getFeeForMessage",i),s=W(o,Oe(X(M())));if("error"in s)throw new J(s.error,"failed to get fee for message");if(s.result===null)throw new Error("invalid blockhash");return s.result}async getRecentPrioritizationFees(e){let t=e?.lockedWritableAccounts?.map(s=>s.toBase58()),n=t?.length?[t]:[],i=await this._rpcRequest("getRecentPrioritizationFees",n),o=W(i,h1);if("error"in o)throw new J(o.error,"failed to get recent prioritization fees");return o.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){let{commitment:t,config:n}=Re(e),i=this._buildArgs([],t,void 0,n),o=await this._rpcRequest("getLatestBlockhash",i),s=W(o,J1);if("error"in s)throw new J(s.error,"failed to get latest blockhash");return s.result}async isBlockhashValid(e,t){let{commitment:n,config:i}=Re(t),o=this._buildArgs([e],n,void 0,i),s=await this._rpcRequest("isBlockhashValid",o),u=W(s,Q1);if("error"in u)throw new J(u.error,"failed to determine if the blockhash `"+e+"`is valid");return u.result}async getVersion(){let e=await this._rpcRequest("getVersion",[]),t=W(e,ce(n1));if("error"in t)throw new J(t.error,"failed to get version");return t.result}async getGenesisHash(){let e=await this._rpcRequest("getGenesisHash",[]),t=W(e,ce($()));if("error"in t)throw new J(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){let{commitment:n,config:i}=Re(t),o=this._buildArgsAtLeastConfirmed([e],n,void 0,i),s=await this._rpcRequest("getBlock",o);try{switch(i?.transactionDetails){case"accounts":{let u=W(s,G1);if("error"in u)throw u.error;return u.result}case"none":{let u=W(s,W1);if("error"in u)throw u.error;return u.result}default:{let u=W(s,$1);if("error"in u)throw u.error;let{result:f}=u;return f?{...f,transactions:f.transactions.map(({transaction:w,meta:R,version:S})=>({meta:R,transaction:{...w,message:Qa(S,w.message)},version:S}))}:null}}}catch(u){throw new J(u,"failed to get confirmed block")}}async getParsedBlock(e,t){let{commitment:n,config:i}=Re(t),o=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),s=await this._rpcRequest("getBlock",o);try{switch(i?.transactionDetails){case"accounts":{let u=W(s,X1);if("error"in u)throw u.error;return u.result}case"none":{let u=W(s,j1);if("error"in u)throw u.error;return u.result}default:{let u=W(s,Y1);if("error"in u)throw u.error;return u.result}}}catch(u){throw new J(u,"failed to get block")}}async getBlockProduction(e){let t,n;if(typeof e=="string")n=e;else if(e){let{commitment:u,...f}=e;n=u,t=f}let i=this._buildArgs([],n,"base64",t),o=await this._rpcRequest("getBlockProduction",i),s=W(o,s1);if("error"in s)throw new J(s.error,"failed to get block production information");return s.result}async getTransaction(e,t){let{commitment:n,config:i}=Re(t),o=this._buildArgsAtLeastConfirmed([e],n,void 0,i),s=await this._rpcRequest("getTransaction",o),u=W(s,ec);if("error"in u)throw new J(u.error,"failed to get transaction");let f=u.result;return f&&{...f,transaction:{...f.transaction,message:Qa(f.version,f.transaction.message)}}}async getParsedTransaction(e,t){let{commitment:n,config:i}=Re(t),o=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",i),s=await this._rpcRequest("getTransaction",o),u=W(s,Co);if("error"in u)throw new J(u.error,"failed to get transaction");return u.result}async getParsedTransactions(e,t){let{commitment:n,config:i}=Re(t),o=e.map(f=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([f],n,"jsonParsed",i)}));return(await this._rpcBatchRequest(o)).map(f=>{let w=W(f,Co);if("error"in w)throw new J(w.error,"failed to get transactions");return w.result})}async getTransactions(e,t){let{commitment:n,config:i}=Re(t),o=e.map(f=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([f],n,void 0,i)}));return(await this._rpcBatchRequest(o)).map(f=>{let w=W(f,ec);if("error"in w)throw new J(w.error,"failed to get transactions");let R=w.result;return R&&{...R,transaction:{...R.transaction,message:Qa(R.version,R.transaction.message)}}})}async getConfirmedBlock(e,t){let n=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getBlock",n),o=W(i,Z1);if("error"in o)throw new J(o.error,"failed to get confirmed block");let s=o.result;if(!s)throw new Error("Confirmed block "+e+" not found");let u={...s,transactions:s.transactions.map(({transaction:f,meta:w})=>{let R=new xr(f.message);return{meta:w,transaction:{...f,message:R}}})};return{...u,transactions:u.transactions.map(({transaction:f,meta:w})=>({meta:w,transaction:we.populate(f.message,f.signatures)}))}}async getBlocks(e,t,n){let i=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],n),o=await this._rpcRequest("getBlocks",i),s=W(o,ce(Y(M())));if("error"in s)throw new J(s.error,"failed to get blocks");return s.result}async getBlockSignatures(e,t){let n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),o=W(i,Ml);if("error"in o)throw new J(o.error,"failed to get block");let s=o.result;if(!s)throw new Error("Block "+e+" not found");return s}async getConfirmedBlockSignatures(e,t){let n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),i=await this._rpcRequest("getBlock",n),o=W(i,Ml);if("error"in o)throw new J(o.error,"failed to get confirmed block");let s=o.result;if(!s)throw new Error("Confirmed block "+e+" not found");return s}async getConfirmedTransaction(e,t){let n=this._buildArgsAtLeastConfirmed([e],t),i=await this._rpcRequest("getTransaction",n),o=W(i,ec);if("error"in o)throw new J(o.error,"failed to get transaction");let s=o.result;if(!s)return s;let u=new xr(s.transaction.message),f=s.transaction.signatures;return{...s,transaction:we.populate(u,f)}}async getParsedConfirmedTransaction(e,t){let n=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),i=await this._rpcRequest("getTransaction",n),o=W(i,Co);if("error"in o)throw new J(o.error,"failed to get confirmed transaction");return o.result}async getParsedConfirmedTransactions(e,t){let n=e.map(s=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([s],t,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(s=>{let u=W(s,Co);if("error"in u)throw new J(u.error,"failed to get confirmed transactions");return u.result})}async getConfirmedSignaturesForAddress(e,t,n){let i={},o=await this.getFirstAvailableBlock();for(;!("until"in i)&&(t--,!(t<=0||t<o));)try{let f=await this.getConfirmedBlockSignatures(t,"finalized");f.signatures.length>0&&(i.until=f.signatures[f.signatures.length-1].toString())}catch(f){if(f instanceof Error&&f.message.includes("skipped"))continue;throw f}let s=await this.getSlot("finalized");for(;!("before"in i)&&(n++,!(n>s));)try{let f=await this.getConfirmedBlockSignatures(n);f.signatures.length>0&&(i.before=f.signatures[f.signatures.length-1].toString())}catch(f){if(f instanceof Error&&f.message.includes("skipped"))continue;throw f}return(await this.getConfirmedSignaturesForAddress2(e,i)).map(f=>f.signature)}async getConfirmedSignaturesForAddress2(e,t,n){let i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),o=await this._rpcRequest("getConfirmedSignaturesForAddress2",i),s=W(o,v1);if("error"in s)throw new J(s.error,"failed to get confirmed signatures for address");return s.result}async getSignaturesForAddress(e,t,n){let i=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),o=await this._rpcRequest("getSignaturesForAddress",i),s=W(o,I1);if("error"in s)throw new J(s.error,"failed to get signatures for address");return s.result}async getAddressLookupTable(e,t){let{context:n,value:i}=await this.getAccountInfoAndContext(e,t),o=null;return i!==null&&(o=new Ho({key:e,state:Ho.deserialize(i.data)})),{context:n,value:o}}async getNonceAndContext(e,t){let{context:n,value:i}=await this.getAccountInfoAndContext(e,t),o=null;return i!==null&&(o=sc.fromAccountData(i.data)),{context:n,value:o}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+n)})}async requestAirdrop(e,t){let n=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),i=W(n,nw);if("error"in i)throw new J(i.error,`airdrop to ${e.toBase58()} failed`);return i.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await pn(100);let n=Date.now()-this._blockhashInfo.lastFetch>=$_;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{let e=Date.now(),t=this._blockhashInfo.latestBlockhash,n=t?t.blockhash:null;for(let i=0;i<50;i++){let o=await this.getLatestBlockhash("finalized");if(n!==o.blockhash)return this._blockhashInfo={latestBlockhash:o,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},o;await pn(Yl/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){let{commitment:t,config:n}=Re(e),i=this._buildArgs([],t,"base64",n),o=await this._rpcRequest("getStakeMinimumDelegation",i),s=W(o,Oe(M()));if("error"in s)throw new J(s.error,"failed to get stake minimum delegation");return s.result}async simulateTransaction(e,t,n){if("message"in e){let T=e.serialize(),P=ie.Buffer.from(T).toString("base64");if(Array.isArray(t)||n!==void 0)throw new Error("Invalid arguments");let C=t||{};C.encoding="base64","commitment"in C||(C.commitment=this.commitment),t&&typeof t=="object"&&"innerInstructions"in t&&(C.innerInstructions=t.innerInstructions);let L=[P,C],F=await this._rpcRequest("simulateTransaction",L),V=W(F,Ll);if("error"in V)throw new Error("failed to simulate transaction: "+V.error.message);return V.result}let i;if(e instanceof we){let k=e;i=new we,i.feePayer=k.feePayer,i.instructions=e.instructions,i.nonceInfo=k.nonceInfo,i.signatures=k.signatures}else i=we.populate(e),i._message=i._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");let o=t;if(i.nonceInfo&&o)i.sign(...o);else{let k=this._disableBlockhashCaching;for(;;){let T=await this._blockhashWithExpiryBlockHeight(k);if(i.lastValidBlockHeight=T.lastValidBlockHeight,i.recentBlockhash=T.blockhash,!o)break;if(i.sign(...o),!i.signature)throw new Error("!signature");let P=i.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(P)&&!this._blockhashInfo.transactionSignatures.includes(P)){this._blockhashInfo.simulatedSignatures.push(P);break}else k=!0}}let s=i._compile(),u=s.serialize(),w=i._serialize(u).toString("base64"),R={encoding:"base64",commitment:this.commitment};if(n){let k=(Array.isArray(n)?n:s.nonProgramIds()).map(T=>T.toBase58());R.accounts={encoding:"base64",addresses:k}}o&&(R.sigVerify=!0),t&&typeof t=="object"&&"innerInstructions"in t&&(R.innerInstructions=t.innerInstructions);let S=[w,R],I=await this._rpcRequest("simulateTransaction",S),x=W(I,Ll);if("error"in x){let k;if("data"in x.error&&(k=x.error.data.logs,k&&Array.isArray(k))){let T=`
    `,P=T+k.join(T);console.error(x.error.message,P)}throw new xi({action:"simulate",signature:"",transactionMessage:x.error.message,logs:k})}return x.result}async sendTransaction(e,t,n){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");let s=e.serialize();return await this.sendRawTransaction(s,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");let i=t;if(e.nonceInfo)e.sign(...i);else{let s=this._disableBlockhashCaching;for(;;){let u=await this._blockhashWithExpiryBlockHeight(s);if(e.lastValidBlockHeight=u.lastValidBlockHeight,e.recentBlockhash=u.blockhash,e.sign(...i),!e.signature)throw new Error("!signature");let f=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(f))s=!0;else{this._blockhashInfo.transactionSignatures.push(f);break}}}let o=e.serialize();return await this.sendRawTransaction(o,n)}async sendRawTransaction(e,t){let n=le(e).toString("base64");return await this.sendEncodedTransaction(n,t)}async sendEncodedTransaction(e,t){let n={encoding:"base64"},i=t&&t.skipPreflight,o=i===!0?"processed":t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(n.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(n.minContextSlot=t.minContextSlot),i&&(n.skipPreflight=i),o&&(n.preflightCommitment=o);let s=[e,n],u=await this._rpcRequest("sendTransaction",s),f=W(u,iw);if("error"in f){let w;throw"data"in f.error&&(w=f.error.data.logs),new xi({action:i?"send":"simulate",signature:"",transactionMessage:f.error.message,logs:w})}return f.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,n])=>{this._setSubscription(t,{...n,state:"pending"})})}_setSubscription(e,t){let n=this._subscriptionsByHash[e]?.state;if(this._subscriptionsByHash[e]=t,n!==t.state){let i=this._subscriptionStateChangeCallbacksByHash[e];i&&i.forEach(o=>{try{o(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){let n=this._subscriptionHashByClientSubscriptionId[e];if(n==null)return()=>{};let i=this._subscriptionStateChangeCallbacksByHash[n]||=new Set;return i.add(t),()=>{i.delete(t),i.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}let e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{let i=this._subscriptionsByHash[n];if(i!==void 0)switch(i.state){case"pending":case"unsubscribed":if(i.callbacks.size===0){delete this._subscriptionsByHash[n],i.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{let{args:o,method:s}=i;try{this._setSubscription(n,{...i,state:"subscribing"});let u=await this._rpcWebSocket.call(s,o);this._setSubscription(n,{...i,serverSubscriptionId:u,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[u]=i.callbacks,await this._updateSubscriptions()}catch(u){if(console.error(`Received ${u instanceof Error?"":"JSON-RPC "}error calling \`${s}\``,{args:o,error:u}),!t())return;this._setSubscription(n,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":i.callbacks.size===0&&await(async()=>{let{serverSubscriptionId:o,unsubscribeMethod:s}=i;if(this._subscriptionsAutoDisposedByRpc.has(o))this._subscriptionsAutoDisposedByRpc.delete(o);else{this._setSubscription(n,{...i,state:"unsubscribing"}),this._setSubscription(n,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(s,[o])}catch(u){if(u instanceof Error&&console.error(`${s} error:`,u.message),!t())return;this._setSubscription(n,{...i,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,t){let n=this._subscriptionCallbacksByServerSubscriptionId[e];n!==void 0&&n.forEach(i=>{try{i(...t)}catch(o){console.error(o)}})}_wsOnAccountNotification(e){let{result:t,subscription:n}=W(e,O1);this._handleServerNotification(n,[t.value,t.context])}_makeSubscription(e,t){let n=this._nextClientSubscriptionId++,i=kl([e.method,t]),o=this._subscriptionsByHash[i];return o===void 0?this._subscriptionsByHash[i]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:o.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[n]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];let s=this._subscriptionsByHash[i];ge(s!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),s.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(e,t,n){let{commitment:i,config:o}=Re(n),s=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",o);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},s)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){let{result:t,subscription:n}=W(e,k1);this._handleServerNotification(n,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,n,i){let{commitment:o,config:s}=Re(n),u=this._buildArgs([e.toBase58()],o||this._commitment||"finalized","base64",s||(i?{filters:Tl(i)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},u)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,n){let i=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],n||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},i)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){let{result:t,subscription:n}=W(e,sw);this._handleServerNotification(n,[t.value,t.context])}_wsOnSlotNotification(e){let{result:t,subscription:n}=W(e,T1);this._handleServerNotification(n,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){let{result:t,subscription:n}=W(e,C1);this._handleServerNotification(n,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){let n=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,n,i){let o=t||this._commitment;if(o||n||i){let s={};n&&(s.encoding=n),o&&(s.commitment=o),i&&(s=Object.assign(s,i)),e.push(s)}return e}_buildArgsAtLeastConfirmed(e,t,n,i){let o=t||this._commitment;if(o&&!["confirmed","finalized"].includes(o))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,n,i)}_wsOnSignatureNotification(e){let{result:t,subscription:n}=W(e,M1);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,n){let i=this._buildArgs([e],n||this._commitment||"finalized"),o=this._makeSubscription({callback:(s,u)=>{if(s.type==="status"){t(s.result,u);try{this.removeSignatureListener(o)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return o}onSignatureWithOptions(e,t,n){let{commitment:i,...o}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},s=this._buildArgs([e],i,void 0,o),u=this._makeSubscription({callback:(f,w)=>{t(f,w);try{this.removeSignatureListener(u)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return u}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){let{result:t,subscription:n}=W(e,P1);this._handleServerNotification(n,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}},dc=class r{constructor(e){this._keypair=void 0,this._keypair=e??Al()}static generate(){return new r(Al())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");let n=e.slice(32,64);if(!t||!t.skipValidation){let i=e.slice(0,32),o=ic(i);for(let s=0;s<32;s++)if(n[s]!==o[s])throw new Error("provided secretKey is invalid")}return new r({publicKey:n,secretKey:e})}static fromSeed(e){let t=ic(e),n=new Uint8Array(64);return n.set(e),n.set(t,32),new r({publicKey:t,secretKey:n})}get publicKey(){return new Z(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}},Ei=Object.freeze({CreateLookupTable:{index:0,layout:O.struct([O.u32("instruction"),Vn("recentSlot"),O.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:O.struct([O.u32("instruction")])},ExtendLookupTable:{index:2,layout:O.struct([O.u32("instruction"),Vn(),O.seq(ue(),O.offset(O.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:O.struct([O.u32("instruction")])},CloseLookupTable:{index:4,layout:O.struct([O.u32("instruction")])}});var pc=class{constructor(){}static createLookupTable(e){let[t,n]=Z.findProgramAddressSync([e.authority.toBuffer(),Ia().encode(e.recentSlot)],this.programId),i=Ei.CreateLookupTable,o=he(i,{recentSlot:BigInt(e.recentSlot),bumpSeed:n}),s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:wt.programId,isSigner:!1,isWritable:!1}];return[new ye({programId:this.programId,keys:s,data:o}),t]}static freezeLookupTable(e){let t=Ei.FreezeLookupTable,n=he(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new ye({programId:this.programId,keys:i,data:n})}static extendLookupTable(e){let t=Ei.ExtendLookupTable,n=he(t,{addresses:e.addresses.map(o=>o.toBytes())}),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&i.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:wt.programId,isSigner:!1,isWritable:!1}),new ye({programId:this.programId,keys:i,data:n})}static deactivateLookupTable(e){let t=Ei.DeactivateLookupTable,n=he(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new ye({programId:this.programId,keys:i,data:n})}static closeLookupTable(e){let t=Ei.CloseLookupTable,n=he(t),i=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new ye({programId:this.programId,keys:i,data:n})}};pc.programId=new Z("AddressLookupTab1e1111111111111111111111111");var Mo=Object.freeze({RequestUnits:{index:0,layout:O.struct([O.u8("instruction"),O.u32("units"),O.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:O.struct([O.u8("instruction"),O.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:O.struct([O.u8("instruction"),O.u32("units")])},SetComputeUnitPrice:{index:3,layout:O.struct([O.u8("instruction"),Vn("microLamports")])}}),$n=class{constructor(){}static requestUnits(e){let t=Mo.RequestUnits,n=he(t,e);return new ye({keys:[],programId:this.programId,data:n})}static requestHeapFrame(e){let t=Mo.RequestHeapFrame,n=he(t,e);return new ye({keys:[],programId:this.programId,data:n})}static setComputeUnitLimit(e){let t=Mo.SetComputeUnitLimit,n=he(t,e);return new ye({keys:[],programId:this.programId,data:n})}static setComputeUnitPrice(e){let t=Mo.SetComputeUnitPrice,n=he(t,{microLamports:BigInt(e.microLamports)});return new ye({keys:[],programId:this.programId,data:n})}};$n.programId=new Z("ComputeBudget111111111111111111111111111111");var Pl=64,Ul=32,Dl=64,zl=O.struct([O.u8("numSignatures"),O.u8("padding"),O.u16("signatureOffset"),O.u16("signatureInstructionIndex"),O.u16("publicKeyOffset"),O.u16("publicKeyInstructionIndex"),O.u16("messageDataOffset"),O.u16("messageDataSize"),O.u16("messageInstructionIndex")]),gc=class r{constructor(){}static createInstructionWithPublicKey(e){let{publicKey:t,message:n,signature:i,instructionIndex:o}=e;ge(t.length===Ul,`Public Key must be ${Ul} bytes but received ${t.length} bytes`),ge(i.length===Dl,`Signature must be ${Dl} bytes but received ${i.length} bytes`);let s=zl.span,u=s+t.length,f=u+i.length,w=1,R=ie.Buffer.alloc(f+n.length),S=o??65535;return zl.encode({numSignatures:w,padding:0,signatureOffset:u,signatureInstructionIndex:S,publicKeyOffset:s,publicKeyInstructionIndex:S,messageDataOffset:f,messageDataSize:n.length,messageInstructionIndex:S},R),R.fill(t,s),R.fill(i,u),R.fill(n,f),new ye({keys:[],programId:r.programId,data:R})}static createInstructionWithPrivateKey(e){let{privateKey:t,message:n,instructionIndex:i}=e;ge(t.length===Pl,`Private key must be ${Pl} bytes but received ${t.length} bytes`);try{let o=dc.fromSecretKey(t),s=o.publicKey.toBytes(),u=mc(n,o.secretKey);return this.createInstructionWithPublicKey({publicKey:s,message:n,signature:u,instructionIndex:i})}catch(o){throw new Error(`Error creating instruction; ${o}`)}}};gc.programId=new Z("Ed25519SigVerify111111111111111111111111111");var cw=(r,e)=>{let t=Lo.sign(r,e);return[t.toCompactRawBytes(),t.recovery]};Lo.utils.isValidPrivateKey;var uw=Lo.getPublicKey,Fl=32,tc=20,Kl=64,fw=11,rc=O.struct([O.u8("numSignatures"),O.u16("signatureOffset"),O.u8("signatureInstructionIndex"),O.u16("ethAddressOffset"),O.u8("ethAddressInstructionIndex"),O.u16("messageDataOffset"),O.u16("messageDataSize"),O.u8("messageInstructionIndex"),O.blob(20,"ethAddress"),O.blob(64,"signature"),O.u8("recoveryId")]),yc=class r{constructor(){}static publicKeyToEthAddress(e){ge(e.length===Kl,`Public key must be ${Kl} bytes but received ${e.length} bytes`);try{return ie.Buffer.from(qa(le(e))).slice(-tc)}catch(t){throw new Error(`Error constructing Ethereum address: ${t}`)}}static createInstructionWithPublicKey(e){let{publicKey:t,message:n,signature:i,recoveryId:o,instructionIndex:s}=e;return r.createInstructionWithEthAddress({ethAddress:r.publicKeyToEthAddress(t),message:n,signature:i,recoveryId:o,instructionIndex:s})}static createInstructionWithEthAddress(e){let{ethAddress:t,message:n,signature:i,recoveryId:o,instructionIndex:s=0}=e,u;typeof t=="string"?t.startsWith("0x")?u=ie.Buffer.from(t.substr(2),"hex"):u=ie.Buffer.from(t,"hex"):u=t,ge(u.length===tc,`Address must be ${tc} bytes but received ${u.length} bytes`);let f=1+fw,w=f,R=f+u.length,S=R+i.length+1,I=1,x=ie.Buffer.alloc(rc.span+n.length);return rc.encode({numSignatures:I,signatureOffset:R,signatureInstructionIndex:s,ethAddressOffset:w,ethAddressInstructionIndex:s,messageDataOffset:S,messageDataSize:n.length,messageInstructionIndex:s,signature:le(i),ethAddress:le(u),recoveryId:o},x),x.fill(le(n),rc.span),new ye({keys:[],programId:r.programId,data:x})}static createInstructionWithPrivateKey(e){let{privateKey:t,message:n,instructionIndex:i}=e;ge(t.length===Fl,`Private key must be ${Fl} bytes but received ${t.length} bytes`);try{let o=le(t),s=uw(o,!1).slice(1),u=ie.Buffer.from(qa(le(n))),[f,w]=cw(u,o);return this.createInstructionWithPublicKey({publicKey:s,message:n,signature:f,recoveryId:w,instructionIndex:i})}catch(o){throw new Error(`Error creating instruction; ${o}`)}}};yc.programId=new Z("KeccakSecp256k11111111111111111111111111111");var sh,lw=new Z("StakeConfig11111111111111111111111111111111");var Ii=class{constructor(e,t,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=n}};sh=Ii;Ii.default=new sh(0,0,Z.default);var Vr=Object.freeze({Initialize:{index:0,layout:O.struct([O.u32("instruction"),v_(),I_()])},Authorize:{index:1,layout:O.struct([O.u32("instruction"),ue("newAuthorized"),O.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:O.struct([O.u32("instruction")])},Split:{index:3,layout:O.struct([O.u32("instruction"),O.ns64("lamports")])},Withdraw:{index:4,layout:O.struct([O.u32("instruction"),O.ns64("lamports")])},Deactivate:{index:5,layout:O.struct([O.u32("instruction")])},Merge:{index:7,layout:O.struct([O.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:O.struct([O.u32("instruction"),ue("newAuthorized"),O.u32("stakeAuthorizationType"),qn("authoritySeed"),ue("authorityOwner")])}}),iR=Object.freeze({Staker:{index:0},Withdrawer:{index:1}}),Wo=class{constructor(){}static initialize(e){let{stakePubkey:t,authorized:n,lockup:i}=e,o=i||Ii.default,s=Vr.Initialize,u=he(s,{authorized:{staker:le(n.staker.toBuffer()),withdrawer:le(n.withdrawer.toBuffer())},lockup:{unixTimestamp:o.unixTimestamp,epoch:o.epoch,custodian:le(o.custodian.toBuffer())}}),f={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Ai,isSigner:!1,isWritable:!1}],programId:this.programId,data:u};return new ye(f)}static createAccountWithSeed(e){let t=new we;t.add(wt.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));let{stakePubkey:n,authorized:i,lockup:o}=e;return t.add(this.initialize({stakePubkey:n,authorized:i,lockup:o}))}static createAccount(e){let t=new we;t.add(wt.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));let{stakePubkey:n,authorized:i,lockup:o}=e;return t.add(this.initialize({stakePubkey:n,authorized:i,lockup:o}))}static delegate(e){let{stakePubkey:t,authorizedPubkey:n,votePubkey:i}=e,o=Vr.Delegate,s=he(o);return new we().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:Sr,isSigner:!1,isWritable:!1},{pubkey:ja,isSigner:!1,isWritable:!1},{pubkey:lw,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static authorize(e){let{stakePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:i,stakeAuthorizationType:o,custodianPubkey:s}=e,u=Vr.Authorize,f=he(u,{newAuthorized:le(i.toBuffer()),stakeAuthorizationType:o.index}),w=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Sr,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return s&&w.push({pubkey:s,isSigner:!0,isWritable:!1}),new we().add({keys:w,programId:this.programId,data:f})}static authorizeWithSeed(e){let{stakePubkey:t,authorityBase:n,authoritySeed:i,authorityOwner:o,newAuthorizedPubkey:s,stakeAuthorizationType:u,custodianPubkey:f}=e,w=Vr.AuthorizeWithSeed,R=he(w,{newAuthorized:le(s.toBuffer()),stakeAuthorizationType:u.index,authoritySeed:i,authorityOwner:le(o.toBuffer())}),S=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:Sr,isSigner:!1,isWritable:!1}];return f&&S.push({pubkey:f,isSigner:!0,isWritable:!1}),new we().add({keys:S,programId:this.programId,data:R})}static splitInstruction(e){let{stakePubkey:t,authorizedPubkey:n,splitStakePubkey:i,lamports:o}=e,s=Vr.Split,u=he(s,{lamports:o});return new ye({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:u})}static split(e,t){let n=new we;return n.add(wt.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:t,space:this.space,programId:this.programId})),n.add(this.splitInstruction(e))}static splitWithSeed(e,t){let{stakePubkey:n,authorizedPubkey:i,splitStakePubkey:o,basePubkey:s,seed:u,lamports:f}=e,w=new we;return w.add(wt.allocate({accountPubkey:o,basePubkey:s,seed:u,space:this.space,programId:this.programId})),t&&t>0&&w.add(wt.transfer({fromPubkey:e.authorizedPubkey,toPubkey:o,lamports:t})),w.add(this.splitInstruction({stakePubkey:n,authorizedPubkey:i,splitStakePubkey:o,lamports:f}))}static merge(e){let{stakePubkey:t,sourceStakePubKey:n,authorizedPubkey:i}=e,o=Vr.Merge,s=he(o);return new we().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:Sr,isSigner:!1,isWritable:!1},{pubkey:ja,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static withdraw(e){let{stakePubkey:t,authorizedPubkey:n,toPubkey:i,lamports:o,custodianPubkey:s}=e,u=Vr.Withdraw,f=he(u,{lamports:o}),w=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:Sr,isSigner:!1,isWritable:!1},{pubkey:ja,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return s&&w.push({pubkey:s,isSigner:!0,isWritable:!1}),new we().add({keys:w,programId:this.programId,data:f})}static deactivate(e){let{stakePubkey:t,authorizedPubkey:n}=e,i=Vr.Deactivate,o=he(i);return new we().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Sr,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}};Wo.programId=new Z("Stake11111111111111111111111111111111111111");Wo.space=200;var Ri=Object.freeze({InitializeAccount:{index:0,layout:O.struct([O.u32("instruction"),O_()])},Authorize:{index:1,layout:O.struct([O.u32("instruction"),ue("newAuthorized"),O.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:O.struct([O.u32("instruction"),O.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:O.struct([O.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:O.struct([O.u32("instruction"),N_()])}}),oR=Object.freeze({Voter:{index:0},Withdrawer:{index:1}}),Go=class r{constructor(){}static initializeAccount(e){let{votePubkey:t,nodePubkey:n,voteInit:i}=e,o=Ri.InitializeAccount,s=he(o,{voteInit:{nodePubkey:le(i.nodePubkey.toBuffer()),authorizedVoter:le(i.authorizedVoter.toBuffer()),authorizedWithdrawer:le(i.authorizedWithdrawer.toBuffer()),commission:i.commission}}),u={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Ai,isSigner:!1,isWritable:!1},{pubkey:Sr,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:s};return new ye(u)}static createAccount(e){let t=new we;return t.add(wt.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){let{votePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:i,voteAuthorizationType:o}=e,s=Ri.Authorize,u=he(s,{newAuthorized:le(i.toBuffer()),voteAuthorizationType:o.index}),f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Sr,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new we().add({keys:f,programId:this.programId,data:u})}static authorizeWithSeed(e){let{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:n,currentAuthorityDerivedKeySeed:i,newAuthorizedPubkey:o,voteAuthorizationType:s,votePubkey:u}=e,f=Ri.AuthorizeWithSeed,w=he(f,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:le(n.toBuffer()),currentAuthorityDerivedKeySeed:i,newAuthorized:le(o.toBuffer()),voteAuthorizationType:s.index}}),R=[{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:Sr,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return new we().add({keys:R,programId:this.programId,data:w})}static withdraw(e){let{votePubkey:t,authorizedWithdrawerPubkey:n,lamports:i,toPubkey:o}=e,s=Ri.Withdraw,u=he(s,{lamports:i}),f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return new we().add({keys:f,programId:this.programId,data:u})}static safeWithdraw(e,t,n){if(e.lamports>t-n)throw new Error("Withdraw will leave vote account with insufficient funds.");return r.withdraw(e)}static updateValidatorIdentity(e){let{votePubkey:t,authorizedWithdrawerPubkey:n,nodePubkey:i}=e,o=Ri.UpdateValidatorIdentity,s=he(o),u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new we().add({keys:u,programId:this.programId,data:s})}};Go.programId=new Z("Vote111111111111111111111111111111111111111");Go.space=3762;var sR=new Z("Va1idator1nfo111111111111111111111111111111"),aR=H({name:$(),website:te($()),details:te($()),iconUrl:te($()),keybaseUsername:te($())});var cR=new Z("Vote111111111111111111111111111111111111111"),uR=O.struct([ue("nodePubkey"),ue("authorizedWithdrawer"),O.u8("commission"),O.nu64(),O.seq(O.struct([O.nu64("slot"),O.u32("confirmationCount")]),O.offset(O.u32(),-8),"votes"),O.u8("rootSlotValid"),O.nu64("rootSlot"),O.nu64(),O.seq(O.struct([O.nu64("epoch"),ue("authorizedVoter")]),O.offset(O.u32(),-8),"authorizedVoters"),O.struct([O.seq(O.struct([ue("authorizedPubkey"),O.nu64("epochOfLastAuthorizedSwitch"),O.nu64("targetEpoch")]),32,"buf"),O.nu64("idx"),O.u8("isEmpty")],"priorVoters"),O.nu64(),O.seq(O.struct([O.nu64("epoch"),O.nu64("credits"),O.nu64("prevCredits")]),O.offset(O.u32(),-8),"epochCredits"),O.struct([O.nu64("slot"),O.nu64("timestamp")],"lastTimestamp")]);var Wr=new Z("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),Rc=new Z("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb"),ah=new Z("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),hR=new Z("So11111111111111111111111111111111111111112"),dR=new Z("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");var Gr=r=>{let e=r.decode.bind(r),t=r.encode.bind(r);return{decode:e,encode:t}};var Sc=ut(ar(),1),Yr=ut(ch(),1);var Zo=r=>e=>{let t=(0,Sc.blob)(r,e),{encode:n,decode:i}=Gr(t),o=t;return o.decode=(s,u)=>{let f=i(s,u);return(0,Yr.toBigIntLE)(Buffer.from(f))},o.encode=(s,u,f)=>{let w=(0,Yr.toBufferLE)(s,r);return n(w,u,f)},o},Jo=r=>e=>{let t=(0,Sc.blob)(r,e),{encode:n,decode:i}=Gr(t),o=t;return o.decode=(s,u)=>{let f=i(s,u);return(0,Yr.toBigIntBE)(Buffer.from(f))},o.encode=(s,u,f)=>{let w=(0,Yr.toBufferBE)(s,r);return n(w,u,f)},o},Xr=Zo(8),_R=Jo(8),yw=Zo(16),wR=Jo(16),bR=Zo(24),ER=Jo(24),RR=Zo(32),SR=Jo(32);var mw=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Ac=Math.ceil,Xt=Math.floor,Pt="[BigNumber Error] ",uh=Pt+"Number primitive has more than 15 significant digits: ",er=1e14,se=14,xc=9007199254740991,vc=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],jr=1e7,pt=1e9;function fh(r){var e,t,n,i=L.prototype={constructor:L,toString:null,valueOf:null},o=new L(1),s=20,u=4,f=-7,w=21,R=-1e7,S=1e7,I=!1,x=1,k=0,T={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},P="0123456789abcdefghijklmnopqrstuvwxyz",C=!0;function L(b,_){var v,B,N,p,a,c,l,d,g=this;if(!(g instanceof L))return new L(b,_);if(_==null){if(b&&b._isBigNumber===!0){g.s=b.s,!b.c||b.e>S?g.c=g.e=null:b.e<R?g.c=[g.e=0]:(g.e=b.e,g.c=b.c.slice());return}if((c=typeof b=="number")&&b*0==0){if(g.s=1/b<0?(b=-b,-1):1,b===~~b){for(p=0,a=b;a>=10;a/=10,p++);p>S?g.c=g.e=null:(g.e=p,g.c=[b]);return}d=String(b)}else{if(!mw.test(d=String(b)))return n(g,d,c);g.s=d.charCodeAt(0)==45?(d=d.slice(1),-1):1}(p=d.indexOf("."))>-1&&(d=d.replace(".","")),(a=d.search(/e/i))>0?(p<0&&(p=a),p+=+d.slice(a+1),d=d.substring(0,a)):p<0&&(p=d.length)}else{if(ve(_,2,P.length,"Base"),_==10&&C)return g=new L(b),j(g,s+g.e+1,u);if(d=String(b),c=typeof b=="number"){if(b*0!=0)return n(g,d,c,_);if(g.s=1/b<0?(d=d.slice(1),-1):1,L.DEBUG&&d.replace(/^0\.0*|\./,"").length>15)throw Error(uh+b)}else g.s=d.charCodeAt(0)===45?(d=d.slice(1),-1):1;for(v=P.slice(0,_),p=a=0,l=d.length;a<l;a++)if(v.indexOf(B=d.charAt(a))<0){if(B=="."){if(a>p){p=l;continue}}else if(!N&&(d==d.toUpperCase()&&(d=d.toLowerCase())||d==d.toLowerCase()&&(d=d.toUpperCase()))){N=!0,a=-1,p=0;continue}return n(g,String(b),c,_)}c=!1,d=t(d,_,10,g.s),(p=d.indexOf("."))>-1?d=d.replace(".",""):p=d.length}for(a=0;d.charCodeAt(a)===48;a++);for(l=d.length;d.charCodeAt(--l)===48;);if(d=d.slice(a,++l)){if(l-=a,c&&L.DEBUG&&l>15&&(b>xc||b!==Xt(b)))throw Error(uh+g.s*b);if((p=p-a-1)>S)g.c=g.e=null;else if(p<R)g.c=[g.e=0];else{if(g.e=p,g.c=[],a=(p+1)%se,p<0&&(a+=se),a<l){for(a&&g.c.push(+d.slice(0,a)),l-=se;a<l;)g.c.push(+d.slice(a,a+=se));a=se-(d=d.slice(a)).length}else a-=l;for(;a--;d+="0");g.c.push(+d)}}else g.c=[g.e=0]}L.clone=fh,L.ROUND_UP=0,L.ROUND_DOWN=1,L.ROUND_CEIL=2,L.ROUND_FLOOR=3,L.ROUND_HALF_UP=4,L.ROUND_HALF_DOWN=5,L.ROUND_HALF_EVEN=6,L.ROUND_HALF_CEIL=7,L.ROUND_HALF_FLOOR=8,L.EUCLID=9,L.config=L.set=function(b){var _,v;if(b!=null)if(typeof b=="object"){if(b.hasOwnProperty(_="DECIMAL_PLACES")&&(v=b[_],ve(v,0,pt,_),s=v),b.hasOwnProperty(_="ROUNDING_MODE")&&(v=b[_],ve(v,0,8,_),u=v),b.hasOwnProperty(_="EXPONENTIAL_AT")&&(v=b[_],v&&v.pop?(ve(v[0],-pt,0,_),ve(v[1],0,pt,_),f=v[0],w=v[1]):(ve(v,-pt,pt,_),f=-(w=v<0?-v:v))),b.hasOwnProperty(_="RANGE"))if(v=b[_],v&&v.pop)ve(v[0],-pt,-1,_),ve(v[1],1,pt,_),R=v[0],S=v[1];else if(ve(v,-pt,pt,_),v)R=-(S=v<0?-v:v);else throw Error(Pt+_+" cannot be zero: "+v);if(b.hasOwnProperty(_="CRYPTO"))if(v=b[_],v===!!v)if(v)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))I=v;else throw I=!v,Error(Pt+"crypto unavailable");else I=v;else throw Error(Pt+_+" not true or false: "+v);if(b.hasOwnProperty(_="MODULO_MODE")&&(v=b[_],ve(v,0,9,_),x=v),b.hasOwnProperty(_="POW_PRECISION")&&(v=b[_],ve(v,0,pt,_),k=v),b.hasOwnProperty(_="FORMAT"))if(v=b[_],typeof v=="object")T=v;else throw Error(Pt+_+" not an object: "+v);if(b.hasOwnProperty(_="ALPHABET"))if(v=b[_],typeof v=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(v))C=v.slice(0,10)=="0123456789",P=v;else throw Error(Pt+_+" invalid: "+v)}else throw Error(Pt+"Object expected: "+b);return{DECIMAL_PLACES:s,ROUNDING_MODE:u,EXPONENTIAL_AT:[f,w],RANGE:[R,S],CRYPTO:I,MODULO_MODE:x,POW_PRECISION:k,FORMAT:T,ALPHABET:P}},L.isBigNumber=function(b){if(!b||b._isBigNumber!==!0)return!1;if(!L.DEBUG)return!0;var _,v,B=b.c,N=b.e,p=b.s;e:if({}.toString.call(B)=="[object Array]"){if((p===1||p===-1)&&N>=-pt&&N<=pt&&N===Xt(N)){if(B[0]===0){if(N===0&&B.length===1)return!0;break e}if(_=(N+1)%se,_<1&&(_+=se),String(B[0]).length==_){for(_=0;_<B.length;_++)if(v=B[_],v<0||v>=er||v!==Xt(v))break e;if(v!==0)return!0}}}else if(B===null&&N===null&&(p===null||p===1||p===-1))return!0;throw Error(Pt+"Invalid BigNumber: "+b)},L.maximum=L.max=function(){return V(arguments,-1)},L.minimum=L.min=function(){return V(arguments,1)},L.random=(function(){var b=9007199254740992,_=Math.random()*b&2097151?function(){return Xt(Math.random()*b)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(v){var B,N,p,a,c,l=0,d=[],g=new L(o);if(v==null?v=s:ve(v,0,pt),a=Ac(v/se),I)if(crypto.getRandomValues){for(B=crypto.getRandomValues(new Uint32Array(a*=2));l<a;)c=B[l]*131072+(B[l+1]>>>11),c>=9e15?(N=crypto.getRandomValues(new Uint32Array(2)),B[l]=N[0],B[l+1]=N[1]):(d.push(c%1e14),l+=2);l=a/2}else if(crypto.randomBytes){for(B=crypto.randomBytes(a*=7);l<a;)c=(B[l]&31)*281474976710656+B[l+1]*1099511627776+B[l+2]*4294967296+B[l+3]*16777216+(B[l+4]<<16)+(B[l+5]<<8)+B[l+6],c>=9e15?crypto.randomBytes(7).copy(B,l):(d.push(c%1e14),l+=7);l=a/7}else throw I=!1,Error(Pt+"crypto unavailable");if(!I)for(;l<a;)c=_(),c<9e15&&(d[l++]=c%1e14);for(a=d[--l],v%=se,a&&v&&(c=vc[se-v],d[l]=Xt(a/c)*c);d[l]===0;d.pop(),l--);if(l<0)d=[p=0];else{for(p=-1;d[0]===0;d.splice(0,1),p-=se);for(l=1,c=d[0];c>=10;c/=10,l++);l<se&&(p-=se-l)}return g.e=p,g.c=d,g}})(),L.sum=function(){for(var b=1,_=arguments,v=new L(_[0]);b<_.length;)v=v.plus(_[b++]);return v},t=(function(){var b="0123456789";function _(v,B,N,p){for(var a,c=[0],l,d=0,g=v.length;d<g;){for(l=c.length;l--;c[l]*=B);for(c[0]+=p.indexOf(v.charAt(d++)),a=0;a<c.length;a++)c[a]>N-1&&(c[a+1]==null&&(c[a+1]=0),c[a+1]+=c[a]/N|0,c[a]%=N)}return c.reverse()}return function(v,B,N,p,a){var c,l,d,g,m,A,y,h,E=v.indexOf("."),K=s,z=u;for(E>=0&&(g=k,k=0,v=v.replace(".",""),h=new L(B),A=h.pow(v.length-E),k=g,h.c=_(vr(Yt(A.c),A.e,"0"),10,N,b),h.e=h.c.length),y=_(v,B,N,a?(c=P,b):(c=b,P)),d=g=y.length;y[--g]==0;y.pop());if(!y[0])return c.charAt(0);if(E<0?--d:(A.c=y,A.e=d,A.s=p,A=e(A,h,K,z,N),y=A.c,m=A.r,d=A.e),l=d+K+1,E=y[l],g=N/2,m=m||l<0||y[l+1]!=null,m=z<4?(E!=null||m)&&(z==0||z==(A.s<0?3:2)):E>g||E==g&&(z==4||m||z==6&&y[l-1]&1||z==(A.s<0?8:7)),l<1||!y[0])v=m?vr(c.charAt(1),-K,c.charAt(0)):c.charAt(0);else{if(y.length=l,m)for(--N;++y[--l]>N;)y[l]=0,l||(++d,y=[1].concat(y));for(g=y.length;!y[--g];);for(E=0,v="";E<=g;v+=c.charAt(y[E++]));v=vr(v,d,c.charAt(0))}return v}})(),e=(function(){function b(B,N,p){var a,c,l,d,g=0,m=B.length,A=N%jr,y=N/jr|0;for(B=B.slice();m--;)l=B[m]%jr,d=B[m]/jr|0,a=y*l+d*A,c=A*l+a%jr*jr+g,g=(c/p|0)+(a/jr|0)+y*d,B[m]=c%p;return g&&(B=[g].concat(B)),B}function _(B,N,p,a){var c,l;if(p!=a)l=p>a?1:-1;else for(c=l=0;c<p;c++)if(B[c]!=N[c]){l=B[c]>N[c]?1:-1;break}return l}function v(B,N,p,a){for(var c=0;p--;)B[p]-=c,c=B[p]<N[p]?1:0,B[p]=c*a+B[p]-N[p];for(;!B[0]&&B.length>1;B.splice(0,1));}return function(B,N,p,a,c){var l,d,g,m,A,y,h,E,K,z,q,G,ne,re,_e,ae,de,ct=B.s==N.s?1:-1,fe=B.c,oe=N.c;if(!fe||!fe[0]||!oe||!oe[0])return new L(!B.s||!N.s||(fe?oe&&fe[0]==oe[0]:!oe)?NaN:fe&&fe[0]==0||!oe?ct*0:ct/0);for(E=new L(ct),K=E.c=[],d=B.e-N.e,ct=p+d+1,c||(c=er,d=jt(B.e/se)-jt(N.e/se),ct=ct/se|0),g=0;oe[g]==(fe[g]||0);g++);if(oe[g]>(fe[g]||0)&&d--,ct<0)K.push(1),m=!0;else{for(re=fe.length,ae=oe.length,g=0,ct+=2,A=Xt(c/(oe[0]+1)),A>1&&(oe=b(oe,A,c),fe=b(fe,A,c),ae=oe.length,re=fe.length),ne=ae,z=fe.slice(0,ae),q=z.length;q<ae;z[q++]=0);de=oe.slice(),de=[0].concat(de),_e=oe[0],oe[1]>=c/2&&_e++;do{if(A=0,l=_(oe,z,ae,q),l<0){if(G=z[0],ae!=q&&(G=G*c+(z[1]||0)),A=Xt(G/_e),A>1)for(A>=c&&(A=c-1),y=b(oe,A,c),h=y.length,q=z.length;_(y,z,h,q)==1;)A--,v(y,ae<h?de:oe,h,c),h=y.length,l=1;else A==0&&(l=A=1),y=oe.slice(),h=y.length;if(h<q&&(y=[0].concat(y)),v(z,y,q,c),q=z.length,l==-1)for(;_(oe,z,ae,q)<1;)A++,v(z,ae<q?de:oe,q,c),q=z.length}else l===0&&(A++,z=[0]);K[g++]=A,z[0]?z[q++]=fe[ne]||0:(z=[fe[ne]],q=1)}while((ne++<re||z[0]!=null)&&ct--);m=z[0]!=null,K[0]||K.splice(0,1)}if(c==er){for(g=1,ct=K[0];ct>=10;ct/=10,g++);j(E,p+(E.e=g+d*se-1)+1,a,m)}else E.e=d,E.r=+m;return E}})();function F(b,_,v,B){var N,p,a,c,l;if(v==null?v=u:ve(v,0,8),!b.c)return b.toString();if(N=b.c[0],a=b.e,_==null)l=Yt(b.c),l=B==1||B==2&&(a<=f||a>=w)?es(l,a):vr(l,a,"0");else if(b=j(new L(b),_,v),p=b.e,l=Yt(b.c),c=l.length,B==1||B==2&&(_<=p||p<=f)){for(;c<_;l+="0",c++);l=es(l,p)}else if(_-=a+(B===2&&p>a),l=vr(l,p,"0"),p+1>c){if(--_>0)for(l+=".";_--;l+="0");}else if(_+=p-c,_>0)for(p+1==c&&(l+=".");_--;l+="0");return b.s<0&&N?"-"+l:l}function V(b,_){for(var v,B,N=1,p=new L(b[0]);N<b.length;N++)B=new L(b[N]),(!B.s||(v=wn(p,B))===_||v===0&&p.s===_)&&(p=B);return p}function Q(b,_,v){for(var B=1,N=_.length;!_[--N];_.pop());for(N=_[0];N>=10;N/=10,B++);return(v=B+v*se-1)>S?b.c=b.e=null:v<R?b.c=[b.e=0]:(b.e=v,b.c=_),b}n=(function(){var b=/^(-?)0([xbo])(?=\w[\w.]*$)/i,_=/^([^.]+)\.$/,v=/^\.([^.]+)$/,B=/^-?(Infinity|NaN)$/,N=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(p,a,c,l){var d,g=c?a:a.replace(N,"");if(B.test(g))p.s=isNaN(g)?null:g<0?-1:1;else{if(!c&&(g=g.replace(b,function(m,A,y){return d=(y=y.toLowerCase())=="x"?16:y=="b"?2:8,!l||l==d?A:m}),l&&(d=l,g=g.replace(_,"$1").replace(v,"0.$1")),a!=g))return new L(g,d);if(L.DEBUG)throw Error(Pt+"Not a"+(l?" base "+l:"")+" number: "+a);p.s=null}p.c=p.e=null}})();function j(b,_,v,B){var N,p,a,c,l,d,g,m=b.c,A=vc;if(m){e:{for(N=1,c=m[0];c>=10;c/=10,N++);if(p=_-N,p<0)p+=se,a=_,l=m[d=0],g=Xt(l/A[N-a-1]%10);else if(d=Ac((p+1)/se),d>=m.length)if(B){for(;m.length<=d;m.push(0));l=g=0,N=1,p%=se,a=p-se+1}else break e;else{for(l=c=m[d],N=1;c>=10;c/=10,N++);p%=se,a=p-se+N,g=a<0?0:Xt(l/A[N-a-1]%10)}if(B=B||_<0||m[d+1]!=null||(a<0?l:l%A[N-a-1]),B=v<4?(g||B)&&(v==0||v==(b.s<0?3:2)):g>5||g==5&&(v==4||B||v==6&&(p>0?a>0?l/A[N-a]:0:m[d-1])%10&1||v==(b.s<0?8:7)),_<1||!m[0])return m.length=0,B?(_-=b.e+1,m[0]=A[(se-_%se)%se],b.e=-_||0):m[0]=b.e=0,b;if(p==0?(m.length=d,c=1,d--):(m.length=d+1,c=A[se-p],m[d]=a>0?Xt(l/A[N-a]%A[a])*c:0),B)for(;;)if(d==0){for(p=1,a=m[0];a>=10;a/=10,p++);for(a=m[0]+=c,c=1;a>=10;a/=10,c++);p!=c&&(b.e++,m[0]==er&&(m[0]=1));break}else{if(m[d]+=c,m[d]!=er)break;m[d--]=0,c=1}for(p=m.length;m[--p]===0;m.pop());}b.e>S?b.c=b.e=null:b.e<R&&(b.c=[b.e=0])}return b}function ee(b){var _,v=b.e;return v===null?b.toString():(_=Yt(b.c),_=v<=f||v>=w?es(_,v):vr(_,v,"0"),b.s<0?"-"+_:_)}return i.absoluteValue=i.abs=function(){var b=new L(this);return b.s<0&&(b.s=1),b},i.comparedTo=function(b,_){return wn(this,new L(b,_))},i.decimalPlaces=i.dp=function(b,_){var v,B,N,p=this;if(b!=null)return ve(b,0,pt),_==null?_=u:ve(_,0,8),j(new L(p),b+p.e+1,_);if(!(v=p.c))return null;if(B=((N=v.length-1)-jt(this.e/se))*se,N=v[N])for(;N%10==0;N/=10,B--);return B<0&&(B=0),B},i.dividedBy=i.div=function(b,_){return e(this,new L(b,_),s,u)},i.dividedToIntegerBy=i.idiv=function(b,_){return e(this,new L(b,_),0,1)},i.exponentiatedBy=i.pow=function(b,_){var v,B,N,p,a,c,l,d,g,m=this;if(b=new L(b),b.c&&!b.isInteger())throw Error(Pt+"Exponent not an integer: "+ee(b));if(_!=null&&(_=new L(_)),c=b.e>14,!m.c||!m.c[0]||m.c[0]==1&&!m.e&&m.c.length==1||!b.c||!b.c[0])return g=new L(Math.pow(+ee(m),c?b.s*(2-Qo(b)):+ee(b))),_?g.mod(_):g;if(l=b.s<0,_){if(_.c?!_.c[0]:!_.s)return new L(NaN);B=!l&&m.isInteger()&&_.isInteger(),B&&(m=m.mod(_))}else{if(b.e>9&&(m.e>0||m.e<-1||(m.e==0?m.c[0]>1||c&&m.c[1]>=24e7:m.c[0]<8e13||c&&m.c[0]<=9999975e7)))return p=m.s<0&&Qo(b)?-0:0,m.e>-1&&(p=1/p),new L(l?1/p:p);k&&(p=Ac(k/se+2))}for(c?(v=new L(.5),l&&(b.s=1),d=Qo(b)):(N=Math.abs(+ee(b)),d=N%2),g=new L(o);;){if(d){if(g=g.times(m),!g.c)break;p?g.c.length>p&&(g.c.length=p):B&&(g=g.mod(_))}if(N){if(N=Xt(N/2),N===0)break;d=N%2}else if(b=b.times(v),j(b,b.e+1,1),b.e>14)d=Qo(b);else{if(N=+ee(b),N===0)break;d=N%2}m=m.times(m),p?m.c&&m.c.length>p&&(m.c.length=p):B&&(m=m.mod(_))}return B?g:(l&&(g=o.div(g)),_?g.mod(_):p?j(g,k,u,a):g)},i.integerValue=function(b){var _=new L(this);return b==null?b=u:ve(b,0,8),j(_,_.e+1,b)},i.isEqualTo=i.eq=function(b,_){return wn(this,new L(b,_))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(b,_){return wn(this,new L(b,_))>0},i.isGreaterThanOrEqualTo=i.gte=function(b,_){return(_=wn(this,new L(b,_)))===1||_===0},i.isInteger=function(){return!!this.c&&jt(this.e/se)>this.c.length-2},i.isLessThan=i.lt=function(b,_){return wn(this,new L(b,_))<0},i.isLessThanOrEqualTo=i.lte=function(b,_){return(_=wn(this,new L(b,_)))===-1||_===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(b,_){var v,B,N,p,a=this,c=a.s;if(b=new L(b,_),_=b.s,!c||!_)return new L(NaN);if(c!=_)return b.s=-_,a.plus(b);var l=a.e/se,d=b.e/se,g=a.c,m=b.c;if(!l||!d){if(!g||!m)return g?(b.s=-_,b):new L(m?a:NaN);if(!g[0]||!m[0])return m[0]?(b.s=-_,b):new L(g[0]?a:u==3?-0:0)}if(l=jt(l),d=jt(d),g=g.slice(),c=l-d){for((p=c<0)?(c=-c,N=g):(d=l,N=m),N.reverse(),_=c;_--;N.push(0));N.reverse()}else for(B=(p=(c=g.length)<(_=m.length))?c:_,c=_=0;_<B;_++)if(g[_]!=m[_]){p=g[_]<m[_];break}if(p&&(N=g,g=m,m=N,b.s=-b.s),_=(B=m.length)-(v=g.length),_>0)for(;_--;g[v++]=0);for(_=er-1;B>c;){if(g[--B]<m[B]){for(v=B;v&&!g[--v];g[v]=_);--g[v],g[B]+=er}g[B]-=m[B]}for(;g[0]==0;g.splice(0,1),--d);return g[0]?Q(b,g,d):(b.s=u==3?-1:1,b.c=[b.e=0],b)},i.modulo=i.mod=function(b,_){var v,B,N=this;return b=new L(b,_),!N.c||!b.s||b.c&&!b.c[0]?new L(NaN):!b.c||N.c&&!N.c[0]?new L(N):(x==9?(B=b.s,b.s=1,v=e(N,b,0,3),b.s=B,v.s*=B):v=e(N,b,0,x),b=N.minus(v.times(b)),!b.c[0]&&x==1&&(b.s=N.s),b)},i.multipliedBy=i.times=function(b,_){var v,B,N,p,a,c,l,d,g,m,A,y,h,E,K,z=this,q=z.c,G=(b=new L(b,_)).c;if(!q||!G||!q[0]||!G[0])return!z.s||!b.s||q&&!q[0]&&!G||G&&!G[0]&&!q?b.c=b.e=b.s=null:(b.s*=z.s,!q||!G?b.c=b.e=null:(b.c=[0],b.e=0)),b;for(B=jt(z.e/se)+jt(b.e/se),b.s*=z.s,l=q.length,m=G.length,l<m&&(h=q,q=G,G=h,N=l,l=m,m=N),N=l+m,h=[];N--;h.push(0));for(E=er,K=jr,N=m;--N>=0;){for(v=0,A=G[N]%K,y=G[N]/K|0,a=l,p=N+a;p>N;)d=q[--a]%K,g=q[a]/K|0,c=y*d+g*A,d=A*d+c%K*K+h[p]+v,v=(d/E|0)+(c/K|0)+y*g,h[p--]=d%E;h[p]=v}return v?++B:h.splice(0,1),Q(b,h,B)},i.negated=function(){var b=new L(this);return b.s=-b.s||null,b},i.plus=function(b,_){var v,B=this,N=B.s;if(b=new L(b,_),_=b.s,!N||!_)return new L(NaN);if(N!=_)return b.s=-_,B.minus(b);var p=B.e/se,a=b.e/se,c=B.c,l=b.c;if(!p||!a){if(!c||!l)return new L(N/0);if(!c[0]||!l[0])return l[0]?b:new L(c[0]?B:N*0)}if(p=jt(p),a=jt(a),c=c.slice(),N=p-a){for(N>0?(a=p,v=l):(N=-N,v=c),v.reverse();N--;v.push(0));v.reverse()}for(N=c.length,_=l.length,N-_<0&&(v=l,l=c,c=v,_=N),N=0;_;)N=(c[--_]=c[_]+l[_]+N)/er|0,c[_]=er===c[_]?0:c[_]%er;return N&&(c=[N].concat(c),++a),Q(b,c,a)},i.precision=i.sd=function(b,_){var v,B,N,p=this;if(b!=null&&b!==!!b)return ve(b,1,pt),_==null?_=u:ve(_,0,8),j(new L(p),b,_);if(!(v=p.c))return null;if(N=v.length-1,B=N*se+1,N=v[N]){for(;N%10==0;N/=10,B--);for(N=v[0];N>=10;N/=10,B++);}return b&&p.e+1>B&&(B=p.e+1),B},i.shiftedBy=function(b){return ve(b,-xc,xc),this.times("1e"+b)},i.squareRoot=i.sqrt=function(){var b,_,v,B,N,p=this,a=p.c,c=p.s,l=p.e,d=s+4,g=new L("0.5");if(c!==1||!a||!a[0])return new L(!c||c<0&&(!a||a[0])?NaN:a?p:1/0);if(c=Math.sqrt(+ee(p)),c==0||c==1/0?(_=Yt(a),(_.length+l)%2==0&&(_+="0"),c=Math.sqrt(+_),l=jt((l+1)/2)-(l<0||l%2),c==1/0?_="5e"+l:(_=c.toExponential(),_=_.slice(0,_.indexOf("e")+1)+l),v=new L(_)):v=new L(c+""),v.c[0]){for(l=v.e,c=l+d,c<3&&(c=0);;)if(N=v,v=g.times(N.plus(e(p,N,d,1))),Yt(N.c).slice(0,c)===(_=Yt(v.c)).slice(0,c))if(v.e<l&&--c,_=_.slice(c-3,c+1),_=="9999"||!B&&_=="4999"){if(!B&&(j(N,N.e+s+2,0),N.times(N).eq(p))){v=N;break}d+=4,c+=4,B=1}else{(!+_||!+_.slice(1)&&_.charAt(0)=="5")&&(j(v,v.e+s+2,1),b=!v.times(v).eq(p));break}}return j(v,v.e+s+1,u,b)},i.toExponential=function(b,_){return b!=null&&(ve(b,0,pt),b++),F(this,b,_,1)},i.toFixed=function(b,_){return b!=null&&(ve(b,0,pt),b=b+this.e+1),F(this,b,_)},i.toFormat=function(b,_,v){var B,N=this;if(v==null)b!=null&&_&&typeof _=="object"?(v=_,_=null):b&&typeof b=="object"?(v=b,b=_=null):v=T;else if(typeof v!="object")throw Error(Pt+"Argument not an object: "+v);if(B=N.toFixed(b,_),N.c){var p,a=B.split("."),c=+v.groupSize,l=+v.secondaryGroupSize,d=v.groupSeparator||"",g=a[0],m=a[1],A=N.s<0,y=A?g.slice(1):g,h=y.length;if(l&&(p=c,c=l,l=p,h-=p),c>0&&h>0){for(p=h%c||c,g=y.substr(0,p);p<h;p+=c)g+=d+y.substr(p,c);l>0&&(g+=d+y.slice(p)),A&&(g="-"+g)}B=m?g+(v.decimalSeparator||"")+((l=+v.fractionGroupSize)?m.replace(new RegExp("\\d{"+l+"}\\B","g"),"$&"+(v.fractionGroupSeparator||"")):m):g}return(v.prefix||"")+B+(v.suffix||"")},i.toFraction=function(b){var _,v,B,N,p,a,c,l,d,g,m,A,y=this,h=y.c;if(b!=null&&(c=new L(b),!c.isInteger()&&(c.c||c.s!==1)||c.lt(o)))throw Error(Pt+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+ee(c));if(!h)return new L(y);for(_=new L(o),d=v=new L(o),B=l=new L(o),A=Yt(h),p=_.e=A.length-y.e-1,_.c[0]=vc[(a=p%se)<0?se+a:a],b=!b||c.comparedTo(_)>0?p>0?_:d:c,a=S,S=1/0,c=new L(A),l.c[0]=0;g=e(c,_,0,1),N=v.plus(g.times(B)),N.comparedTo(b)!=1;)v=B,B=N,d=l.plus(g.times(N=d)),l=N,_=c.minus(g.times(N=_)),c=N;return N=e(b.minus(v),B,0,1),l=l.plus(N.times(d)),v=v.plus(N.times(B)),l.s=d.s=y.s,p=p*2,m=e(d,B,p,u).minus(y).abs().comparedTo(e(l,v,p,u).minus(y).abs())<1?[d,B]:[l,v],S=a,m},i.toNumber=function(){return+ee(this)},i.toPrecision=function(b,_){return b!=null&&ve(b,1,pt),F(this,b,_,2)},i.toString=function(b){var _,v=this,B=v.s,N=v.e;return N===null?B?(_="Infinity",B<0&&(_="-"+_)):_="NaN":(b==null?_=N<=f||N>=w?es(Yt(v.c),N):vr(Yt(v.c),N,"0"):b===10&&C?(v=j(new L(v),s+N+1,u),_=vr(Yt(v.c),v.e,"0")):(ve(b,2,P.length,"Base"),_=t(vr(Yt(v.c),N,"0"),10,b,B,!0)),B<0&&v.c[0]&&(_="-"+_)),_},i.valueOf=i.toJSON=function(){return ee(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,r!=null&&L.set(r),L}function jt(r){var e=r|0;return r>0||r===e?e:e-1}function Yt(r){for(var e,t,n=1,i=r.length,o=r[0]+"";n<i;){for(e=r[n++]+"",t=se-e.length;t--;e="0"+e);o+=e}for(i=o.length;o.charCodeAt(--i)===48;);return o.slice(0,i+1||1)}function wn(r,e){var t,n,i=r.c,o=e.c,s=r.s,u=e.s,f=r.e,w=e.e;if(!s||!u)return null;if(t=i&&!i[0],n=o&&!o[0],t||n)return t?n?0:-u:s;if(s!=u)return s;if(t=s<0,n=f==w,!i||!o)return n?0:!i^t?1:-1;if(!n)return f>w^t?1:-1;for(u=(f=i.length)<(w=o.length)?f:w,s=0;s<u;s++)if(i[s]!=o[s])return i[s]>o[s]^t?1:-1;return f==w?0:f>w^t?1:-1}function ve(r,e,t,n){if(r<e||r>t||r!==Xt(r))throw Error(Pt+(n||"Argument")+(typeof r=="number"?r<e||r>t?" out of range: ":" not an integer: ":" not a primitive number: ")+String(r))}function Qo(r){var e=r.c.length-1;return jt(r.e/se)==e&&r.c[e]%2!=0}function es(r,e){return(r.length>1?r.charAt(0)+"."+r.slice(1):r)+(e<0?"e":"e+")+e}function vr(r,e,t){var n,i;if(e<0){for(i=t+".";++e;i+=t);r=i+r}else if(n=r.length,++e>n){for(i=t,e-=n;--e;i+=t);r+=i}else e<n&&(r=r.slice(0,e)+"."+r.slice(e));return r}var _w=fh(),lh=_w;var NR=new lh("1e+18");var hh=ut(ar(),1);var ts=r=>{let e=(0,hh.u8)(r),{encode:t,decode:n}=Gr(e),i=e;return i.decode=(o,s)=>!!n(o,s),i.encode=(o,s,u)=>{let f=Number(o);return t(f,s,u)},i};var dh=ut(ar(),1);var at=r=>{let e=(0,dh.blob)(32,r),{encode:t,decode:n}=Gr(e),i=e;return i.decode=(o,s)=>{let u=n(o,s);return new Z(u)},i.encode=(o,s,u)=>{let f=o.toBuffer();return t(f,s,u)},i};var bn=class extends Error{constructor(e){super(e)}},rs=class extends bn{constructor(){super(...arguments),this.name="TokenAccountNotFoundError"}};var ns=class extends bn{constructor(){super(...arguments),this.name="TokenInvalidAccountOwnerError"}},Xn=class extends bn{constructor(){super(...arguments),this.name="TokenInvalidAccountSizeError"}},is=class extends bn{constructor(){super(...arguments),this.name="TokenInvalidMintError"}};var os=class extends bn{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}};var ss;(function(r){r[r.InitializeMint=0]="InitializeMint",r[r.InitializeAccount=1]="InitializeAccount",r[r.InitializeMultisig=2]="InitializeMultisig",r[r.Transfer=3]="Transfer",r[r.Approve=4]="Approve",r[r.Revoke=5]="Revoke",r[r.SetAuthority=6]="SetAuthority",r[r.MintTo=7]="MintTo",r[r.Burn=8]="Burn",r[r.CloseAccount=9]="CloseAccount",r[r.FreezeAccount=10]="FreezeAccount",r[r.ThawAccount=11]="ThawAccount",r[r.TransferChecked=12]="TransferChecked",r[r.ApproveChecked=13]="ApproveChecked",r[r.MintToChecked=14]="MintToChecked",r[r.BurnChecked=15]="BurnChecked",r[r.InitializeAccount2=16]="InitializeAccount2",r[r.SyncNative=17]="SyncNative",r[r.InitializeAccount3=18]="InitializeAccount3",r[r.InitializeMultisig2=19]="InitializeMultisig2",r[r.InitializeMint2=20]="InitializeMint2",r[r.GetAccountDataSize=21]="GetAccountDataSize",r[r.InitializeImmutableOwner=22]="InitializeImmutableOwner",r[r.AmountToUiAmount=23]="AmountToUiAmount",r[r.UiAmountToAmount=24]="UiAmountToAmount",r[r.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",r[r.TransferFeeExtension=26]="TransferFeeExtension",r[r.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",r[r.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",r[r.Reallocate=29]="Reallocate",r[r.MemoTransferExtension=30]="MemoTransferExtension",r[r.CreateNativeMint=31]="CreateNativeMint",r[r.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",r[r.InterestBearingMintExtension=33]="InterestBearingMintExtension",r[r.CpiGuardExtension=34]="CpiGuardExtension",r[r.InitializePermanentDelegate=35]="InitializePermanentDelegate",r[r.TransferHookExtension=36]="TransferHookExtension",r[r.MetadataPointerExtension=39]="MetadataPointerExtension",r[r.GroupPointerExtension=40]="GroupPointerExtension",r[r.GroupMemberPointerExtension=41]="GroupMemberPointerExtension",r[r.ScaledUiAmountExtension=43]="ScaledUiAmountExtension",r[r.PausableExtension=44]="PausableExtension"})(ss||(ss={}));var En=ut(ar(),1);var as;(function(r){r[r.Uninitialized=0]="Uninitialized",r[r.Mint=1]="Mint",r[r.Account=2]="Account"})(as||(as={}));var ph=1;var Zr=ut(ar(),1);var Oi=ut(ar(),1);var ww=(0,Oi.struct)([(0,Oi.u8)("m"),(0,Oi.u8)("n"),ts("isInitialized"),at("signer1"),at("signer2"),at("signer3"),at("signer4"),at("signer5"),at("signer6"),at("signer7"),at("signer8"),at("signer9"),at("signer10"),at("signer11")]),gh=ww.span;var yh;(function(r){r[r.Uninitialized=0]="Uninitialized",r[r.Initialized=1]="Initialized",r[r.Frozen=2]="Frozen"})(yh||(yh={}));var bw=(0,Zr.struct)([at("mint"),at("owner"),Xr("amount"),(0,Zr.u32)("delegateOption"),at("delegate"),(0,Zr.u8)("state"),(0,Zr.u32)("isNativeOption"),Xr("isNative"),Xr("delegatedAmount"),(0,Zr.u32)("closeAuthorityOption"),at("closeAuthority")]),cs=bw.span;function mh(r,e,t){if(t.length){r.push({pubkey:e,isSigner:!1,isWritable:!1});for(let n of t)r.push({pubkey:n instanceof Z?n:n.publicKey,isSigner:!0,isWritable:!1})}else r.push({pubkey:e,isSigner:!0,isWritable:!1});return r}var Ni=ut(ar(),1);var _h=(0,Ni.struct)([(0,Ni.u8)("instruction"),Xr("amount"),(0,Ni.u8)("decimals")]);function wh(r,e,t,n,i,o,s=[],u=Wr){let f=mh([{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!0}],n,s),w=Buffer.alloc(_h.span);return _h.encode({instruction:ss.TransferChecked,amount:BigInt(i),decimals:o},w),new ye({keys:f,programId:u,data:w})}var bh=(0,En.struct)([(0,En.u32)("mintAuthorityOption"),at("mintAuthority"),Xr("supply"),(0,En.u8)("decimals"),ts("isInitialized"),(0,En.u32)("freezeAuthorityOption"),at("freezeAuthority")]),Ic=bh.span;async function Eh(r,e,t,n=Wr){let i=await r.getAccountInfo(e,t);return Ew(e,i,n)}function Ew(r,e,t=Wr){if(!e)throw new rs;if(!e.owner.equals(t))throw new ns;if(e.data.length<Ic)throw new Xn;let n=bh.decode(e.data.slice(0,Ic)),i=Buffer.alloc(0);if(e.data.length>Ic){if(e.data.length<=cs)throw new Xn;if(e.data.length===gh)throw new Xn;if(e.data[cs]!=as.Mint)throw new is;i=e.data.slice(cs+ph)}return{address:r,mintAuthority:n.mintAuthorityOption?n.mintAuthority:null,supply:n.supply,decimals:n.decimals,isInitialized:n.isInitialized,freezeAuthority:n.freezeAuthorityOption?n.freezeAuthority:null,tlvData:i}}async function Oc(r,e,t=!1,n=Wr,i=ah){if(!t&&!Z.isOnCurve(e.toBuffer()))throw new os;let[o]=await Z.findProgramAddress([e.toBuffer(),n.toBuffer(),r.toBuffer()],i);return o}function Rw(r,e,t){let n=Buffer.from(r.serialize()).toString("base64"),i={x402Version:t,scheme:e.scheme,network:e.network,payload:{transaction:n}};return Buffer.from(JSON.stringify(i)).toString("base64")}function Sw(r){if(r==="solana")return"https://api.mainnet-beta.solana.com";if(r==="solana-devnet")return"https://api.devnet.solana.com";throw new Error(`Unexpected network: ${r}`)}async function Aw(r,e,t,n){let i=new $o(n,"confirmed"),o=t?.extra?.feePayer;if(typeof o!="string"||!o)throw new Error("Missing facilitator feePayer in payment requirements (extra.feePayer).");let s=new Z(o),u=r?.publicKey?.toString()||r?.address;if(!u)throw new Error("Missing connected Solana wallet address or publicKey");let f=new Z(u);if(!t?.payTo)throw new Error("Missing payTo in payment requirements");let w=new Z(t.payTo),R=[];if(R.push($n.setComputeUnitLimit({units:4e4})),R.push($n.setComputeUnitPrice({microLamports:1})),!t.asset)throw new Error("Missing token mint for SPL transfer");let S=new Z(t.asset),x=(await i.getAccountInfo(S,"confirmed"))?.owner?.toBase58()===Rc.toBase58()?Rc:Wr,k=await Eh(i,S,void 0,x),T=await Oc(S,f,!1,x),P=await Oc(S,w,!1,x);if(!await i.getAccountInfo(T,"confirmed"))throw new Error(`User does not have an Associated Token Account for ${t.asset}. Please create one first or ensure you have the required token.`);if(!await i.getAccountInfo(P,"confirmed")){let b=new Z("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),_=new ye({keys:[{pubkey:s,isSigner:!0,isWritable:!0},{pubkey:P,isSigner:!1,isWritable:!0},{pubkey:w,isSigner:!1,isWritable:!1},{pubkey:S,isSigner:!1,isWritable:!1},{pubkey:wt.programId,isSigner:!1,isWritable:!1},{pubkey:x,isSigner:!1,isWritable:!1}],programId:b,data:Buffer.from([0])});R.push(_)}let F=BigInt(t.maxAmountRequired);R.push(wh(T,S,P,f,F,k.decimals,[],x));let{blockhash:V}=await i.getLatestBlockhash("confirmed"),Q=new Ko({payerKey:s,recentBlockhash:V,instructions:R}).compileToV0Message(),j=new qo(Q);if(typeof r?.signTransaction!="function")throw new Error("Connected wallet does not support signTransaction");let ee=await r.signTransaction(j);return Rw(ee,t,e)}function xw(r,e,t,n=BigInt(0)){return async(i,o)=>{let s=await r(i,o);if(s.status!==402)return s;let u=await s.json(),f=u.x402Version,w=u.accepts||[],R=w.find(x=>x.scheme==="exact"&&(x.network==="solana-devnet"||x.network==="solana"));if(!R)throw console.error("\u274C No suitable Solana payment requirements found. Available networks:",w.map(x=>x.network)),new Error("No suitable Solana payment requirements found");if(n>BigInt(0)&&BigInt(R.maxAmountRequired)>n)throw new Error("Payment amount exceeds maximum allowed");let S=await Aw(e,f,R,t),I={...o,headers:{...o?.headers||{},"X-PAYMENT":S,"Access-Control-Expose-Headers":"X-PAYMENT-RESPONSE"}};return await r(i,I)}}var vw=class{paymentFetch;constructor(r){let e=r.rpcUrl||Sw(r.network);this.paymentFetch=xw(fetch.bind(window),r.wallet,e,r.maxPaymentAmount||BigInt(0))}async fetch(r,e){return this.paymentFetch(r,e)}};function Rh(r){return new vw(r)}var vh=ut(vn(),1);typeof globalThis.Buffer>"u"&&(globalThis.Buffer=vh.Buffer);var Sh=document.querySelector("#sol402-demo-connect"),ki=document.querySelector("#sol402-demo-pay"),Ah=document.querySelector("#sol402-demo-log"),Nc=document.querySelector("#sol402-demo-result"),us=window.sol402DemoConfig,Iw=()=>{if(!us?.demoUrl||!us?.rpcUrl||!us?.network)throw new Error("Demo configuration missing. Reload the page and try again.");return us},Jr=r=>{let e=new Date().toLocaleTimeString();Ah&&(Ah.textContent=`[${e}] ${r}`)},kc=(r,e=!1)=>{Nc&&(Nc.textContent=r,Nc.classList.toggle("demo-result--muted",e))},xh=r=>{if(r){if(/^https?:\/\//i.test(r))return r;try{return new URL(r,window.location.origin).toString()}catch{return}}},Ow=()=>{let r=window.solana;if(r?.isPhantom)return r;throw new Error("Phantom wallet not detected. Install the extension and refresh.")},jn=null,Ih=!1,Oh,Nh;Sh?.addEventListener("click",async()=>{try{jn=Ow(),Jr("Requesting wallet connection\u2026");let{publicKey:r}=await jn.connect();Oh=r,Nh=r.toString(),Jr(`Connected ${r.toString()}. Ready to pay.`),Sh.disabled=!0,ki&&(ki.disabled=!1),Ih=!0}catch(r){console.error(r),Jr(r?.message??"Wallet connection failed.")}});ki?.addEventListener("click",async()=>{if(!Ih||!jn){Jr("Connect your wallet first.");return}let{demoUrl:r,rpcUrl:e,fallbackRpcUrl:t,network:n}=Iw();ki.disabled=!0,kc("Pending\u2026",!0),Jr("Preparing payment. Approve the transaction in Phantom.");try{let i=Oh??jn.publicKey;if(!i)throw new Error("Wallet public key unavailable. Reconnect Phantom and try again.");let o={address:Nh??i.toString(),publicKey:i,signTransaction:async k=>{if(!jn?.signTransaction)throw new Error("Connected wallet does not support signTransaction");return jn.signTransaction(k)}},s=xh(e),u=xh(t),f=new Set;s&&f.add(s),u&&f.add(u),f.size===0&&f.add(void 0);let w=Array.from(f),R=null,S;for(let k of w)try{R=await Rh({wallet:o,network:n,...k?{rpcUrl:k}:{},maxPaymentAmount:BigInt(1e4)}).fetch(r,{headers:{accept:"application/json"}});break}catch(T){S=T,Jr(k?`RPC ${k} failed (${T?.message??"error"}). Retrying with fallback\u2026`:T?.message??"RPC request failed.")}if(!R)throw S??new Error("Payment fetch failed and no fallback succeeded.");let I=await R.text(),x=I;try{let k=JSON.parse(I);x=JSON.stringify(k,null,2)}catch{}Jr(`Completed with status ${R.status}.`),kc(x||"(empty response)",!x)}catch(i){console.error(i),Jr(i?.message??"Payment failed. Check the console for details."),kc("No response \u2014 payment or fetch failed.",!0)}finally{ki.disabled=!1}});
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

@solana/buffer-layout/lib/Layout.js:
  (**
   * Support for translating between Uint8Array instances and JavaScript
   * native types.
   *
   * {@link module:Layout~Layout|Layout} is the basis of a class
   * hierarchy that associates property names with sequences of encoded
   * bytes.
   *
   * Layouts are supported for these scalar (numeric) types:
   * * {@link module:Layout~UInt|Unsigned integers in little-endian
   *   format} with {@link module:Layout.u8|8-bit}, {@link
   *   module:Layout.u16|16-bit}, {@link module:Layout.u24|24-bit},
   *   {@link module:Layout.u32|32-bit}, {@link
   *   module:Layout.u40|40-bit}, and {@link module:Layout.u48|48-bit}
   *   representation ranges;
   * * {@link module:Layout~UIntBE|Unsigned integers in big-endian
   *   format} with {@link module:Layout.u16be|16-bit}, {@link
   *   module:Layout.u24be|24-bit}, {@link module:Layout.u32be|32-bit},
   *   {@link module:Layout.u40be|40-bit}, and {@link
   *   module:Layout.u48be|48-bit} representation ranges;
   * * {@link module:Layout~Int|Signed integers in little-endian
   *   format} with {@link module:Layout.s8|8-bit}, {@link
   *   module:Layout.s16|16-bit}, {@link module:Layout.s24|24-bit},
   *   {@link module:Layout.s32|32-bit}, {@link
   *   module:Layout.s40|40-bit}, and {@link module:Layout.s48|48-bit}
   *   representation ranges;
   * * {@link module:Layout~IntBE|Signed integers in big-endian format}
   *   with {@link module:Layout.s16be|16-bit}, {@link
   *   module:Layout.s24be|24-bit}, {@link module:Layout.s32be|32-bit},
   *   {@link module:Layout.s40be|40-bit}, and {@link
   *   module:Layout.s48be|48-bit} representation ranges;
   * * 64-bit integral values that decode to an exact (if magnitude is
   *   less than 2^53) or nearby integral Number in {@link
   *   module:Layout.nu64|unsigned little-endian}, {@link
   *   module:Layout.nu64be|unsigned big-endian}, {@link
   *   module:Layout.ns64|signed little-endian}, and {@link
   *   module:Layout.ns64be|unsigned big-endian} encodings;
   * * 32-bit floating point values with {@link
   *   module:Layout.f32|little-endian} and {@link
   *   module:Layout.f32be|big-endian} representations;
   * * 64-bit floating point values with {@link
   *   module:Layout.f64|little-endian} and {@link
   *   module:Layout.f64be|big-endian} representations;
   * * {@link module:Layout.const|Constants} that take no space in the
   *   encoded expression.
   *
   * and for these aggregate types:
   * * {@link module:Layout.seq|Sequence}s of instances of a {@link
   *   module:Layout~Layout|Layout}, with JavaScript representation as
   *   an Array and constant or data-dependent {@link
   *   module:Layout~Sequence#count|length};
   * * {@link module:Layout.struct|Structure}s that aggregate a
   *   heterogeneous sequence of {@link module:Layout~Layout|Layout}
   *   instances, with JavaScript representation as an Object;
   * * {@link module:Layout.union|Union}s that support multiple {@link
   *   module:Layout~VariantLayout|variant layouts} over a fixed
   *   (padded) or variable (not padded) span of bytes, using an
   *   unsigned integer at the start of the data or a separate {@link
   *   module:Layout.unionLayoutDiscriminator|layout element} to
   *   determine which layout to use when interpreting the buffer
   *   contents;
   * * {@link module:Layout.bits|BitStructure}s that contain a sequence
   *   of individual {@link
   *   module:Layout~BitStructure#addField|BitField}s packed into an 8,
   *   16, 24, or 32-bit unsigned integer starting at the least- or
   *   most-significant bit;
   * * {@link module:Layout.cstr|C strings} of varying length;
   * * {@link module:Layout.blob|Blobs} of fixed- or variable-{@link
   *   module:Layout~Blob#length|length} raw data.
   *
   * All {@link module:Layout~Layout|Layout} instances are immutable
   * after construction, to prevent internal state from becoming
   * inconsistent.
   *
   * @local Layout
   * @local ExternalLayout
   * @local GreedyCount
   * @local OffsetLayout
   * @local UInt
   * @local UIntBE
   * @local Int
   * @local IntBE
   * @local NearUInt64
   * @local NearUInt64BE
   * @local NearInt64
   * @local NearInt64BE
   * @local Float
   * @local FloatBE
   * @local Double
   * @local DoubleBE
   * @local Sequence
   * @local Structure
   * @local UnionDiscriminator
   * @local UnionLayoutDiscriminator
   * @local Union
   * @local VariantLayout
   * @local BitStructure
   * @local BitField
   * @local Boolean
   * @local Blob
   * @local CString
   * @local Constant
   * @local bindConstructorLayout
   * @module Layout
   * @license MIT
   * @author Peter A. Bigot
   * @see {@link https://github.com/pabigot/buffer-layout|buffer-layout on GitHub}
   *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/utils.js:
@noble/curves/esm/abstract/modular.js:
@noble/curves/esm/abstract/curve.js:
@noble/curves/esm/abstract/edwards.js:
@noble/curves/esm/ed25519.js:
@noble/curves/esm/abstract/weierstrass.js:
@noble/curves/esm/_shortw_utils.js:
@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
